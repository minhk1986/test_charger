{"remainingRequest":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/services/agvr/agvr-sim1000-pose.js","dependencies":[{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/services/agvr/agvr-sim1000-pose.js","mtime":1609316939488},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1609316939616},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1609316939572},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1609316939784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL3JvYm90aWNzL1R1bmdOVi9hZ3ZfdjJfd3Mvc3JjL2Fndl92Mi93ZWJTZXJ2ZXIvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvcm9ib3RpY3MvVHVuZ05WL2Fndl92Ml93cy9zcmMvYWd2X3YyL3dlYlNlcnZlci9hZ3YtZGFzYm9hcmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9jbGFzc1ByaXZhdGVGaWVsZEdldCBmcm9tICIvaG9tZS9yb2JvdGljcy9UdW5nTlYvYWd2X3YyX3dzL3NyYy9hZ3ZfdjIvd2ViU2VydmVyL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NQcml2YXRlRmllbGRHZXQiOwppbXBvcnQgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IGZyb20gIi9ob21lL3JvYm90aWNzL1R1bmdOVi9hZ3ZfdjJfd3Mvc3JjL2Fndl92Mi93ZWJTZXJ2ZXIvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc1ByaXZhdGVGaWVsZFNldCI7CmltcG9ydCBST1NMSUIgZnJvbSAicm9zbGliIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwoKdmFyIF9pZCA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX21hcCA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX3Jvc1N0b3JlID0gbmV3IFdlYWtNYXAoKTsKCnZhciBfc2ltUG9zZVRvcGljID0gbmV3IFdlYWtNYXAoKTsKCnZhciBfb25TaW1Qb3NlUmVjZWl2ZWQgPSBuZXcgV2Vha01hcCgpOwoKdmFyIEFndnJTaW0xMDAwUG9zZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQWd2clNpbTEwMDBQb3NlKHJvcywgaWQsIG1hcElkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZ3ZyU2ltMTAwMFBvc2UpOwoKICAgIF9pZC5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0pOwoKICAgIF9tYXAuc2V0KHRoaXMsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiBudWxsCiAgICB9KTsKCiAgICBfcm9zU3RvcmUuc2V0KHRoaXMsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiBudWxsCiAgICB9KTsKCiAgICBfc2ltUG9zZVRvcGljLnNldCh0aGlzLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogbnVsbAogICAgfSk7CgogICAgX29uU2ltUG9zZVJlY2VpdmVkLnNldCh0aGlzLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUobWVzc2FnZSkgewogICAgICAgIGlmIChfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9yb3NTdG9yZSkuc3RhdGUubmF2aWdhdGlvbi5zdWJzY3JpYmVQb3NlKSB7CiAgICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9yb3NTdG9yZSkuY29tbWl0KCJhZ3ZzL3NldFNpbTEwMDBQb3NlIiwgewogICAgICAgICAgICBwb3NlOiBtZXNzYWdlLnRlbGVncmFtX3BheWxvYWQsCiAgICAgICAgICAgIGFndklkOiBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9pZCksCiAgICAgICAgICAgIHJvc01hcDogX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzLCBfbWFwKS5yb3NNYXAsCiAgICAgICAgICAgIG1hcFNjYWxlOiBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9tYXApLndlYk1hcC5zY2FsZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBpZiAoIShyb3MgaW5zdGFuY2VvZiBST1NMSUIuUm9zKSkgcmV0dXJuOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfcm9zU3RvcmUsIFZ1ZS5wcm90b3R5cGUuJHN0b3JlKTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2lkLCBpZCk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9tYXAsIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcm9zU3RvcmUpLnN0YXRlLmFndk1hcHMuZmluZChmdW5jdGlvbiAobSkgewogICAgICByZXR1cm4gbS5pZCA9PT0gbWFwSWQ7CiAgICB9KSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9zaW1Qb3NlVG9waWMsIG5ldyBST1NMSUIuVG9waWMoewogICAgICByb3M6IHJvcywKICAgICAgbmFtZTogIi9zaWNrX2xpZGFyX2xvY2FsaXphdGlvbi9kcml2ZXIvcmVzdWx0X3RlbGVncmFtcyIsCiAgICAgIG1lc3NhZ2VUeXBlOiAic2lja19saWRhcl9sb2NhbGl6YXRpb24vU2lja0xvY1Jlc3VsdFBvcnRUZWxlZ3JhbU1zZyIKICAgIH0pKTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3NpbVBvc2VUb3BpYykuc3Vic2NyaWJlKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfb25TaW1Qb3NlUmVjZWl2ZWQpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBZ3ZyU2ltMTAwMFBvc2UsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9zaW1Qb3NlVG9waWMpICE9IG51bGwpIHsKICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3NpbVBvc2VUb3BpYykudW5zdWJzY3JpYmUoKTsKCiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9zaW1Qb3NlVG9waWMsIG51bGwpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWd2clNpbTEwMDBQb3NlOwp9KCk7CgpleHBvcnQgeyBBZ3ZyU2ltMTAwMFBvc2UgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/services/agvr/agvr-sim1000-pose.js"],"names":["ROSLIB","Vue","AgvrSim1000Pose","ros","id","mapId","message","state","navigation","subscribePose","commit","pose","telegram_payload","agvId","rosMap","mapScale","webMap","scale","Ros","prototype","$store","agvMaps","find","m","Topic","name","messageType","subscribe","unsubscribe"],"mappings":";;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,KAAhB;;;;;;;;;;;;IAEqBC,e;AAMnB,2BAAYC,GAAZ,EAAiBC,EAAjB,EAAqBC,KAArB,EAA4B;AAAA;;AAAA;;AAAA;AAAA;AAAA,aALtB;AAKsB;;AAAA;AAAA;AAAA,aAJrB;AAIqB;;AAAA;AAAA;AAAA,aAHhB;AAGgB;;AAAA;AAAA;AAAA,aAFZ;AAEY;;AAAA;AAAA;AAAA,aAoBP,eAACC,OAAD,EAAa;AAChC,YAAI,sBAAA,KAAI,YAAJ,CAAeC,KAAf,CAAqBC,UAArB,CAAgCC,aAApC,EAAmD;AACjD,gCAAA,KAAI,YAAJ,CAAeC,MAAf,CAAsB,qBAAtB,EAA6C;AAC3CC,YAAAA,IAAI,EAAEL,OAAO,CAACM,gBAD6B;AAE3CC,YAAAA,KAAK,wBAAE,KAAF,MAFsC;AAG3CC,YAAAA,MAAM,EAAE,sBAAA,KAAI,OAAJ,CAAUA,MAHyB;AAI3CC,YAAAA,QAAQ,EAAE,sBAAA,KAAI,OAAJ,CAAUC,MAAV,CAAiBC;AAJgB,WAA7C;AAMD;AACF;AA7B2B;;AAC1B,QAAI,EAAEd,GAAG,YAAYH,MAAM,CAACkB,GAAxB,CAAJ,EAAkC;;AAElC,2CAAiBjB,GAAG,CAACkB,SAAJ,CAAcC,MAA/B;;AACA,qCAAWhB,EAAX;;AACA,sCAAY,uCAAeG,KAAf,CAAqBc,OAArB,CAA6BC,IAA7B,CAAkC,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACnB,EAAF,KAASC,KAAhB;AAAA,KAAlC,CAAZ;;AACA,+CAAqB,IAAIL,MAAM,CAACwB,KAAX,CAAiB;AACpCrB,MAAAA,GAAG,EAAEA,GAD+B;AAEpCsB,MAAAA,IAAI,EAAE,kDAF8B;AAGpCC,MAAAA,WAAW,EAAE;AAHuB,KAAjB,CAArB;;AAKA,+CAAmBC,SAAnB,uBAA6B,IAA7B;AACD;;;;8BAES;AACR,UAAI,8CAAsB,IAA1B,EAAgC;AAC9B,mDAAmBC,WAAnB;;AACA,mDAAqB,IAArB;AACD;AACF;;;;;;SAzBkB1B,e","sourcesContent":["import ROSLIB from \"roslib\";\nimport Vue from \"vue\";\n\nexport default class AgvrSim1000Pose {\n  #id = null;\n  #map = null;\n  #rosStore = null;\n  #simPoseTopic = null;\n\n  constructor(ros, id, mapId) {\n    if (!(ros instanceof ROSLIB.Ros)) return;\n\n    this.#rosStore = Vue.prototype.$store;\n    this.#id = id;\n    this.#map = this.#rosStore.state.agvMaps.find((m) => m.id === mapId);\n    this.#simPoseTopic = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/sick_lidar_localization/driver/result_telegrams\",\n      messageType: \"sick_lidar_localization/SickLocResultPortTelegramMsg\",\n    });\n    this.#simPoseTopic.subscribe(this.#onSimPoseReceived);\n  }\n\n  dispose() {\n    if (this.#simPoseTopic != null) {\n      this.#simPoseTopic.unsubscribe();\n      this.#simPoseTopic = null;\n    }\n  }\n  #onSimPoseReceived = (message) => {\n    if (this.#rosStore.state.navigation.subscribePose) {\n      this.#rosStore.commit(\"agvs/setSim1000Pose\", {\n        pose: message.telegram_payload,\n        agvId: this.#id,\n        rosMap: this.#map.rosMap,\n        mapScale: this.#map.webMap.scale,\n      })\n    }\n  }\n}"]}]}