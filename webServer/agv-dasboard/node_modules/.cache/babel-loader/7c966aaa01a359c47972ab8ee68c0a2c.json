{"remainingRequest":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/components/AgvrMapImage/AgvrMapImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/components/AgvrMapImage/AgvrMapImage.vue","mtime":1609316939484},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1609316939616},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1609316939572},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1609316939616},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1609316942712}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3JvYm90aWNzL1R1bmdOVi9hZ3ZfdjJfd3Mvc3JjL2Fndl92Mi93ZWJTZXJ2ZXIvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgfSBmcm9tICJ2dWV4IjsKCnZhciBfY3JlYXRlTmFtZXNwYWNlZEhlbHAgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiYWd2TWFwcyIpLAogICAgYWd2TWFwc1N0YXRlID0gX2NyZWF0ZU5hbWVzcGFjZWRIZWxwLm1hcFN0YXRlOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZ3ZyTWFwSW1hZ2UiLAogIHByb3BzOiB7CiAgICBtYXBJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWFwQ2FudmFzOiBudWxsLAogICAgICB3aWR0aDogMCwKICAgICAgaGVpZ2h0OiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIGFndk1hcHNTdGF0ZSh7CiAgICBhZ3ZNYXBJbWFnZTogZnVuY3Rpb24gYWd2TWFwSW1hZ2Uoc3RhdGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBhZ3ZNYXAgPSBzdGF0ZS5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIG0uaWQgPT09IF90aGlzLm1hcElkOwogICAgICB9KTsKICAgICAgcmV0dXJuIGFndk1hcCAhPSBudWxsID8gYWd2TWFwLndlYk1hcC5JbWFnZSA6IG51bGw7CiAgICB9CiAgfSkpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLm1hcENhbnZhcyA9IHRoaXMuJHJlZnMubWFwSW1hZ2VSZWY7CiAgICB0aGlzLnNldE1hcEltYWdlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRNYXBJbWFnZTogZnVuY3Rpb24gc2V0TWFwSW1hZ2UoKSB7CiAgICAgIHZhciBtYXBJbWFnZSA9IHRoaXMuYWd2TWFwSW1hZ2U7CiAgICAgIGlmIChtYXBJbWFnZSA9PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMud2lkdGggPSBtYXBJbWFnZS53aWR0aDsKICAgICAgdGhpcy5oZWlnaHQgPSBtYXBJbWFnZS5oZWlnaHQ7CiAgICAgIHRoaXMubWFwQ2FudmFzLndpZHRoID0gbWFwSW1hZ2Uud2lkdGg7CiAgICAgIHRoaXMubWFwQ2FudmFzLmhlaWdodCA9IG1hcEltYWdlLmhlaWdodDsKICAgICAgdmFyIGN0eCA9IHRoaXMubWFwQ2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIHZhciBpbWFnZURhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKG1hcEltYWdlLndpZHRoLCBtYXBJbWFnZS5oZWlnaHQpOwogICAgICBpbWFnZURhdGEuZGF0YS5zZXQobWFwSW1hZ2UuZGF0YSk7CiAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBhZ3ZNYXBJbWFnZTogZnVuY3Rpb24gYWd2TWFwSW1hZ2UoKSB7CiAgICAgIHRoaXMuc2V0TWFwSW1hZ2UoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AgvrMapImage.vue"],"names":[],"mappings":";;;;;;;;AAOA,SAAA,uBAAA,QAAA,MAAA;;4BAEA,uBAAA,CAAA,SAAA,C;IAAA,Y,yBAAA,Q;;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,CAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAAA,GARA;AAaA,EAAA,QAAA,oBACA,YAAA,CAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AAAA;;AACA,UAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,KAAA;AAAA,OAAA,CAAA;AACA,aAAA,MAAA,IAAA,IAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA;AAJA,GAAA,CADA,CAbA;AAqBA,EAAA,OArBA,qBAqBA;AACA,SAAA,SAAA,GAAA,KAAA,KAAA,CAAA,WAAA;AACA,SAAA,WAAA;AACA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,UAAA,QAAA,GAAA,KAAA,WAAA;AACA,UAAA,QAAA,IAAA,IAAA,EAAA;AACA,WAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,WAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,WAAA,SAAA,CAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,WAAA,SAAA,CAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,UAAA,GAAA,GAAA,KAAA,SAAA,CAAA,UAAA,CAAA,IAAA,CAAA;AACA,UAAA,SAAA,GAAA,GAAA,CAAA,eAAA,CAAA,QAAA,CAAA,KAAA,EAAA,QAAA,CAAA,MAAA,CAAA;AACA,MAAA,SAAA,CAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,MAAA,GAAA,CAAA,YAAA,CAAA,SAAA,EAAA,CAAA,EAAA,CAAA;AACA;AAZA,GAzBA;AAuCA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,WAAA;AACA;AAHA;AAvCA,CAAA","sourcesContent":["<template>\n  <foreignObject class=\"panzoom-map-image\" :width=\"width\" :height=\"height\">\n    <canvas ref=\"mapImageRef\" />\n  </foreignObject>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\n\nconst { mapState: agvMapsState } = createNamespacedHelpers(\"agvMaps\");\n\nexport default {\n  name: \"AgvrMapImage\",\n  props: {\n    mapId: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data: () => ({\n    mapCanvas: null,\n    width: 0,\n    height: 0,\n  }),\n  computed: {\n    ...agvMapsState({\n      agvMapImage(state) {\n        let agvMap = state.find((m) => m.id === this.mapId);\n        return agvMap != null ? agvMap.webMap.Image : null;\n      },\n    }),\n  },\n  mounted() {\n    this.mapCanvas = this.$refs.mapImageRef;\n    this.setMapImage();\n  },\n  methods: {\n    setMapImage() {\n      let mapImage = this.agvMapImage;\n      if (mapImage == null) return;\n      this.width = mapImage.width;\n      this.height = mapImage.height;\n      this.mapCanvas.width = mapImage.width;\n      this.mapCanvas.height = mapImage.height;\n      let ctx = this.mapCanvas.getContext(\"2d\");\n      let imageData = ctx.createImageData(mapImage.width, mapImage.height);\n      imageData.data.set(mapImage.data);\n      ctx.putImageData(imageData, 0, 0);\n    },\n  },\n  watch: {\n    agvMapImage() {\n      this.setMapImage();\n    },\n  },\n};\n</script>\n<style scoped>\n.panzoom-map-image {\n  z-index: -1;\n  position: relative;\n}\n</style>"],"sourceRoot":"src/components/AgvrMapImage"}]}