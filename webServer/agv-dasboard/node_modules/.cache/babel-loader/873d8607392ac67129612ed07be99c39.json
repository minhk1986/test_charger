{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvs/mutations.js","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvs/mutations.js","mtime":1609217505410},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1602053618906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CgpmdW5jdGlvbiBDb252ZXJ0TWFwUG9zaXRpb25Ub1dlYlBvc2l0aW9uKG1hcFBvc2l0aW9uLCBtYXAsIHNjYWxlKSB7CiAgcmV0dXJuIHsKICAgIHg6ICgtbWFwLm9yaWdpbi5wb3NpdGlvbi54ICsgbWFwUG9zaXRpb24ueCkgLyBtYXAucmVzb2x1dGlvbiAqIHNjYWxlLAogICAgeTogKG1hcC5oZWlnaHQgKyAobWFwLm9yaWdpbi5wb3NpdGlvbi55IC0gbWFwUG9zaXRpb24ueSkgLyBtYXAucmVzb2x1dGlvbikgKiBzY2FsZSwKICAgIHo6IDAKICB9Owp9CgpleHBvcnQgZGVmYXVsdCB7CiAgc2V0Q29ubmVjdGlvblN0YXRlOiBmdW5jdGlvbiBzZXRDb25uZWN0aW9uU3RhdGUoc3RhdGUsIHBheWxvYWQpIHsKICAgIHZhciBhZ3YgPSBzdGF0ZS5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiBhLmlkID09PSBwYXlsb2FkLmFndklkOwogICAgfSk7CgogICAgaWYgKGFndiAhPSBudWxsKSB7CiAgICAgIGFndi5yb3NDb25udGVjdGlvblN0YXRlID0gcGF5bG9hZC5pc0Nvbm5lY3RlZDsKICAgIH0KICB9LAogIHNldFNpbTEwMDBQb3NlOiBmdW5jdGlvbiBzZXRTaW0xMDAwUG9zZShzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGFndiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGEpIHsKICAgICAgcmV0dXJuIGEuaWQgPT09IHBheWxvYWQuYWd2SWQ7CiAgICB9KTsKICAgIGlmIChhZ3YgPT0gbnVsbCkgcmV0dXJuOwogICAgYWd2LnNpbTEwMDBQb3NlID0gcGF5bG9hZC5wb3NlOyAvLyBpZiAocGF5bG9hZC5yb3NNYXAuaW5mby5oZWlnaHQgPT0gMCB8fCBwYXlsb2FkLnJvc01hcC5pbmZvLndpZHRoID09IDApIHJldHVybjsKICAgIC8vIGlmIChNYXRoLmFicyhhZ3Yuc2ltMTAwMFBvc2UucG9zZXggLSBwYXlsb2FkLnBvc2UucG9zZXgpIDwgMTAKICAgIC8vICAgJiYgTWF0aC5hYnMoYWd2LnNpbTEwMDBQb3NlLnBvc2V5IC0gcGF5bG9hZC5wb3NlLnBvc2V5KSA8IDEwCiAgICAvLyAgICYmIE1hdGguYWJzKGFndi5zaW0xMDAwUG9zZS5wb3NleWF3IC0gcGF5bG9hZC5wb3NlLnBvc2V5YXcpIDwgMTAwMCkgcmV0dXJuOwoKICAgIGFndi53ZWJQb3NlID0gewogICAgICBwb3NpdGlvbjogQ29udmVydE1hcFBvc2l0aW9uVG9XZWJQb3NpdGlvbih7CiAgICAgICAgeDogcGF5bG9hZC5wb3NlLnBvc2V4IC8gMTAwMCwKICAgICAgICB5OiBwYXlsb2FkLnBvc2UucG9zZXkgLyAxMDAwCiAgICAgIH0sIHBheWxvYWQucm9zTWFwLmluZm8sIHBheWxvYWQubWFwU2NhbGUpLAogICAgICBvcmllbnRhdGlvbjogewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICB6OiBwYXlsb2FkLnBvc2UucG9zZXlhdyAvIDEwMDAKICAgICAgfQogICAgfTsKICB9LAogIG1vdmVBZ3ZQb3NpdGlvbjogZnVuY3Rpb24gbW92ZUFndlBvc2l0aW9uKHN0YXRlLCBwYXlsb2FkKSB7CiAgICB2YXIgYWd2ID0gc3RhdGUuZmluZChmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gYS5pZCA9PT0gcGF5bG9hZC5hZ3ZJZDsKICAgIH0pOwoKICAgIGlmIChhZ3YgIT0gbnVsbCkgewogICAgICBhZ3Yud2ViUG9zZS5wb3NpdGlvbi54ICs9IHBheWxvYWQubW92ZW1lbnRYOwogICAgICBhZ3Yud2ViUG9zZS5wb3NpdGlvbi55ICs9IHBheWxvYWQubW92ZW1lbnRZOwogICAgfQogIH0sCiAgY2hhbmdlQWd2RGlyZWN0aW9uOiBmdW5jdGlvbiBjaGFuZ2VBZ3ZEaXJlY3Rpb24oc3RhdGUsIHBheWxvYWQpIHsKICAgIHZhciBhZ3YgPSBzdGF0ZS5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiBhLmlkID09PSBwYXlsb2FkLmFndklkOwogICAgfSk7CiAgICBpZiAoYWd2ID09IG51bGwpIHJldHVybjsKICAgIHZhciB0aGV0YSA9IE1hdGguYXRhbjIoYWd2LndlYlBvc2UucG9zaXRpb24ueSAtIHBheWxvYWQubW91c2UueSwgcGF5bG9hZC5tb3VzZS54IC0gYWd2LndlYlBvc2UucG9zaXRpb24ueCk7CiAgICBhZ3Yud2ViUG9zZS5vcmllbnRhdGlvbi56ID0gdGhldGEgKiAxODAgLyBNYXRoLlBJOwogIH0sCiAgc2V0QWd2RGlyZWN0aW9uOiBmdW5jdGlvbiBzZXRBZ3ZEaXJlY3Rpb24oc3RhdGUsIHBheWxvYWQpIHsKICAgIHZhciBhZ3YgPSBzdGF0ZS5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiBhLmlkID09PSBwYXlsb2FkLmFndklkOwogICAgfSk7CiAgICBpZiAoYWd2ID09IG51bGwpIHJldHVybjsKICAgIGFndi53ZWJQb3NlLm9yaWVudGF0aW9uID0gewogICAgICB4OiBwYXlsb2FkLngsCiAgICAgIHk6IHBheWxvYWQueSwKICAgICAgejogcGF5bG9hZC56CiAgICB9OwogIH0sCiAgc2V0QWd2UG9zaXRpb246IGZ1bmN0aW9uIHNldEFndlBvc2l0aW9uKHN0YXRlLCBwYXlsb2FkKSB7CiAgICB2YXIgYWd2ID0gc3RhdGUuZmluZChmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gYS5pZCA9PT0gcGF5bG9hZC5hZ3ZJZDsKICAgIH0pOwogICAgaWYgKGFndiA9PSBudWxsKSByZXR1cm47CiAgICBhZ3Yud2ViUG9zZS5wb3NpdGlvbiA9IHsKICAgICAgeDogcGF5bG9hZC54LAogICAgICB5OiBwYXlsb2FkLnksCiAgICAgIHo6IHBheWxvYWQuegogICAgfTsKICB9LAogIHNldEFndlN0YXR1czogZnVuY3Rpb24gc2V0QWd2U3RhdHVzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICB2YXIgYWd2ID0gc3RhdGUuZmluZChmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gYS5pZCA9PT0gcGF5bG9hZC5hZ3ZJZDsKICAgIH0pOwogICAgaWYgKGFndiA9PSBudWxsKSByZXR1cm47CiAgICBhZ3Yuc3RhdHVzRGV2aWNlcyA9IHBheWxvYWQuc3RhdHVzOyAvLyBpZihhZ3Yuc3RhdHVzRGV2aWNlU2VsZWN0ZWQubmFtZSAhPSBudWxsICYmIGFndi5zdGF0dXNEZXZpY2VTZWxlY3RlZC5uYW1lICE9ICcnKSB7CiAgICAvLyB9CiAgfSwKICBzZXRBZ3ZUYXNrOiBmdW5jdGlvbiBzZXRBZ3ZUYXNrKHN0YXRlLCBwYXlsb2FkKSB7CiAgICB2YXIgYWd2ID0gc3RhdGUuZmluZChmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gYS5pZCA9PT0gcGF5bG9hZC5hZ3ZJZDsKICAgIH0pOwogICAgaWYgKGFndiA9PSBudWxsKSByZXR1cm47CiAgICBhZ3YudGFza0lkID0gcGF5bG9hZC50YXNrSWQ7CiAgfSwKICBzZXRSdW5uaW5nU3RhdGU6IGZ1bmN0aW9uIHNldFJ1bm5pbmdTdGF0ZShzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGFndiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGEpIHsKICAgICAgcmV0dXJuIGEuaWQgPT09IHBheWxvYWQuYWd2SWQ7CiAgICB9KTsKICAgIGlmIChhZ3YgPT0gbnVsbCkgcmV0dXJuOwogICAgYWd2LmlzUnVubmdpbmcgPSBwYXlsb2FkLmlzUnVubmdpbmc7CiAgfQp9Ow=="},{"version":3,"sources":["/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvs/mutations.js"],"names":["ConvertMapPositionToWebPosition","mapPosition","map","scale","x","origin","position","resolution","y","height","z","setConnectionState","state","payload","agv","find","a","id","agvId","rosConntectionState","isConnected","setSim1000Pose","sim1000Pose","pose","webPose","posex","posey","rosMap","info","mapScale","orientation","poseyaw","moveAgvPosition","movementX","movementY","changeAgvDirection","theta","Math","atan2","mouse","PI","setAgvDirection","setAgvPosition","setAgvStatus","statusDevices","status","setAgvTask","taskId","setRunningState","isRunnging"],"mappings":"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","sourcesContent":["function ConvertMapPositionToWebPosition(mapPosition, map, scale) {\n  return {\n    x: (- map.origin.position.x + mapPosition.x) / map.resolution * scale,\n    y: (map.height + (map.origin.position.y - mapPosition.y) / map.resolution) * scale,\n    z: 0,\n  }\n}\n\nexport default {\n  setConnectionState(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv != null) {\n      agv.rosConntectionState = payload.isConnected;\n    }\n  },\n  setSim1000Pose(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n\n    agv.sim1000Pose = payload.pose;\n\n    // if (payload.rosMap.info.height == 0 || payload.rosMap.info.width == 0) return;\n\n    // if (Math.abs(agv.sim1000Pose.posex - payload.pose.posex) < 10\n    //   && Math.abs(agv.sim1000Pose.posey - payload.pose.posey) < 10\n    //   && Math.abs(agv.sim1000Pose.poseyaw - payload.pose.poseyaw) < 1000) return;\n\n    \n    agv.webPose = {\n      position: ConvertMapPositionToWebPosition({\n        x: payload.pose.posex / 1000,\n        y: payload.pose.posey / 1000,\n      }, payload.rosMap.info, payload.mapScale),\n      orientation: {\n        x: 0,\n        y: 0,\n        z: payload.pose.poseyaw / 1000,\n      },\n    }\n  },\n  moveAgvPosition(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv != null) {\n      agv.webPose.position.x += payload.movementX;\n      agv.webPose.position.y += payload.movementY;\n    }\n  },\n  changeAgvDirection(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n    let theta = Math.atan2(agv.webPose.position.y - payload.mouse.y, payload.mouse.x - agv.webPose.position.x);\n    agv.webPose.orientation.z = theta * 180 / Math.PI;\n  },\n  setAgvDirection(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n\n    agv.webPose.orientation = {\n      x: payload.x,\n      y: payload.y,\n      z: payload.z,\n    };\n  },\n  setAgvPosition(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n\n    agv.webPose.position = {\n      x: payload.x,\n      y: payload.y,\n      z: payload.z,\n    };\n  },\n  setAgvStatus(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n\n    agv.statusDevices = payload.status;\n    // if(agv.statusDeviceSelected.name != null && agv.statusDeviceSelected.name != '') {\n\n    // }\n  },\n  setAgvTask(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n\n    agv.taskId = payload.taskId;\n  },\n  setRunningState(state, payload) {\n    let agv = state.find((a) => a.id === payload.agvId);\n    if (agv == null) return;\n\n    agv.isRunnging = payload.isRunnging;\n  },\n}\n"]}]}