{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js!/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/AgvrMapImage/AgvrMapImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/AgvrMapImage/AgvrMapImage.vue","mtime":1609149480464},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js","mtime":1602053610301},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3JvYm90aWNzL0FuaE5WL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7Cgp2YXIgX2NyZWF0ZU5hbWVzcGFjZWRIZWxwID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoImFndk1hcHMiKSwKICAgIGFndk1hcHNTdGF0ZSA9IF9jcmVhdGVOYW1lc3BhY2VkSGVscC5tYXBTdGF0ZTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWd2ck1hcEltYWdlIiwKICBwcm9wczogewogICAgbWFwSWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1hcENhbnZhczogbnVsbCwKICAgICAgd2lkdGg6IDAsCiAgICAgIGhlaWdodDogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBhZ3ZNYXBzU3RhdGUoewogICAgYWd2TWFwSW1hZ2U6IGZ1bmN0aW9uIGFndk1hcEltYWdlKHN0YXRlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgYWd2TWFwID0gc3RhdGUuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBtLmlkID09PSBfdGhpcy5tYXBJZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBhZ3ZNYXAgIT0gbnVsbCA/IGFndk1hcC53ZWJNYXAuSW1hZ2UgOiBudWxsOwogICAgfQogIH0pKSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5tYXBDYW52YXMgPSB0aGlzLiRyZWZzLm1hcEltYWdlUmVmOwogICAgdGhpcy5zZXRNYXBJbWFnZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgc2V0TWFwSW1hZ2U6IGZ1bmN0aW9uIHNldE1hcEltYWdlKCkgewogICAgICB2YXIgbWFwSW1hZ2UgPSB0aGlzLmFndk1hcEltYWdlOwogICAgICBpZiAobWFwSW1hZ2UgPT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLndpZHRoID0gbWFwSW1hZ2Uud2lkdGg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gbWFwSW1hZ2UuaGVpZ2h0OwogICAgICB0aGlzLm1hcENhbnZhcy53aWR0aCA9IG1hcEltYWdlLndpZHRoOwogICAgICB0aGlzLm1hcENhbnZhcy5oZWlnaHQgPSBtYXBJbWFnZS5oZWlnaHQ7CiAgICAgIHZhciBjdHggPSB0aGlzLm1hcENhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICB2YXIgaW1hZ2VEYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YShtYXBJbWFnZS53aWR0aCwgbWFwSW1hZ2UuaGVpZ2h0KTsKICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KG1hcEltYWdlLmRhdGEpOwogICAgICBjdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgYWd2TWFwSW1hZ2U6IGZ1bmN0aW9uIGFndk1hcEltYWdlKCkgewogICAgICB0aGlzLnNldE1hcEltYWdlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["AgvrMapImage.vue"],"names":[],"mappings":";;;;;;;;AAOA,SAAA,uBAAA,QAAA,MAAA;;4BAEA,uBAAA,CAAA,SAAA,C;IAAA,Y,yBAAA,Q;;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,CAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAAA,GARA;AAaA,EAAA,QAAA,oBACA,YAAA,CAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AAAA;;AACA,UAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,KAAA;AAAA,OAAA,CAAA;AACA,aAAA,MAAA,IAAA,IAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA;AAJA,GAAA,CADA,CAbA;AAqBA,EAAA,OArBA,qBAqBA;AACA,SAAA,SAAA,GAAA,KAAA,KAAA,CAAA,WAAA;AACA,SAAA,WAAA;AACA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,UAAA,QAAA,GAAA,KAAA,WAAA;AACA,UAAA,QAAA,IAAA,IAAA,EAAA;AACA,WAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,WAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,WAAA,SAAA,CAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,WAAA,SAAA,CAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,UAAA,GAAA,GAAA,KAAA,SAAA,CAAA,UAAA,CAAA,IAAA,CAAA;AACA,UAAA,SAAA,GAAA,GAAA,CAAA,eAAA,CAAA,QAAA,CAAA,KAAA,EAAA,QAAA,CAAA,MAAA,CAAA;AACA,MAAA,SAAA,CAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,MAAA,GAAA,CAAA,YAAA,CAAA,SAAA,EAAA,CAAA,EAAA,CAAA;AACA;AAZA,GAzBA;AAuCA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,WAAA;AACA;AAHA;AAvCA,CAAA","sourcesContent":["<template>\n  <foreignObject class=\"panzoom-map-image\" :width=\"width\" :height=\"height\">\n    <canvas ref=\"mapImageRef\" />\n  </foreignObject>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\n\nconst { mapState: agvMapsState } = createNamespacedHelpers(\"agvMaps\");\n\nexport default {\n  name: \"AgvrMapImage\",\n  props: {\n    mapId: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data: () => ({\n    mapCanvas: null,\n    width: 0,\n    height: 0,\n  }),\n  computed: {\n    ...agvMapsState({\n      agvMapImage(state) {\n        let agvMap = state.find((m) => m.id === this.mapId);\n        return agvMap != null ? agvMap.webMap.Image : null;\n      },\n    }),\n  },\n  mounted() {\n    this.mapCanvas = this.$refs.mapImageRef;\n    this.setMapImage();\n  },\n  methods: {\n    setMapImage() {\n      let mapImage = this.agvMapImage;\n      if (mapImage == null) return;\n      this.width = mapImage.width;\n      this.height = mapImage.height;\n      this.mapCanvas.width = mapImage.width;\n      this.mapCanvas.height = mapImage.height;\n      let ctx = this.mapCanvas.getContext(\"2d\");\n      let imageData = ctx.createImageData(mapImage.width, mapImage.height);\n      imageData.data.set(mapImage.data);\n      ctx.putImageData(imageData, 0, 0);\n    },\n  },\n  watch: {\n    agvMapImage() {\n      this.setMapImage();\n    },\n  },\n};\n</script>\n<style scoped>\n.panzoom-map-image {\n  z-index: -1;\n  position: relative;\n}\n</style>"],"sourceRoot":"src/components/AgvrMapImage"}]}