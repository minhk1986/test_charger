{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js!/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/AgvrEndTaskDirection/AgvrEndTaskDirection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/AgvrEndTaskDirection/AgvrEndTaskDirection.vue","mtime":1609149480232},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js","mtime":1602053610301},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3JvYm90aWNzL0FuaE5WL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7Cgp2YXIgX2NyZWF0ZU5hbWVzcGFjZWRIZWxwID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoImFndkpvYnMiKSwKICAgIGFndkpvYnNNYXBTdGF0ZSA9IF9jcmVhdGVOYW1lc3BhY2VkSGVscC5tYXBTdGF0ZTsKCnZhciBfY3JlYXRlTmFtZXNwYWNlZEhlbHAyID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoIm5hdmlnYXRpb24iKSwKICAgIG5hdmlnYXRpb25NYXBTdGF0ZSA9IF9jcmVhdGVOYW1lc3BhY2VkSGVscDIubWFwU3RhdGUsCiAgICBuYXZpZ2F0aW9uTWFwQWN0aW9ucyA9IF9jcmVhdGVOYW1lc3BhY2VkSGVscDIubWFwQWN0aW9uczsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWd2ckVuZFRhc2tEaXJlY3Rpb24iLAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG5hdmlnYXRpb25NYXBTdGF0ZSh7CiAgICBuYXZpZ2F0aW9uSm9iSWQ6IGZ1bmN0aW9uIG5hdmlnYXRpb25Kb2JJZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuam9iSWQ7CiAgICB9LAogICAgbmF2aWdhdGlvblRhc2tJZDogZnVuY3Rpb24gbmF2aWdhdGlvblRhc2tJZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudGFza0lkOwogICAgfSwKICAgIGlzQ29udGV4dE1lbnVTaG93OiBmdW5jdGlvbiBpc0NvbnRleHRNZW51U2hvdyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudGFza01lbnVDb250ZXh0LmlzU2hvdyB8fCBzdGF0ZS5hZ3ZNZW51Q29udGV4dC5pc1Nob3cgfHwgc3RhdGUuYWd2SW5pdFBvc2VNZW51Q29udGV4dC5pc1Nob3c7CiAgICB9CiAgfSkpLCBhZ3ZKb2JzTWFwU3RhdGUoewogICAgYWd2VGFzazogZnVuY3Rpb24gYWd2VGFzayhzdGF0ZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgICByZXR1cm4gai5pZCA9PT0gX3RoaXMubmF2aWdhdGlvbkpvYklkOwogICAgICB9KTsKICAgICAgaWYgKGpvYiA9PSBudWxsIHx8IGpvYi50YXNrcy5sZW5ndGggPT0gMCkgcmV0dXJuIHsKICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgeDogMCwKICAgICAgICAgIHk6IDAsCiAgICAgICAgICB6OiAwCiAgICAgICAgfSwKICAgICAgICB0aGV0YUVuZDogMCwKICAgICAgICBoaWRkZW46IHRydWUKICAgICAgfTsKICAgICAgdmFyIHRhc2sgPSBqb2IudGFza3MuZmluZChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0LmlkID09PSBfdGhpcy5uYXZpZ2F0aW9uVGFza0lkOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRhc2sgIT0gbnVsbCA/IHRhc2sgOiB7CiAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwLAogICAgICAgICAgejogMAogICAgICAgIH0sCiAgICAgICAgdGhldGFFbmQ6IDAsCiAgICAgICAgaGlkZGVuOiB0cnVlCiAgICAgIH07CiAgICB9CiAgfSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbmF2aWdhdGlvbk1hcEFjdGlvbnMoewogICAgbmF2aWdhdGlvbkRpc2FibGVNYXBQYW5ab29tOiAiZGlzYWJsZU1hcFBhblpvb20iLAogICAgbmF2aWdhdGlvblNlbGVjdGVkVGFza1RoZXRhRW5kOiAic2VsZWN0ZWRUYXNrVGhldGFFbmQiCiAgfSkpLCB7fSwgewogICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKCkgewogICAgICBpZiAodGhpcy5pc0NvbnRleHRNZW51U2hvdykgcmV0dXJuOwogICAgICB0aGlzLm5hdmlnYXRpb25EaXNhYmxlTWFwUGFuWm9vbSgpOwogICAgICB0aGlzLm5hdmlnYXRpb25TZWxlY3RlZFRhc2tUaGV0YUVuZCgpOwogICAgfQogIH0pCn07"},{"version":3,"sources":["AgvrEndTaskDirection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,SAAA,uBAAA,QAAA,MAAA;;4BACA,uBAAA,CAAA,SAAA,C;IAAA,e,yBAAA,Q;;6BAIA,uBAAA,CAAA,YAAA,C;IAFA,kB,0BAAA,Q;IACA,oB,0BAAA,U;;AAGA,eAAA;AACA,EAAA,IAAA,EAAA,sBADA;AAEA,EAAA,QAAA,kCACA,kBAAA,CAAA;AACA,IAAA,eAAA,EAAA,yBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,KAAA;AAAA,KADA;AAEA,IAAA,gBAAA,EAAA,0BAAA,KAAA;AAAA,aAAA,KAAA,CAAA,MAAA;AAAA,KAFA;AAGA,IAAA,iBAAA,EAAA,2BAAA,KAAA;AAAA,aACA,KAAA,CAAA,eAAA,CAAA,MAAA,IACA,KAAA,CAAA,cAAA,CAAA,MADA,IAEA,KAAA,CAAA,sBAAA,CAAA,MAHA;AAAA;AAHA,GAAA,CADA,GASA,eAAA,CAAA;AACA,IAAA,OADA,mBACA,KADA,EACA;AAAA;;AACA,UAAA,GAAA,GAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,eAAA;AAAA,OAAA,CAAA;AACA,UAAA,GAAA,IAAA,IAAA,IAAA,GAAA,CAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EACA,OAAA;AAAA,QAAA,QAAA,EAAA;AAAA,UAAA,CAAA,EAAA,CAAA;AAAA,UAAA,CAAA,EAAA,CAAA;AAAA,UAAA,CAAA,EAAA;AAAA,SAAA;AAAA,QAAA,QAAA,EAAA,CAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA;AAEA,UAAA,IAAA,GAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,gBAAA;AAAA,OAAA,CAAA;AACA,aAAA,IAAA,IAAA,IAAA,GAAA,IAAA,GAAA;AAAA,QAAA,QAAA,EAAA;AAAA,UAAA,CAAA,EAAA,CAAA;AAAA,UAAA,CAAA,EAAA,CAAA;AAAA,UAAA,CAAA,EAAA;AAAA,SAAA;AAAA,QAAA,QAAA,EAAA,CAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA;AACA;AARA,GAAA,CATA,CAFA;AAuBA,EAAA,OAAA,kCACA,oBAAA,CAAA;AACA,IAAA,2BAAA,EAAA,mBADA;AAEA,IAAA,8BAAA,EAAA;AAFA,GAAA,CADA;AAKA,IAAA,WALA,yBAKA;AACA,UAAA,KAAA,iBAAA,EAAA;AACA,WAAA,2BAAA;AACA,WAAA,8BAAA;AACA;AATA;AAvBA,CAAA","sourcesContent":["<template>\n  <g :visibility=\"agvTask.hidden ? 'hidden' : 'visible'\">\n    <defs>\n      <marker\n        id=\"arrowhead\"\n        markerWidth=\"3\"\n        markerHeight=\"2\"\n        refX=\"1\"\n        refY=\"1\"\n        orient=\"auto\"\n      >\n        <polygon points=\"0 0, 3 1, 0 2\" style=\"fill: limegreen\" />\n      </marker>\n    </defs>\n    <line\n      :x1=\"agvTask.position.x\"\n      :y1=\"agvTask.position.y\"\n      :x2=\"\n        agvTask.position.x + 50 * Math.cos((agvTask.thetaEnd * Math.PI) / 180)\n      \"\n      :y2=\"\n        agvTask.position.y - 50 * Math.sin((agvTask.thetaEnd * Math.PI) / 180)\n      \"\n      stroke=\"limegreen\"\n      stroke-width=\"10\"\n      marker-end=\"url(#arrowhead)\"\n      @mousedown=\"onMouseDown\"\n      @touchstart=\"onMouseDown\"\n    />\n  </g>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\nconst { mapState: agvJobsMapState } = createNamespacedHelpers(\"agvJobs\");\nconst {\n  mapState: navigationMapState,\n  mapActions: navigationMapActions,\n} = createNamespacedHelpers(\"navigation\");\n\nexport default {\n  name: \"AgvrEndTaskDirection\",\n  computed: {\n    ...navigationMapState({\n      navigationJobId: (state) => state.jobId,\n      navigationTaskId: (state) => state.taskId,\n      isContextMenuShow: (state) =>\n        state.taskMenuContext.isShow ||\n        state.agvMenuContext.isShow ||\n        state.agvInitPoseMenuContext.isShow,\n    }),\n    ...agvJobsMapState({\n      agvTask(state) {\n        let job = state.find((j) => j.id === this.navigationJobId);\n        if (job == null || job.tasks.length == 0)\n          return { position: { x: 0, y: 0, z: 0 }, thetaEnd: 0, hidden: true };\n\n        let task = job.tasks.find((t) => t.id === this.navigationTaskId);\n        return task != null ? task : { position: { x: 0, y: 0, z: 0 }, thetaEnd: 0, hidden: true };\n      },\n    }),\n    \n  },\n  methods: {\n    ...navigationMapActions({\n      navigationDisableMapPanZoom: \"disableMapPanZoom\",\n      navigationSelectedTaskThetaEnd: \"selectedTaskThetaEnd\",\n    }),\n    onMouseDown() {\n      if (this.isContextMenuShow) return;\n      this.navigationDisableMapPanZoom();\n      this.navigationSelectedTaskThetaEnd();\n    },\n  },\n};\n</script>"],"sourceRoot":"src/components/AgvrEndTaskDirection"}]}