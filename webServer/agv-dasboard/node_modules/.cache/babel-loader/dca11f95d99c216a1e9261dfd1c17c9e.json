{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js!/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/AnhNV/agv-dasboard/src/services/agvr/agvr-sim1000-pose.js","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/services/agvr/agvr-sim1000-pose.js","mtime":1609149483276},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js","mtime":1602053610301},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1602053618906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL3JvYm90aWNzL0FuaE5WL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL3JvYm90aWNzL0FuaE5WL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IGZyb20gIi9ob21lL3JvYm90aWNzL0FuaE5WL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NQcml2YXRlRmllbGRHZXQiOwppbXBvcnQgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IGZyb20gIi9ob21lL3JvYm90aWNzL0FuaE5WL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NQcml2YXRlRmllbGRTZXQiOwppbXBvcnQgUk9TTElCIGZyb20gInJvc2xpYiI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKCnZhciBfaWQgPSBuZXcgV2Vha01hcCgpOwoKdmFyIF9tYXAgPSBuZXcgV2Vha01hcCgpOwoKdmFyIF9yb3NTdG9yZSA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX3NpbVBvc2VUb3BpYyA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX29uU2ltUG9zZVJlY2VpdmVkID0gbmV3IFdlYWtNYXAoKTsKCnZhciBBZ3ZyU2ltMTAwMFBvc2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFndnJTaW0xMDAwUG9zZShyb3MsIGlkLCBtYXBJZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWd2clNpbTEwMDBQb3NlKTsKCiAgICBfaWQuc2V0KHRoaXMsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiBudWxsCiAgICB9KTsKCiAgICBfbWFwLnNldCh0aGlzLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogbnVsbAogICAgfSk7CgogICAgX3Jvc1N0b3JlLnNldCh0aGlzLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogbnVsbAogICAgfSk7CgogICAgX3NpbVBvc2VUb3BpYy5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0pOwoKICAgIF9vblNpbVBvc2VSZWNlaXZlZC5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG1lc3NhZ2UpIHsKICAgICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzLCBfcm9zU3RvcmUpLnN0YXRlLm5hdmlnYXRpb24uc3Vic2NyaWJlUG9zZSkgewogICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzLCBfcm9zU3RvcmUpLmNvbW1pdCgiYWd2cy9zZXRTaW0xMDAwUG9zZSIsIHsKICAgICAgICAgICAgcG9zZTogbWVzc2FnZS50ZWxlZ3JhbV9wYXlsb2FkLAogICAgICAgICAgICBhZ3ZJZDogX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzLCBfaWQpLAogICAgICAgICAgICByb3NNYXA6IF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpcywgX21hcCkucm9zTWFwLAogICAgICAgICAgICBtYXBTY2FsZTogX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzLCBfbWFwKS53ZWJNYXAuc2NhbGUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgaWYgKCEocm9zIGluc3RhbmNlb2YgUk9TTElCLlJvcykpIHJldHVybjsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX3Jvc1N0b3JlLCBWdWUucHJvdG90eXBlLiRzdG9yZSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9pZCwgaWQpOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfbWFwLCBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Jvc1N0b3JlKS5zdGF0ZS5hZ3ZNYXBzLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgcmV0dXJuIG0uaWQgPT09IG1hcElkOwogICAgfSkpOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfc2ltUG9zZVRvcGljLCBuZXcgUk9TTElCLlRvcGljKHsKICAgICAgcm9zOiByb3MsCiAgICAgIG5hbWU6ICIvc2lja19saWRhcl9sb2NhbGl6YXRpb24vZHJpdmVyL3Jlc3VsdF90ZWxlZ3JhbXMiLAogICAgICBtZXNzYWdlVHlwZTogInNpY2tfbGlkYXJfbG9jYWxpemF0aW9uL1NpY2tMb2NSZXN1bHRQb3J0VGVsZWdyYW1Nc2ciCiAgICB9KSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9zaW1Qb3NlVG9waWMpLnN1YnNjcmliZShfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX29uU2ltUG9zZVJlY2VpdmVkKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQWd2clNpbTEwMDBQb3NlLCBbewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfc2ltUG9zZVRvcGljKSAhPSBudWxsKSB7CiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9zaW1Qb3NlVG9waWMpLnVuc3Vic2NyaWJlKCk7CgogICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfc2ltUG9zZVRvcGljLCBudWxsKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFndnJTaW0xMDAwUG9zZTsKfSgpOwoKZXhwb3J0IHsgQWd2clNpbTEwMDBQb3NlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/robotics/AnhNV/agv-dasboard/src/services/agvr/agvr-sim1000-pose.js"],"names":["ROSLIB","Vue","AgvrSim1000Pose","ros","id","mapId","message","state","navigation","subscribePose","commit","pose","telegram_payload","agvId","rosMap","mapScale","webMap","scale","Ros","prototype","$store","agvMaps","find","m","Topic","name","messageType","subscribe","unsubscribe"],"mappings":";;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,KAAhB;;;;;;;;;;;;IAEqBC,e;AAMnB,2BAAYC,GAAZ,EAAiBC,EAAjB,EAAqBC,KAArB,EAA4B;AAAA;;AAAA;;AAAA;AAAA;AAAA,aALtB;AAKsB;;AAAA;AAAA;AAAA,aAJrB;AAIqB;;AAAA;AAAA;AAAA,aAHhB;AAGgB;;AAAA;AAAA;AAAA,aAFZ;AAEY;;AAAA;AAAA;AAAA,aAoBP,eAACC,OAAD,EAAa;AAChC,YAAI,sBAAA,KAAI,YAAJ,CAAeC,KAAf,CAAqBC,UAArB,CAAgCC,aAApC,EAAmD;AACjD,gCAAA,KAAI,YAAJ,CAAeC,MAAf,CAAsB,qBAAtB,EAA6C;AAC3CC,YAAAA,IAAI,EAAEL,OAAO,CAACM,gBAD6B;AAE3CC,YAAAA,KAAK,wBAAE,KAAF,MAFsC;AAG3CC,YAAAA,MAAM,EAAE,sBAAA,KAAI,OAAJ,CAAUA,MAHyB;AAI3CC,YAAAA,QAAQ,EAAE,sBAAA,KAAI,OAAJ,CAAUC,MAAV,CAAiBC;AAJgB,WAA7C;AAMD;AACF;AA7B2B;;AAC1B,QAAI,EAAEd,GAAG,YAAYH,MAAM,CAACkB,GAAxB,CAAJ,EAAkC;;AAElC,2CAAiBjB,GAAG,CAACkB,SAAJ,CAAcC,MAA/B;;AACA,qCAAWhB,EAAX;;AACA,sCAAY,uCAAeG,KAAf,CAAqBc,OAArB,CAA6BC,IAA7B,CAAkC,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACnB,EAAF,KAASC,KAAhB;AAAA,KAAlC,CAAZ;;AACA,+CAAqB,IAAIL,MAAM,CAACwB,KAAX,CAAiB;AACpCrB,MAAAA,GAAG,EAAEA,GAD+B;AAEpCsB,MAAAA,IAAI,EAAE,kDAF8B;AAGpCC,MAAAA,WAAW,EAAE;AAHuB,KAAjB,CAArB;;AAKA,+CAAmBC,SAAnB,uBAA6B,IAA7B;AACD;;;;8BAES;AACR,UAAI,8CAAsB,IAA1B,EAAgC;AAC9B,mDAAmBC,WAAnB;;AACA,mDAAqB,IAArB;AACD;AACF;;;;;;SAzBkB1B,e","sourcesContent":["import ROSLIB from \"roslib\";\nimport Vue from \"vue\";\n\nexport default class AgvrSim1000Pose {\n  #id = null;\n  #map = null;\n  #rosStore = null;\n  #simPoseTopic = null;\n\n  constructor(ros, id, mapId) {\n    if (!(ros instanceof ROSLIB.Ros)) return;\n\n    this.#rosStore = Vue.prototype.$store;\n    this.#id = id;\n    this.#map = this.#rosStore.state.agvMaps.find((m) => m.id === mapId);\n    this.#simPoseTopic = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/sick_lidar_localization/driver/result_telegrams\",\n      messageType: \"sick_lidar_localization/SickLocResultPortTelegramMsg\",\n    });\n    this.#simPoseTopic.subscribe(this.#onSimPoseReceived);\n  }\n\n  dispose() {\n    if (this.#simPoseTopic != null) {\n      this.#simPoseTopic.unsubscribe();\n      this.#simPoseTopic = null;\n    }\n  }\n  #onSimPoseReceived = (message) => {\n    if (this.#rosStore.state.navigation.subscribePose) {\n      this.#rosStore.commit(\"agvs/setSim1000Pose\", {\n        pose: message.telegram_payload,\n        agvId: this.#id,\n        rosMap: this.#map.rosMap,\n        mapScale: this.#map.webMap.scale,\n      })\n    }\n  }\n}"]}]}