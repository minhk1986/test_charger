{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvJobs/mutations.js","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvJobs/mutations.js","mtime":1609149483704},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1602053618906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgeyB1dWlkIH0gZnJvbSAidnVlLXV1aWQiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHVzaFRhc2tUb0pvYjogZnVuY3Rpb24gcHVzaFRhc2tUb0pvYihzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdmFyIHRoZXRhID0gMDsKCiAgICBpZiAoam9iLnRhc2tzLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIGxhc3RQb2ludCA9IGpvYi50YXNrc1tqb2IudGFza3MubGVuZ3RoIC0gMV0ucG9zaXRpb247CiAgICAgIHRoZXRhID0gTWF0aC5hdGFuMihsYXN0UG9pbnQueSAtIHBheWxvYWQueSwgcGF5bG9hZC54IC0gbGFzdFBvaW50LngpICogMTgwIC8gTWF0aC5QSTsKICAgIH0KCiAgICB2YXIgaWQgPSB1dWlkLnY0KCk7CgogICAgd2hpbGUgKGlkIGluIGpvYi50YXNrcykgewogICAgICBpZCA9IHV1aWQudjQoKTsKICAgIH0KCiAgICBqb2IudGFza3MucHVzaCh7CiAgICAgIGlkOiBpZCwKICAgICAgcG9zaXRpb246IHsKICAgICAgICB4OiBwYXlsb2FkLngsCiAgICAgICAgeTogcGF5bG9hZC55LAogICAgICAgIHo6IDAKICAgICAgfSwKICAgICAgdGhldGFFbmQ6IHRoZXRhLAogICAgICBhY3Rpb25zOiBbXQogICAgfSk7CiAgfSwKICBtb3ZlVGFza1Bvc2l0aW9uOiBmdW5jdGlvbiBtb3ZlVGFza1Bvc2l0aW9uKHN0YXRlLCBwYXlsb2FkKSB7CiAgICBpZiAoaXNOYU4ocGF5bG9hZC5tb3ZlbWVudFgpIHx8IGlzTmFOKHBheWxvYWQubW92ZW1lbnRZKSkgcmV0dXJuOwogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdmFyIHRhc2sgPSBqb2IudGFza3MuZmluZChmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdC5pZCA9PT0gcGF5bG9hZC50YXNrSWQ7CiAgICB9KTsKICAgIGlmICh0YXNrID09IG51bGwpIHJldHVybjsKICAgIHZhciBuZXdQb3NpdGlvbiA9IHsKICAgICAgeDogdGFzay5wb3NpdGlvbi54ICsgcGF5bG9hZC5tb3ZlbWVudFgsCiAgICAgIHk6IHRhc2sucG9zaXRpb24ueSArIHBheWxvYWQubW92ZW1lbnRZCiAgICB9OwoKICAgIGlmIChwYXlsb2FkLnNtYXJ0UG9pbnRzICYmIHBheWxvYWQuc21hcnRQb2ludHMubGVuZ3RoID4gMCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBheWxvYWQuc21hcnRQb2ludHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoTWF0aC5zcXJ0KE1hdGgucG93KHBheWxvYWQuc21hcnRQb2ludHNbaV0ueCAtIG5ld1Bvc2l0aW9uLngsIDIpICsgTWF0aC5wb3cocGF5bG9hZC5zbWFydFBvaW50c1tpXS55IC0gbmV3UG9zaXRpb24ueSwgMikpIDwgMTUpIHsKICAgICAgICAgIG5ld1Bvc2l0aW9uID0gewogICAgICAgICAgICB4OiBwYXlsb2FkLnNtYXJ0UG9pbnRzW2ldLngsCiAgICAgICAgICAgIHk6IHBheWxvYWQuc21hcnRQb2ludHNbaV0ueQogICAgICAgICAgfTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHRhc2sucG9zaXRpb24gPSBuZXdQb3NpdGlvbjsKICB9LAogIHNldFRoZXRhRW5kT2ZUYXNrOiBmdW5jdGlvbiBzZXRUaGV0YUVuZE9mVGFzayhzdGF0ZSwgcGF5bG9hZCkgewogICAgaWYgKGlzTmFOKHBheWxvYWQubW91c2UueCkgfHwgaXNOYU4ocGF5bG9hZC5tb3VzZS55KSkgcmV0dXJuOwogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdmFyIHRhc2sgPSBqb2IudGFza3MuZmluZChmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdC5pZCA9PT0gcGF5bG9hZC50YXNrSWQ7CiAgICB9KTsKICAgIGlmICh0YXNrID09IG51bGwpIHJldHVybjsKICAgIHZhciB0aGV0YSA9IE1hdGguYXRhbjIodGFzay5wb3NpdGlvbi55IC0gcGF5bG9hZC5tb3VzZS55LCBwYXlsb2FkLm1vdXNlLnggLSB0YXNrLnBvc2l0aW9uLngpOwogICAgdGFzay50aGV0YUVuZCA9IHRoZXRhICogMTgwIC8gTWF0aC5QSTsKICB9LAogIGluc2VydFRhc2tBZnRlclRvSm9iOiBmdW5jdGlvbiBpbnNlcnRUYXNrQWZ0ZXJUb0pvYihzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdmFyIHRhc2tJbmRleCA9IGpvYi50YXNrcy5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIHQuaWQgPT09IHBheWxvYWQudGFza0lkOwogICAgfSk7CiAgICBpZiAodGFza0luZGV4IDwgMCB8fCB0YXNrSW5kZXggPj0gam9iLnRhc2tzLmxlbmd0aCAtIDEpIHJldHVybjsKICAgIHZhciBwb2ludCA9IHsKICAgICAgeDogKGpvYi50YXNrc1t0YXNrSW5kZXhdLnBvc2l0aW9uLnggKyBqb2IudGFza3NbdGFza0luZGV4ICsgMV0ucG9zaXRpb24ueCkgLyAyLAogICAgICB5OiAoam9iLnRhc2tzW3Rhc2tJbmRleF0ucG9zaXRpb24ueSArIGpvYi50YXNrc1t0YXNrSW5kZXggKyAxXS5wb3NpdGlvbi55KSAvIDIKICAgIH07CiAgICB2YXIgbGFzdFBvaW50ID0gam9iLnRhc2tzW3Rhc2tJbmRleF0ucG9zaXRpb247CiAgICBqb2IudGFza3Muc3BsaWNlKHRhc2tJbmRleCArIDEsIDAsIHsKICAgICAgaWQ6IHV1aWQudjQoKSwKICAgICAgcG9zaXRpb246IHsKICAgICAgICB4OiBwb2ludC54LAogICAgICAgIHk6IHBvaW50LnksCiAgICAgICAgejogMAogICAgICB9LAogICAgICB0aGV0YUVuZDogTWF0aC5hdGFuMihsYXN0UG9pbnQueSAtIHBvaW50LnksIHBvaW50LnggLSBsYXN0UG9pbnQueCkgKiAxODAgLyBNYXRoLlBJLAogICAgICBhY3Rpb25zOiBbXQogICAgfSk7CiAgfSwKICBpbnNlcnRUYXNrQmVmb3JlVG9Kb2I6IGZ1bmN0aW9uIGluc2VydFRhc2tCZWZvcmVUb0pvYihzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdmFyIHRhc2tJbmRleCA9IGpvYi50YXNrcy5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIHQuaWQgPT09IHBheWxvYWQudGFza0lkOwogICAgfSk7CiAgICBpZiAodGFza0luZGV4ID49IGpvYi50YXNrcy5sZW5ndGggLSAxKSByZXR1cm47CiAgICB2YXIgbGFzdFBvaW50ID0gbnVsbDsKCiAgICBpZiAodGFza0luZGV4ID09IDApIHsKICAgICAgbGFzdFBvaW50ID0gcGF5bG9hZC5hZ3ZQb3NpdGlvbjsKICAgIH0gZWxzZSB7CiAgICAgIGxhc3RQb2ludCA9IGpvYi50YXNrc1t0YXNrSW5kZXggLSAxXS5wb3NpdGlvbjsKICAgIH0KCiAgICB2YXIgcG9pbnQgPSB7CiAgICAgIHg6IChsYXN0UG9pbnQueCArIGpvYi50YXNrc1t0YXNrSW5kZXhdLnBvc2l0aW9uLngpIC8gMiwKICAgICAgeTogKGxhc3RQb2ludC55ICsgam9iLnRhc2tzW3Rhc2tJbmRleF0ucG9zaXRpb24ueSkgLyAyCiAgICB9OwogICAgam9iLnRhc2tzLnNwbGljZSh0YXNrSW5kZXgsIDAsIHsKICAgICAgaWQ6IHV1aWQudjQoKSwKICAgICAgcG9zaXRpb246IHsKICAgICAgICB4OiBwb2ludC54LAogICAgICAgIHk6IHBvaW50LnksCiAgICAgICAgejogMAogICAgICB9LAogICAgICB0aGV0YUVuZDogTWF0aC5hdGFuMihsYXN0UG9pbnQueSAtIHBvaW50LnksIHBvaW50LnggLSBsYXN0UG9pbnQueCkgKiAxODAgLyBNYXRoLlBJLAogICAgICBhY3Rpb25zOiBbXQogICAgfSk7CiAgfSwKICByZW1vdmVUYXNrRnJvbUpvYjogZnVuY3Rpb24gcmVtb3ZlVGFza0Zyb21Kb2Ioc3RhdGUsIHBheWxvYWQpIHsKICAgIHZhciBqb2IgPSBzdGF0ZS5maW5kKGZ1bmN0aW9uIChqKSB7CiAgICAgIHJldHVybiBqLmlkID09PSBwYXlsb2FkLmpvYklkOwogICAgfSk7CiAgICBpZiAoam9iID09IG51bGwpIHJldHVybjsKICAgIHZhciB0YXNrSW5kZXggPSBqb2IudGFza3MuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0LmlkID09PSBwYXlsb2FkLnRhc2tJZDsKICAgIH0pOwoKICAgIGlmICh0YXNrSW5kZXggPj0gMCAmJiB0YXNrSW5kZXggPCBqb2IudGFza3MubGVuZ3RoKSB7CiAgICAgIGpvYi50YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKTsKICAgIH0KICB9LAogIGNsZWFyVGFza0Zyb21Kb2I6IGZ1bmN0aW9uIGNsZWFyVGFza0Zyb21Kb2Ioc3RhdGUsIHBheWxvYWQpIHsKICAgIHZhciBqb2IgPSBzdGF0ZS5maW5kKGZ1bmN0aW9uIChqKSB7CiAgICAgIHJldHVybiBqLmlkID09PSBwYXlsb2FkLmpvYklkOwogICAgfSk7CiAgICBpZiAoam9iID09IG51bGwpIHJldHVybjsKICAgIGpvYi50YXNrcyA9IFtdOwogIH0sCiAgdXBkYXRlQWN0aW9uczogZnVuY3Rpb24gdXBkYXRlQWN0aW9ucyhzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdmFyIHRhc2sgPSBqb2IudGFza3MuZmluZChmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdC5pZCA9PT0gcGF5bG9hZC50YXNrSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgdGFzay5hY3Rpb25zID0gcGF5bG9hZC5hY3Rpb25zOwogICAgdGFzay5wb3NpdGlvbiA9IHBheWxvYWQucG9zaXRpb247CiAgICB0YXNrLnRoZXRhRW5kID0gcGF5bG9hZC50aGV0YUVuZDsKICB9LAogIHNldFRhc2tzOiBmdW5jdGlvbiBzZXRUYXNrcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIGpvYiA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIGouaWQgPT09IHBheWxvYWQuam9iSWQ7CiAgICB9KTsKICAgIGlmIChqb2IgPT0gbnVsbCkgcmV0dXJuOwogICAgam9iLnRhc2tzID0gcGF5bG9hZC50YXNrczsKICB9Cn07"},{"version":3,"sources":["/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvJobs/mutations.js"],"names":["uuid","pushTaskToJob","state","payload","job","find","j","id","jobId","theta","tasks","length","lastPoint","position","Math","atan2","y","x","PI","v4","push","z","thetaEnd","actions","moveTaskPosition","isNaN","movementX","movementY","task","t","taskId","newPosition","smartPoints","i","sqrt","pow","setThetaEndOfTask","mouse","insertTaskAfterToJob","taskIndex","findIndex","point","splice","insertTaskBeforeToJob","agvPosition","removeTaskFromJob","clearTaskFromJob","updateActions","setTasks"],"mappings":"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","sourcesContent":["import { uuid } from \"vue-uuid\";\n\nexport default {\n  pushTaskToJob(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let theta = 0;\n    if (job.tasks.length > 0) {\n      let lastPoint = job.tasks[job.tasks.length - 1].position;\n      theta = (Math.atan2(lastPoint.y - payload.y, payload.x - lastPoint.x) * 180) / Math.PI;\n    }\n    let id = uuid.v4();\n    while (id in job.tasks) { id = uuid.v4(); }\n    job.tasks.push({\n      id: id,\n      position: {\n        x: payload.x,\n        y: payload.y,\n        z: 0,\n      },\n      thetaEnd: theta,\n      actions: [],\n    });\n  },\n  moveTaskPosition(state, payload) {\n    if (isNaN(payload.movementX) || isNaN(payload.movementY)) return;\n\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let task = job.tasks.find((t) => t.id === payload.taskId);\n    if (task == null) return;\n\n    let newPosition = {\n      x: task.position.x + payload.movementX,\n      y: task.position.y + payload.movementY,\n    };\n\n    if(payload.smartPoints && payload.smartPoints.length > 0) {\n      for(let i = 0; i < payload.smartPoints.length; i++) {\n        if(Math.sqrt(Math.pow(payload.smartPoints[i].x - newPosition.x, 2) + Math.pow(payload.smartPoints[i].y - newPosition.y, 2)) < 15) {\n          newPosition = {\n            x: payload.smartPoints[i].x,\n            y: payload.smartPoints[i].y,\n          }\n          break;\n        } \n      }\n    }\n    task.position = newPosition;\n  },\n  setThetaEndOfTask(state, payload) {\n    if (isNaN(payload.mouse.x) || isNaN(payload.mouse.y)) return;\n\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let task = job.tasks.find((t) => t.id === payload.taskId);\n    if (task == null) return;\n\n    let theta = Math.atan2(task.position.y - payload.mouse.y, payload.mouse.x - task.position.x);\n    task.thetaEnd = theta * 180 / Math.PI;\n  },\n  insertTaskAfterToJob(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let taskIndex = job.tasks.findIndex((t) => t.id === payload.taskId);\n    if (taskIndex < 0 || taskIndex >= job.tasks.length - 1) return;\n\n    let point = {\n      x: (job.tasks[taskIndex].position.x + job.tasks[taskIndex + 1].position.x) / 2,\n      y: (job.tasks[taskIndex].position.y + job.tasks[taskIndex + 1].position.y) / 2,\n    };\n    let lastPoint = job.tasks[taskIndex].position;\n    job.tasks.splice(taskIndex + 1, 0, {\n      id: uuid.v4(),\n      position: {\n        x: point.x,\n        y: point.y,\n        z: 0,\n      },\n      thetaEnd: (Math.atan2(lastPoint.y - point.y, point.x - lastPoint.x) * 180) / Math.PI,\n      actions: [],\n    });\n  },\n  insertTaskBeforeToJob(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let taskIndex = job.tasks.findIndex((t) => t.id === payload.taskId);\n    if (taskIndex >= job.tasks.length - 1) return;\n\n    let lastPoint = null;\n    if (taskIndex == 0) {\n      lastPoint = payload.agvPosition;\n    } else {\n      lastPoint = job.tasks[taskIndex - 1].position;\n    }\n    let point = {\n      x: (lastPoint.x + job.tasks[taskIndex].position.x) / 2,\n      y: (lastPoint.y + job.tasks[taskIndex].position.y) / 2,\n    };\n    job.tasks.splice(taskIndex, 0, {\n      id: uuid.v4(),\n      position: {\n        x: point.x,\n        y: point.y,\n        z: 0,\n      },\n      thetaEnd: (Math.atan2(lastPoint.y - point.y, point.x - lastPoint.x) * 180) / Math.PI,\n      actions: [],\n    });\n  },\n  removeTaskFromJob(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let taskIndex = job.tasks.findIndex((t) => t.id === payload.taskId);\n    if (taskIndex >= 0 && taskIndex < job.tasks.length) {\n      job.tasks.splice(taskIndex, 1);\n    }\n  },\n  clearTaskFromJob(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    job.tasks = [];\n  },\n  updateActions(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    let task = job.tasks.find(t => t.id === payload.taskId);\n    if (job == null) return;\n\n    task.actions = payload.actions;\n    task.position = payload.position;\n    task.thetaEnd = payload.thetaEnd;\n  },\n  setTasks(state, payload) {\n    let job = state.find((j) => j.id === payload.jobId);\n    if (job == null) return;\n\n    job.tasks = payload.tasks;\n  }\n}"]}]}