{"remainingRequest":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/services/agvr/agvr-diagnostics.js","dependencies":[{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/services/agvr/agvr-diagnostics.js","mtime":1609316939488},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1609316939616},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1609316939572},{"path":"/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1609316939784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLndlYWstbWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvcm9ib3RpY3MvVHVuZ05WL2Fndl92Ml93cy9zcmMvYWd2X3YyL3dlYlNlcnZlci9hZ3YtZGFzYm9hcmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9yb2JvdGljcy9UdW5nTlYvYWd2X3YyX3dzL3NyYy9hZ3ZfdjIvd2ViU2VydmVyL2Fndi1kYXNib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IGZyb20gIi9ob21lL3JvYm90aWNzL1R1bmdOVi9hZ3ZfdjJfd3Mvc3JjL2Fndl92Mi93ZWJTZXJ2ZXIvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc1ByaXZhdGVGaWVsZEdldCI7CmltcG9ydCBfY2xhc3NQcml2YXRlRmllbGRTZXQgZnJvbSAiL2hvbWUvcm9ib3RpY3MvVHVuZ05WL2Fndl92Ml93cy9zcmMvYWd2X3YyL3dlYlNlcnZlci9hZ3YtZGFzYm9hcmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzUHJpdmF0ZUZpZWxkU2V0IjsKaW1wb3J0IFJPU0xJQiBmcm9tICJyb3NsaWIiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7Cgp2YXIgX3Jvc1N0b3JlID0gbmV3IFdlYWtNYXAoKTsKCnZhciBfZGlhZ25vc3RpY3NUb3BpYyA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX2FndklkID0gbmV3IFdlYWtNYXAoKTsKCnZhciBfb25EaWFnbm9zdGljc1JlY2VpdmVkID0gbmV3IFdlYWtNYXAoKTsKCnZhciBBZ3ZyRGlhZ25vc3RpY3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFndnJEaWFnbm9zdGljcyhyb3MsIGlkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZ3ZyRGlhZ25vc3RpY3MpOwoKICAgIF9yb3NTdG9yZS5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0pOwoKICAgIF9kaWFnbm9zdGljc1RvcGljLnNldCh0aGlzLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogbnVsbAogICAgfSk7CgogICAgX2FndklkLnNldCh0aGlzLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogbnVsbAogICAgfSk7CgogICAgX29uRGlhZ25vc3RpY3NSZWNlaXZlZC5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG1lc3NhZ2UpIHsKICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9yb3NTdG9yZSkuZGlzcGF0Y2goImFndnMvc2V0QWd2U3RhdHVzIiwgewogICAgICAgICAgYWd2SWQ6IF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpcywgX2FndklkKSwKICAgICAgICAgIHN0YXR1czogbWVzc2FnZS5zdGF0dXMKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgaWYgKCEocm9zIGluc3RhbmNlb2YgUk9TTElCLlJvcykpIHJldHVybjsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2FndklkLCBpZCk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9yb3NTdG9yZSwgVnVlLnByb3RvdHlwZS4kc3RvcmUpOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfZGlhZ25vc3RpY3NUb3BpYywgbmV3IFJPU0xJQi5Ub3BpYyh7CiAgICAgIHJvczogcm9zLAogICAgICBuYW1lOiAnL2RpYWdub3N0aWNzX2FnZycsCiAgICAgIG1lc3NhZ2VUeXBlOiAnZGlhZ25vc3RpY19tc2dzL0RpYWdub3N0aWNBcnJheScKICAgIH0pKTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2RpYWdub3N0aWNzVG9waWMpLnN1YnNjcmliZShfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX29uRGlhZ25vc3RpY3NSZWNlaXZlZCkpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFndnJEaWFnbm9zdGljcywgW3sKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIGlmIChfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2RpYWdub3N0aWNzVG9waWMpICE9IG51bGwpIHsKICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2RpYWdub3N0aWNzVG9waWMpLnVuc3Vic2NyaWJlKCk7CgogICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfZGlhZ25vc3RpY3NUb3BpYywgbnVsbCk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBBZ3ZyRGlhZ25vc3RpY3M7Cn0oKTsKCmV4cG9ydCB7IEFndnJEaWFnbm9zdGljcyBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/home/robotics/TungNV/agv_v2_ws/src/agv_v2/webServer/agv-dasboard/src/services/agvr/agvr-diagnostics.js"],"names":["ROSLIB","Vue","AgvrDiagnostics","ros","id","message","dispatch","agvId","status","Ros","prototype","$store","Topic","name","messageType","subscribe","unsubscribe"],"mappings":";;;;;;;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,KAAhB;;;;;;;;;;IAEqBC,e;AAKnB,2BAAYC,GAAZ,EAAiBC,EAAjB,EAAqB;AAAA;;AAAA;;AAAA;AAAA;AAAA,aAJT;AAIS;;AAAA;AAAA;AAAA,aAHD;AAGC;;AAAA;AAAA;AAAA,aAFZ;AAEY;;AAAA;AAAA;AAAA,aAqBI,eAACC,OAAD,EAAa;AACpC,8BAAA,KAAI,YAAJ,CAAeC,QAAf,CAAwB,mBAAxB,EAA6C;AAC3CC,UAAAA,KAAK,wBAAE,KAAF,SADsC;AAE3CC,UAAAA,MAAM,EAAEH,OAAO,CAACG;AAF2B,SAA7C;AAID;AA1BoB;;AACnB,QAAI,EAAEL,GAAG,YAAYH,MAAM,CAACS,GAAxB,CAAJ,EAAkC;;AAElC,wCAAcL,EAAd;;AACA,2CAAiBH,GAAG,CAACS,SAAJ,CAAcC,MAA/B;;AACA,mDAAyB,IAAIX,MAAM,CAACY,KAAX,CAAiB;AACxCT,MAAAA,GAAG,EAAEA,GADmC;AAExCU,MAAAA,IAAI,EAAE,kBAFkC;AAGxCC,MAAAA,WAAW,EAAE;AAH2B,KAAjB,CAAzB;;AAMA,mDAAuBC,SAAvB,uBAAiC,IAAjC;AACD;;;;8BAES;AACR,UAAG,kDAA0B,IAA7B,EAAmC;AACjC,uDAAuBC,WAAvB;;AACA,uDAAyB,IAAzB;AACD;AACF;;;;;;SAxBkBd,e","sourcesContent":["import ROSLIB from \"roslib\";\nimport Vue from 'vue';\n\nexport default class AgvrDiagnostics {\n  #rosStore = null;\n  #diagnosticsTopic = null;\n  #agvId = null;\n\n  constructor(ros, id) {\n    if (!(ros instanceof ROSLIB.Ros)) return;\n\n    this.#agvId = id;\n    this.#rosStore = Vue.prototype.$store;\n    this.#diagnosticsTopic = new ROSLIB.Topic({\n      ros: ros,\n      name: '/diagnostics_agg',\n      messageType: 'diagnostic_msgs/DiagnosticArray'\n    });\n\n    this.#diagnosticsTopic.subscribe(this.#onDiagnosticsReceived);\n  }\n\n  dispose() {\n    if(this.#diagnosticsTopic != null) {\n      this.#diagnosticsTopic.unsubscribe();\n      this.#diagnosticsTopic = null;\n    }\n  }\n\n  #onDiagnosticsReceived = (message) => {\n    this.#rosStore.dispatch(\"agvs/setAgvStatus\", {\n      agvId: this.#agvId,\n      status: message.status,\n    });\n  }\n}"]}]}