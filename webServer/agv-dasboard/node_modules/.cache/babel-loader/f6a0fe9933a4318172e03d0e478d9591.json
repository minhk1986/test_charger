{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvMaps/mutations.js","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvMaps/mutations.js","mtime":1609149483976},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1602053618906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXRSb3NNYXA6IGZ1bmN0aW9uIHNldFJvc01hcChzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIG1hcCA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgcmV0dXJuIG0uaWQgPT09IHBheWxvYWQuaWQ7CiAgICB9KTsKICAgIGlmIChtYXAgPT0gbnVsbCkgcmV0dXJuOwogICAgbWFwLnJvc01hcCA9IHBheWxvYWQubWFwOwogICAgdmFyIG1hcFNjYWxlID0gbWFwLndlYk1hcC5zY2FsZTsKICAgIHZhciByb3NNYXBJbmZvID0gbWFwLnJvc01hcC5pbmZvOwogICAgdmFyIHJvc01hcERhdGEgPSBtYXAucm9zTWFwLmRhdGE7CiAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2VEYXRhKHJvc01hcEluZm8ud2lkdGggKiBtYXBTY2FsZSwgcm9zTWFwSW5mby5oZWlnaHQgKiBtYXBTY2FsZSk7CiAgICB2YXIgbWFwSSA9IChyb3NNYXBJbmZvLmhlaWdodCAtIDEpICogcm9zTWFwSW5mby53aWR0aDsKCiAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCByb3NNYXBJbmZvLmhlaWdodDsgcm93KyssIG1hcEkgLT0gcm9zTWFwSW5mby53aWR0aCAqIDIpIHsKICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgcm9zTWFwSW5mby53aWR0aDsgY29sKyssIG1hcEkrKykgewogICAgICAgIHZhciB2YWwgPSByb3NNYXBEYXRhW21hcEldOwoKICAgICAgICBpZiAocm9zTWFwRGF0YVttYXBJXSA9PT0gMTAwKSB7CiAgICAgICAgICB2YWwgPSAwOwogICAgICAgIH0gZWxzZSBpZiAocm9zTWFwRGF0YVttYXBJXSA9PT0gMCkgewogICAgICAgICAgdmFsID0gMjU1OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YWwgPSAxODA7CiAgICAgICAgfQoKICAgICAgICB2YXIgaSA9IChjb2wgKiBtYXBTY2FsZSArIHJvdyAqIG1hcFNjYWxlICogcm9zTWFwSW5mby53aWR0aCAqIG1hcFNjYWxlKSAqIDQ7CgogICAgICAgIGZvciAodmFyIHNjYWxlUm93ID0gMDsgc2NhbGVSb3cgPCBtYXBTY2FsZTsgc2NhbGVSb3crKywgaSArPSAocm9zTWFwSW5mby53aWR0aCAtIDEpICogbWFwU2NhbGUgKiA0KSB7CiAgICAgICAgICBmb3IgKHZhciBzY2FsZUNvbCA9IDA7IHNjYWxlQ29sIDwgbWFwU2NhbGU7IHNjYWxlQ29sKyspIHsKICAgICAgICAgICAgaW1hZ2UuZGF0YVtpKytdID0gdmFsOwogICAgICAgICAgICBpbWFnZS5kYXRhW2krK10gPSB2YWw7CiAgICAgICAgICAgIGltYWdlLmRhdGFbaSsrXSA9IHZhbDsKICAgICAgICAgICAgaW1hZ2UuZGF0YVtpKytdID0gMjU1OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG1hcC53ZWJNYXAuSW1hZ2UgPSBpbWFnZTsKICAgIHZhciBzbWFydFBvaW50cyA9IFtdOwoKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtYXAuc21hcnRQb2ludHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgIHNtYXJ0UG9pbnRzLnB1c2goewogICAgICAgIGlkOiBtYXAuc21hcnRQb2ludHNbX2ldLmlkLAogICAgICAgIHg6ICgtcm9zTWFwSW5mby5vcmlnaW4ucG9zaXRpb24ueCArIG1hcC5zbWFydFBvaW50c1tfaV0ueCkgLyByb3NNYXBJbmZvLnJlc29sdXRpb24gKiBtYXBTY2FsZSwKICAgICAgICB5OiAocm9zTWFwSW5mby5oZWlnaHQgKyAocm9zTWFwSW5mby5vcmlnaW4ucG9zaXRpb24ueSAtIG1hcC5zbWFydFBvaW50c1tfaV0ueSkgLyByb3NNYXBJbmZvLnJlc29sdXRpb24pICogbWFwU2NhbGUKICAgICAgfSk7CiAgICB9CgogICAgbWFwLnNtYXJ0V2ViUG9pbnRzID0gc21hcnRQb2ludHM7CiAgfSwKICBzZXRDb25uZWN0aW9uU3RhdGU6IGZ1bmN0aW9uIHNldENvbm5lY3Rpb25TdGF0ZShzdGF0ZSwgcGF5bG9hZCkgewogICAgdmFyIG1hcCA9IHN0YXRlLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgcmV0dXJuIG0uaWQgPT09IHBheWxvYWQuaWQ7CiAgICB9KTsKICAgIGlmIChtYXAgIT0gbnVsbCkgbWFwLnJvc0Nvbm50ZWN0aW9uU3RhdGUgPSBwYXlsb2FkLmlzQ29ubmVjdGVkOwogIH0KfTs="},{"version":3,"sources":["/home/robotics/AnhNV/agv-dasboard/src/store/modules/agvMaps/mutations.js"],"names":["setRosMap","state","payload","map","find","m","id","rosMap","mapScale","webMap","scale","rosMapInfo","info","rosMapData","data","image","ImageData","width","height","mapI","row","col","val","i","scaleRow","scaleCol","Image","smartPoints","length","push","x","origin","position","resolution","y","smartWebPoints","setConnectionState","rosConntectionState","isConnected"],"mappings":";;AAAA,eAAe;AACbA,EAAAA,SADa,qBACHC,KADG,EACIC,OADJ,EACa;AACxB,QAAIC,GAAG,GAAGF,KAAK,CAACG,IAAN,CAAW,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,EAAF,KAASJ,OAAO,CAACI,EAAxB;AAAA,KAAX,CAAV;AACA,QAAIH,GAAG,IAAI,IAAX,EAAiB;AAEjBA,IAAAA,GAAG,CAACI,MAAJ,GAAaL,OAAO,CAACC,GAArB;AACA,QAAIK,QAAQ,GAAGL,GAAG,CAACM,MAAJ,CAAWC,KAA1B;AACA,QAAIC,UAAU,GAAGR,GAAG,CAACI,MAAJ,CAAWK,IAA5B;AACA,QAAIC,UAAU,GAAGV,GAAG,CAACI,MAAJ,CAAWO,IAA5B;AAEA,QAAIC,KAAK,GAAG,IAAIC,SAAJ,CAAcL,UAAU,CAACM,KAAX,GAAmBT,QAAjC,EAA2CG,UAAU,CAACO,MAAX,GAAoBV,QAA/D,CAAZ;AAEA,QAAIW,IAAI,GAAG,CAACR,UAAU,CAACO,MAAX,GAAoB,CAArB,IAA0BP,UAAU,CAACM,KAAhD;;AACA,SAAK,IAAIG,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGT,UAAU,CAACO,MAAnC,EAA2CE,GAAG,IAAID,IAAI,IAAIR,UAAU,CAACM,KAAX,GAAmB,CAA7E,EAAgF;AAC9E,WAAK,IAAII,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGV,UAAU,CAACM,KAAnC,EAA0CI,GAAG,IAAIF,IAAI,EAArD,EAAyD;AACvD,YAAIG,GAAG,GAAGT,UAAU,CAACM,IAAD,CAApB;;AACA,YAAIN,UAAU,CAACM,IAAD,CAAV,KAAqB,GAAzB,EAA8B;AAC5BG,UAAAA,GAAG,GAAG,CAAN;AACD,SAFD,MAEO,IAAIT,UAAU,CAACM,IAAD,CAAV,KAAqB,CAAzB,EAA4B;AACjCG,UAAAA,GAAG,GAAG,GAAN;AACD,SAFM,MAEA;AACLA,UAAAA,GAAG,GAAG,GAAN;AACD;;AACD,YAAIC,CAAC,GAAG,CAACF,GAAG,GAAGb,QAAN,GAAkBY,GAAG,GAAGZ,QAAP,GAAmBG,UAAU,CAACM,KAA9B,GAAsCT,QAAxD,IAAoE,CAA5E;;AACA,aAAK,IAAIgB,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGhB,QAAlC,EAA4CgB,QAAQ,IAAID,CAAC,IAAK,CAACZ,UAAU,CAACM,KAAX,GAAmB,CAApB,IAAyBT,QAA1B,GAAsC,CAAnG,EAAsG;AACpG,eAAK,IAAIiB,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGjB,QAAlC,EAA4CiB,QAAQ,EAApD,EAAwD;AACtDV,YAAAA,KAAK,CAACD,IAAN,CAAWS,CAAC,EAAZ,IAAkBD,GAAlB;AACAP,YAAAA,KAAK,CAACD,IAAN,CAAWS,CAAC,EAAZ,IAAkBD,GAAlB;AACAP,YAAAA,KAAK,CAACD,IAAN,CAAWS,CAAC,EAAZ,IAAkBD,GAAlB;AACAP,YAAAA,KAAK,CAACD,IAAN,CAAWS,CAAC,EAAZ,IAAkB,GAAlB;AACD;AACF;AACF;AACF;;AACDpB,IAAAA,GAAG,CAACM,MAAJ,CAAWiB,KAAX,GAAmBX,KAAnB;AACA,QAAIY,WAAW,GAAG,EAAlB;;AACA,SAAI,IAAIJ,EAAC,GAAG,CAAZ,EAAeA,EAAC,GAAGpB,GAAG,CAACwB,WAAJ,CAAgBC,MAAnC,EAA2CL,EAAC,EAA5C,EAAgD;AAC9CI,MAAAA,WAAW,CAACE,IAAZ,CAAiB;AACfvB,QAAAA,EAAE,EAAEH,GAAG,CAACwB,WAAJ,CAAgBJ,EAAhB,EAAmBjB,EADR;AAEfwB,QAAAA,CAAC,EAAE,CAAC,CAAEnB,UAAU,CAACoB,MAAX,CAAkBC,QAAlB,CAA2BF,CAA7B,GAAiC3B,GAAG,CAACwB,WAAJ,CAAgBJ,EAAhB,EAAmBO,CAArD,IAA0DnB,UAAU,CAACsB,UAArE,GAAkFzB,QAFtE;AAGf0B,QAAAA,CAAC,EAAE,CAACvB,UAAU,CAACO,MAAX,GAAoB,CAACP,UAAU,CAACoB,MAAX,CAAkBC,QAAlB,CAA2BE,CAA3B,GAA+B/B,GAAG,CAACwB,WAAJ,CAAgBJ,EAAhB,EAAmBW,CAAnD,IAAwDvB,UAAU,CAACsB,UAAxF,IAAsGzB;AAH1F,OAAjB;AAKD;;AACDL,IAAAA,GAAG,CAACgC,cAAJ,GAAqBR,WAArB;AACD,GA5CY;AA6CbS,EAAAA,kBA7Ca,8BA6CMnC,KA7CN,EA6CaC,OA7Cb,EA6CsB;AACjC,QAAIC,GAAG,GAAGF,KAAK,CAACG,IAAN,CAAW,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,EAAF,KAASJ,OAAO,CAACI,EAAxB;AAAA,KAAX,CAAV;AACA,QAAIH,GAAG,IAAI,IAAX,EAAiBA,GAAG,CAACkC,mBAAJ,GAA0BnC,OAAO,CAACoC,WAAlC;AAClB;AAhDY,CAAf","sourcesContent":["export default {\n  setRosMap(state, payload) {\n    let map = state.find((m) => m.id === payload.id);\n    if (map == null) return;\n\n    map.rosMap = payload.map;\n    let mapScale = map.webMap.scale;\n    let rosMapInfo = map.rosMap.info;\n    let rosMapData = map.rosMap.data;\n\n    let image = new ImageData(rosMapInfo.width * mapScale, rosMapInfo.height * mapScale);\n\n    let mapI = (rosMapInfo.height - 1) * rosMapInfo.width;\n    for (var row = 0; row < rosMapInfo.height; row++, mapI -= rosMapInfo.width * 2) {\n      for (var col = 0; col < rosMapInfo.width; col++, mapI++) {\n        var val = rosMapData[mapI];\n        if (rosMapData[mapI] === 100) {\n          val = 0;\n        } else if (rosMapData[mapI] === 0) {\n          val = 255;\n        } else {\n          val = 180;\n        }\n        let i = (col * mapScale + (row * mapScale) * rosMapInfo.width * mapScale) * 4;\n        for (var scaleRow = 0; scaleRow < mapScale; scaleRow++, i += ((rosMapInfo.width - 1) * mapScale) * 4) {\n          for (var scaleCol = 0; scaleCol < mapScale; scaleCol++) {\n            image.data[i++] = val;\n            image.data[i++] = val;\n            image.data[i++] = val;\n            image.data[i++] = 255;\n          }\n        }\n      }\n    }\n    map.webMap.Image = image;\n    let smartPoints = [];\n    for(let i = 0; i < map.smartPoints.length; i++) {\n      smartPoints.push({\n        id: map.smartPoints[i].id,\n        x: (- rosMapInfo.origin.position.x + map.smartPoints[i].x) / rosMapInfo.resolution * mapScale,\n        y: (rosMapInfo.height + (rosMapInfo.origin.position.y - map.smartPoints[i].y) / rosMapInfo.resolution) * mapScale,\n      })\n    }\n    map.smartWebPoints = smartPoints;\n  },\n  setConnectionState(state, payload) {\n    let map = state.find((m) => m.id === payload.id);\n    if (map != null) map.rosConntectionState = payload.isConnected;\n  },\n}"]}]}