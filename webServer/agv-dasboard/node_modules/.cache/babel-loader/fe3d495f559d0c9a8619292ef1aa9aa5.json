{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js!/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js!/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js??ref--13-0!/home/robotics/AnhNV/agv-dasboard/src/services/agvr/agvr-diagnostics.js","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/services/agvr/agvr-diagnostics.js","mtime":1609149483112},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js","mtime":1602053610301},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/eslint-loader/index.js","mtime":1602053618906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLndlYWstbWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvcm9ib3RpY3MvQW5oTlYvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvcm9ib3RpY3MvQW5oTlYvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfY2xhc3NQcml2YXRlRmllbGRHZXQgZnJvbSAiL2hvbWUvcm9ib3RpY3MvQW5oTlYvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc1ByaXZhdGVGaWVsZEdldCI7CmltcG9ydCBfY2xhc3NQcml2YXRlRmllbGRTZXQgZnJvbSAiL2hvbWUvcm9ib3RpY3MvQW5oTlYvYWd2LWRhc2JvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc1ByaXZhdGVGaWVsZFNldCI7CmltcG9ydCBST1NMSUIgZnJvbSAicm9zbGliIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwoKdmFyIF9yb3NTdG9yZSA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX2RpYWdub3N0aWNzVG9waWMgPSBuZXcgV2Vha01hcCgpOwoKdmFyIF9hZ3ZJZCA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgX29uRGlhZ25vc3RpY3NSZWNlaXZlZCA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgQWd2ckRpYWdub3N0aWNzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBZ3ZyRGlhZ25vc3RpY3Mocm9zLCBpZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWd2ckRpYWdub3N0aWNzKTsKCiAgICBfcm9zU3RvcmUuc2V0KHRoaXMsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiBudWxsCiAgICB9KTsKCiAgICBfZGlhZ25vc3RpY3NUb3BpYy5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0pOwoKICAgIF9hZ3ZJZC5zZXQodGhpcywgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0pOwoKICAgIF9vbkRpYWdub3N0aWNzUmVjZWl2ZWQuc2V0KHRoaXMsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShtZXNzYWdlKSB7CiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzLCBfcm9zU3RvcmUpLmRpc3BhdGNoKCJhZ3ZzL3NldEFndlN0YXR1cyIsIHsKICAgICAgICAgIGFndklkOiBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9hZ3ZJZCksCiAgICAgICAgICBzdGF0dXM6IG1lc3NhZ2Uuc3RhdHVzCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmICghKHJvcyBpbnN0YW5jZW9mIFJPU0xJQi5Sb3MpKSByZXR1cm47CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9hZ3ZJZCwgaWQpOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfcm9zU3RvcmUsIFZ1ZS5wcm90b3R5cGUuJHN0b3JlKTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2RpYWdub3N0aWNzVG9waWMsIG5ldyBST1NMSUIuVG9waWMoewogICAgICByb3M6IHJvcywKICAgICAgbmFtZTogJy9kaWFnbm9zdGljc19hZ2cnLAogICAgICBtZXNzYWdlVHlwZTogJ2RpYWdub3N0aWNfbXNncy9EaWFnbm9zdGljQXJyYXknCiAgICB9KSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9kaWFnbm9zdGljc1RvcGljKS5zdWJzY3JpYmUoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9vbkRpYWdub3N0aWNzUmVjZWl2ZWQpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBZ3ZyRGlhZ25vc3RpY3MsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9kaWFnbm9zdGljc1RvcGljKSAhPSBudWxsKSB7CiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9kaWFnbm9zdGljc1RvcGljKS51bnN1YnNjcmliZSgpOwoKICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2RpYWdub3N0aWNzVG9waWMsIG51bGwpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWd2ckRpYWdub3N0aWNzOwp9KCk7CgpleHBvcnQgeyBBZ3ZyRGlhZ25vc3RpY3MgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/robotics/AnhNV/agv-dasboard/src/services/agvr/agvr-diagnostics.js"],"names":["ROSLIB","Vue","AgvrDiagnostics","ros","id","message","dispatch","agvId","status","Ros","prototype","$store","Topic","name","messageType","subscribe","unsubscribe"],"mappings":";;;;;;;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,KAAhB;;;;;;;;;;IAEqBC,e;AAKnB,2BAAYC,GAAZ,EAAiBC,EAAjB,EAAqB;AAAA;;AAAA;;AAAA;AAAA;AAAA,aAJT;AAIS;;AAAA;AAAA;AAAA,aAHD;AAGC;;AAAA;AAAA;AAAA,aAFZ;AAEY;;AAAA;AAAA;AAAA,aAqBI,eAACC,OAAD,EAAa;AACpC,8BAAA,KAAI,YAAJ,CAAeC,QAAf,CAAwB,mBAAxB,EAA6C;AAC3CC,UAAAA,KAAK,wBAAE,KAAF,SADsC;AAE3CC,UAAAA,MAAM,EAAEH,OAAO,CAACG;AAF2B,SAA7C;AAID;AA1BoB;;AACnB,QAAI,EAAEL,GAAG,YAAYH,MAAM,CAACS,GAAxB,CAAJ,EAAkC;;AAElC,wCAAcL,EAAd;;AACA,2CAAiBH,GAAG,CAACS,SAAJ,CAAcC,MAA/B;;AACA,mDAAyB,IAAIX,MAAM,CAACY,KAAX,CAAiB;AACxCT,MAAAA,GAAG,EAAEA,GADmC;AAExCU,MAAAA,IAAI,EAAE,kBAFkC;AAGxCC,MAAAA,WAAW,EAAE;AAH2B,KAAjB,CAAzB;;AAMA,mDAAuBC,SAAvB,uBAAiC,IAAjC;AACD;;;;8BAES;AACR,UAAG,kDAA0B,IAA7B,EAAmC;AACjC,uDAAuBC,WAAvB;;AACA,uDAAyB,IAAzB;AACD;AACF;;;;;;SAxBkBd,e","sourcesContent":["import ROSLIB from \"roslib\";\nimport Vue from 'vue';\n\nexport default class AgvrDiagnostics {\n  #rosStore = null;\n  #diagnosticsTopic = null;\n  #agvId = null;\n\n  constructor(ros, id) {\n    if (!(ros instanceof ROSLIB.Ros)) return;\n\n    this.#agvId = id;\n    this.#rosStore = Vue.prototype.$store;\n    this.#diagnosticsTopic = new ROSLIB.Topic({\n      ros: ros,\n      name: '/diagnostics_agg',\n      messageType: 'diagnostic_msgs/DiagnosticArray'\n    });\n\n    this.#diagnosticsTopic.subscribe(this.#onDiagnosticsReceived);\n  }\n\n  dispose() {\n    if(this.#diagnosticsTopic != null) {\n      this.#diagnosticsTopic.unsubscribe();\n      this.#diagnosticsTopic = null;\n    }\n  }\n\n  #onDiagnosticsReceived = (message) => {\n    this.#rosStore.dispatch(\"agvs/setAgvStatus\", {\n      agvId: this.#agvId,\n      status: message.status,\n    });\n  }\n}"]}]}