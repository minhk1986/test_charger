{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/AgvrPoseEditor/AgvrPoseEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/AgvrPoseEditor/AgvrPoseEditor.vue","mtime":1609149480824},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js","mtime":1602053610301},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7Cgpjb25zdCB7IG1hcFN0YXRlOiBuYXZpZ2F0aW9uTWFwU3RhdGUgfSA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCJuYXZpZ2F0aW9uIik7CmNvbnN0IHsKICBtYXBTdGF0ZTogYWd2c01hcFN0YXRlLAogIG1hcEFjdGlvbnM6IGFndnNtYXBBY3Rpb25zLAp9ID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoImFndnMiKTsKY29uc3QgeyBtYXBTdGF0ZTogYWd2TWFwc01hcFN0YXRlIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiYWd2TWFwcyIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZ3ZyUG9zZUVkaXRvciIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRtcFBvc2l0aW9uWDogMCwKICAgICAgdG1wUG9zaXRpb25ZOiAwLAogICAgICB0bXBBbmdsZVo6IDAsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm5hdmlnYXRpb25NYXBTdGF0ZSh7CiAgICAgIG5hdmlnYXRpb25NYXBJZDogKHN0YXRlKSA9PiBzdGF0ZS5tYXBJZCwKICAgICAgbmF2aWdhdGlvbkFndklkOiAoc3RhdGUpID0+IHN0YXRlLmFndklkLAogICAgfSksCiAgICAuLi5hZ3ZzTWFwU3RhdGUoewogICAgICBhZ3ZXZWJQb3NlKHN0YXRlKSB7CiAgICAgICAgbGV0IGFndiA9IHN0YXRlLmZpbmQoKGEpID0+IGEuaWQgPT09IHRoaXMubmF2aWdhdGlvbkFndklkKTsKICAgICAgICByZXR1cm4gYWd2ICE9IG51bGwKICAgICAgICAgID8gYWd2LndlYlBvc2UKICAgICAgICAgIDogewogICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IDAsIHk6IDAsIHo6IDAgfSwKICAgICAgICAgICAgICBvcmllbnRhdGlvbjogeyB4OiAwLCB5OiAwLCB6OiAwIH0sCiAgICAgICAgICAgIH07CiAgICAgIH0sCiAgICAgIGFndlNpbTEwMDBQb3NlUXVhbGl0eShzdGF0ZSkgewogICAgICAgIGxldCBhZ3YgPSBzdGF0ZS5maW5kKChhKSA9PiBhLmlkID09PSB0aGlzLm5hdmlnYXRpb25BZ3ZJZCk7CiAgICAgICAgcmV0dXJuIGFndiAhPSBudWxsID8gYWd2LnNpbTEwMDBQb3NlLnF1YWxpdHkgOiAwOwogICAgICB9LAogICAgfSksCiAgICAuLi5hZ3ZNYXBzTWFwU3RhdGUoewogICAgICBhZ3ZNYXBTY2FsZShzdGF0ZSkgewogICAgICAgIGxldCBtYXAgPSBzdGF0ZS5maW5kKChtKSA9PiBtLmlkID09PSB0aGlzLm5hdmlnYXRpb25NYXBJZCk7CiAgICAgICAgcmV0dXJuIG1hcCAhPSBudWxsID8gbWFwLndlYk1hcC5zY2FsZSA6IDE7CiAgICAgIH0sCiAgICAgIGFndlJvc01hcEluZm8oc3RhdGUpIHsKICAgICAgICBsZXQgbWFwID0gc3RhdGUuZmluZCgobSkgPT4gbS5pZCA9PT0gdGhpcy5uYXZpZ2F0aW9uTWFwSWQpOwogICAgICAgIHJldHVybiBtYXAucm9zTWFwLmluZm87CiAgICAgIH0sCiAgICB9KSwKICAgIHBvc2l0aW9uWDogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuYWd2Um9zTWFwSW5mby5vcmlnaW4ucG9zaXRpb24ueCArCiAgICAgICAgICAodGhpcy5hZ3ZXZWJQb3NlLnBvc2l0aW9uLnggKiB0aGlzLmFndlJvc01hcEluZm8ucmVzb2x1dGlvbikgLwogICAgICAgICAgICB0aGlzLmFndk1hcFNjYWxlCiAgICAgICAgKS50b0ZpeGVkKDIpOwogICAgICB9LAogICAgICBzZXQodmFsKSB7CiAgICAgICAgdGhpcy50bXBQb3NpdGlvblggPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgIH0sCiAgICB9LAogICAgcG9zaXRpb25ZOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgdGhpcy5hZ3ZSb3NNYXBJbmZvLm9yaWdpbi5wb3NpdGlvbi55IC0KICAgICAgICAgICh0aGlzLmFndldlYlBvc2UucG9zaXRpb24ueSAvIHRoaXMuYWd2TWFwU2NhbGUgLQogICAgICAgICAgICB0aGlzLmFndlJvc01hcEluZm8uaGVpZ2h0KSAqCiAgICAgICAgICAgIHRoaXMuYWd2Um9zTWFwSW5mby5yZXNvbHV0aW9uCiAgICAgICAgKS50b0ZpeGVkKDIpOwogICAgICB9LAogICAgICBzZXQodmFsKSB7CiAgICAgICAgdGhpcy50bXBQb3NpdGlvblkgPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgIH0sCiAgICB9LAogICAgYW5nbGVaOiB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmFndldlYlBvc2Uub3JpZW50YXRpb24uei50b0ZpeGVkKDApOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB0aGlzLnRtcEFuZ2xlWiA9IHBhcnNlRmxvYXQodmFsKTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5hZ3ZzbWFwQWN0aW9ucyh7CiAgICAgIHNldEFndkRpcmVjdGlvbjogInNldEFndkRpcmVjdGlvbiIsCiAgICAgIHNldEFndlBvc2l0aW9uOiAic2V0QWd2UG9zaXRpb24iLAogICAgfSksCiAgICB1cGRhdGVQb3NpdGlvbigpIHsKICAgICAgdGhpcy5zZXRBZ3ZQb3NpdGlvbih7CiAgICAgICAgeDoKICAgICAgICAgICgodGhpcy50bXBQb3NpdGlvblggLSB0aGlzLmFndlJvc01hcEluZm8ub3JpZ2luLnBvc2l0aW9uLngpICoKICAgICAgICAgICAgdGhpcy5hZ3ZNYXBTY2FsZSkgLwogICAgICAgICAgdGhpcy5hZ3ZSb3NNYXBJbmZvLnJlc29sdXRpb24sCiAgICAgICAgeToKICAgICAgICAgICgodGhpcy5hZ3ZSb3NNYXBJbmZvLm9yaWdpbi5wb3NpdGlvbi55IC0gdGhpcy50bXBQb3NpdGlvblkpIC8KICAgICAgICAgICAgdGhpcy5hZ3ZSb3NNYXBJbmZvLnJlc29sdXRpb24gKwogICAgICAgICAgICB0aGlzLmFndlJvc01hcEluZm8uaGVpZ2h0KSAqCiAgICAgICAgICB0aGlzLmFndk1hcFNjYWxlLAogICAgICAgIHo6IDAsCiAgICAgICAgYWd2SWQ6IHRoaXMubmF2aWdhdGlvbkFndklkLAogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVBbmdsZSgpIHsKICAgICAgdGhpcy5zZXRBZ3ZEaXJlY3Rpb24oewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICB6OiB0aGlzLnRtcEFuZ2xlWiwKICAgICAgICBhZ3ZJZDogdGhpcy5uYXZpZ2F0aW9uQWd2SWQsCiAgICAgIH0pOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnRtcFBvc2l0aW9uWCA9IHRoaXMucG9zaXRpb25YOwogICAgdGhpcy50bXBQb3NpdGlvblkgPSB0aGlzLnBvc2l0aW9uWTsKICAgIHRoaXMudG1wQW5nbGVaID0gdGhpcy5hbmdsZVo7CiAgfSwKfTsK"},{"version":3,"sources":["AgvrPoseEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AgvrPoseEditor.vue","sourceRoot":"src/components/AgvrPoseEditor","sourcesContent":["<template>\n  <v-container class=\"pa-0\" fluid>\n    <v-row no-gutters justify=\"center\">\n      <v-col class=\"pa-1 pt-2\" xs=\"12\" sm=\"4\" md=\"3\" lg=\"2\">\n        <v-text-field\n          type=\"number\"\n          color=\"black\"\n          :prepend-inner-icon=\"'mdi-axis-x-arrow'\"\n          append-icon=\"mdi-alpha-m\"\n          label=\"X axit\"\n          outlined\n          dense\n          :step=\"0.001\"\n          v-model=\"positionX\"\n          :readonly=\"$router.currentRoute.path != '/navigation/init'\"\n          @keypress.enter=\"updatePosition\"\n          @blur=\"updatePosition\"\n          hide-details\n        />\n      </v-col>\n      <v-col class=\"pa-1 pt-2\" xs=\"12\" sm=\"4\" md=\"3\" lg=\"2\">\n        <v-text-field\n          type=\"number\"\n          color=\"black\"\n          :prepend-inner-icon=\"'mdi-axis-y-arrow'\"\n          append-icon=\"mdi-alpha-m\"\n          label=\"Y axit\"\n          outlined\n          dense\n          :step=\"0.001\"\n          v-model=\"positionY\"\n          :readonly=\"$router.currentRoute.path != '/navigation/init'\"\n          @keypress.enter=\"updatePosition\"\n          @blur=\"updatePosition\"\n          hide-details\n        />\n      </v-col>\n      <v-col class=\"pa-1 pt-2\" xs=\"12\" sm=\"4\" md=\"3\" lg=\"2\">\n        <v-text-field\n          type=\"number\"\n          color=\"black\"\n          :prepend-inner-icon=\"'mdi-axis-z-rotate-counterclockwise'\"\n          append-icon=\"mdi-alpha-d\"\n          label=\"Z angle\"\n          outlined\n          dense\n          :step=\"0.001\"\n          v-model=\"angleZ\"\n          :readonly=\"$router.currentRoute.path != '/navigation/init'\"\n          @keypress.enter=\"updateAngle\"\n          @blur=\"updateAngle\"\n          hide-details\n        />\n      </v-col>\n      <div class=\"d-flex\">\n        <span class=\"align-self-center\">{{agvSim1000PoseQuality}}%</span>\n      </div>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\n\nconst { mapState: navigationMapState } = createNamespacedHelpers(\"navigation\");\nconst {\n  mapState: agvsMapState,\n  mapActions: agvsmapActions,\n} = createNamespacedHelpers(\"agvs\");\nconst { mapState: agvMapsMapState } = createNamespacedHelpers(\"agvMaps\");\n\nexport default {\n  name: \"AgvrPoseEditor\",\n  data() {\n    return {\n      tmpPositionX: 0,\n      tmpPositionY: 0,\n      tmpAngleZ: 0,\n    };\n  },\n  computed: {\n    ...navigationMapState({\n      navigationMapId: (state) => state.mapId,\n      navigationAgvId: (state) => state.agvId,\n    }),\n    ...agvsMapState({\n      agvWebPose(state) {\n        let agv = state.find((a) => a.id === this.navigationAgvId);\n        return agv != null\n          ? agv.webPose\n          : {\n              position: { x: 0, y: 0, z: 0 },\n              orientation: { x: 0, y: 0, z: 0 },\n            };\n      },\n      agvSim1000PoseQuality(state) {\n        let agv = state.find((a) => a.id === this.navigationAgvId);\n        return agv != null ? agv.sim1000Pose.quality : 0;\n      },\n    }),\n    ...agvMapsMapState({\n      agvMapScale(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map != null ? map.webMap.scale : 1;\n      },\n      agvRosMapInfo(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map.rosMap.info;\n      },\n    }),\n    positionX: {\n      get() {\n        return (\n          this.agvRosMapInfo.origin.position.x +\n          (this.agvWebPose.position.x * this.agvRosMapInfo.resolution) /\n            this.agvMapScale\n        ).toFixed(2);\n      },\n      set(val) {\n        this.tmpPositionX = parseFloat(val);\n      },\n    },\n    positionY: {\n      get() {\n        return (\n          this.agvRosMapInfo.origin.position.y -\n          (this.agvWebPose.position.y / this.agvMapScale -\n            this.agvRosMapInfo.height) *\n            this.agvRosMapInfo.resolution\n        ).toFixed(2);\n      },\n      set(val) {\n        this.tmpPositionY = parseFloat(val);\n      },\n    },\n    angleZ: {\n      get: function () {\n        return this.agvWebPose.orientation.z.toFixed(0);\n      },\n      set: function (val) {\n        this.tmpAngleZ = parseFloat(val);\n      },\n    },\n  },\n  methods: {\n    ...agvsmapActions({\n      setAgvDirection: \"setAgvDirection\",\n      setAgvPosition: \"setAgvPosition\",\n    }),\n    updatePosition() {\n      this.setAgvPosition({\n        x:\n          ((this.tmpPositionX - this.agvRosMapInfo.origin.position.x) *\n            this.agvMapScale) /\n          this.agvRosMapInfo.resolution,\n        y:\n          ((this.agvRosMapInfo.origin.position.y - this.tmpPositionY) /\n            this.agvRosMapInfo.resolution +\n            this.agvRosMapInfo.height) *\n          this.agvMapScale,\n        z: 0,\n        agvId: this.navigationAgvId,\n      });\n    },\n    updateAngle() {\n      this.setAgvDirection({\n        x: 0,\n        y: 0,\n        z: this.tmpAngleZ,\n        agvId: this.navigationAgvId,\n      });\n    },\n  },\n  mounted() {\n    this.tmpPositionX = this.positionX;\n    this.tmpPositionY = this.positionY;\n    this.tmpAngleZ = this.angleZ;\n  },\n};\n</script>\n\n<style scoped>\n.pose-input {\n  caret-color: black;\n}\n</style>"]}]}