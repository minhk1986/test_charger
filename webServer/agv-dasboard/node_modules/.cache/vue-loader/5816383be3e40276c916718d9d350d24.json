{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/AgvrEndTaskDirection/AgvrEndTaskDirection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/AgvrEndTaskDirection/AgvrEndTaskDirection.vue","mtime":1609149480232},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7CmNvbnN0IHsgbWFwU3RhdGU6IGFndkpvYnNNYXBTdGF0ZSB9ID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoImFndkpvYnMiKTsKY29uc3QgewogIG1hcFN0YXRlOiBuYXZpZ2F0aW9uTWFwU3RhdGUsCiAgbWFwQWN0aW9uczogbmF2aWdhdGlvbk1hcEFjdGlvbnMsCn0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygibmF2aWdhdGlvbiIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZ3ZyRW5kVGFza0RpcmVjdGlvbiIsCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm5hdmlnYXRpb25NYXBTdGF0ZSh7CiAgICAgIG5hdmlnYXRpb25Kb2JJZDogKHN0YXRlKSA9PiBzdGF0ZS5qb2JJZCwKICAgICAgbmF2aWdhdGlvblRhc2tJZDogKHN0YXRlKSA9PiBzdGF0ZS50YXNrSWQsCiAgICAgIGlzQ29udGV4dE1lbnVTaG93OiAoc3RhdGUpID0+CiAgICAgICAgc3RhdGUudGFza01lbnVDb250ZXh0LmlzU2hvdyB8fAogICAgICAgIHN0YXRlLmFndk1lbnVDb250ZXh0LmlzU2hvdyB8fAogICAgICAgIHN0YXRlLmFndkluaXRQb3NlTWVudUNvbnRleHQuaXNTaG93LAogICAgfSksCiAgICAuLi5hZ3ZKb2JzTWFwU3RhdGUoewogICAgICBhZ3ZUYXNrKHN0YXRlKSB7CiAgICAgICAgbGV0IGpvYiA9IHN0YXRlLmZpbmQoKGopID0+IGouaWQgPT09IHRoaXMubmF2aWdhdGlvbkpvYklkKTsKICAgICAgICBpZiAoam9iID09IG51bGwgfHwgam9iLnRhc2tzLmxlbmd0aCA9PSAwKQogICAgICAgICAgcmV0dXJuIHsgcG9zaXRpb246IHsgeDogMCwgeTogMCwgejogMCB9LCB0aGV0YUVuZDogMCwgaGlkZGVuOiB0cnVlIH07CgogICAgICAgIGxldCB0YXNrID0gam9iLnRhc2tzLmZpbmQoKHQpID0+IHQuaWQgPT09IHRoaXMubmF2aWdhdGlvblRhc2tJZCk7CiAgICAgICAgcmV0dXJuIHRhc2sgIT0gbnVsbCA/IHRhc2sgOiB7IHBvc2l0aW9uOiB7IHg6IDAsIHk6IDAsIHo6IDAgfSwgdGhldGFFbmQ6IDAsIGhpZGRlbjogdHJ1ZSB9OwogICAgICB9LAogICAgfSksCiAgICAKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm5hdmlnYXRpb25NYXBBY3Rpb25zKHsKICAgICAgbmF2aWdhdGlvbkRpc2FibGVNYXBQYW5ab29tOiAiZGlzYWJsZU1hcFBhblpvb20iLAogICAgICBuYXZpZ2F0aW9uU2VsZWN0ZWRUYXNrVGhldGFFbmQ6ICJzZWxlY3RlZFRhc2tUaGV0YUVuZCIsCiAgICB9KSwKICAgIG9uTW91c2VEb3duKCkgewogICAgICBpZiAodGhpcy5pc0NvbnRleHRNZW51U2hvdykgcmV0dXJuOwogICAgICB0aGlzLm5hdmlnYXRpb25EaXNhYmxlTWFwUGFuWm9vbSgpOwogICAgICB0aGlzLm5hdmlnYXRpb25TZWxlY3RlZFRhc2tUaGV0YUVuZCgpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["AgvrEndTaskDirection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AgvrEndTaskDirection.vue","sourceRoot":"src/components/AgvrEndTaskDirection","sourcesContent":["<template>\n  <g :visibility=\"agvTask.hidden ? 'hidden' : 'visible'\">\n    <defs>\n      <marker\n        id=\"arrowhead\"\n        markerWidth=\"3\"\n        markerHeight=\"2\"\n        refX=\"1\"\n        refY=\"1\"\n        orient=\"auto\"\n      >\n        <polygon points=\"0 0, 3 1, 0 2\" style=\"fill: limegreen\" />\n      </marker>\n    </defs>\n    <line\n      :x1=\"agvTask.position.x\"\n      :y1=\"agvTask.position.y\"\n      :x2=\"\n        agvTask.position.x + 50 * Math.cos((agvTask.thetaEnd * Math.PI) / 180)\n      \"\n      :y2=\"\n        agvTask.position.y - 50 * Math.sin((agvTask.thetaEnd * Math.PI) / 180)\n      \"\n      stroke=\"limegreen\"\n      stroke-width=\"10\"\n      marker-end=\"url(#arrowhead)\"\n      @mousedown=\"onMouseDown\"\n      @touchstart=\"onMouseDown\"\n    />\n  </g>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\nconst { mapState: agvJobsMapState } = createNamespacedHelpers(\"agvJobs\");\nconst {\n  mapState: navigationMapState,\n  mapActions: navigationMapActions,\n} = createNamespacedHelpers(\"navigation\");\n\nexport default {\n  name: \"AgvrEndTaskDirection\",\n  computed: {\n    ...navigationMapState({\n      navigationJobId: (state) => state.jobId,\n      navigationTaskId: (state) => state.taskId,\n      isContextMenuShow: (state) =>\n        state.taskMenuContext.isShow ||\n        state.agvMenuContext.isShow ||\n        state.agvInitPoseMenuContext.isShow,\n    }),\n    ...agvJobsMapState({\n      agvTask(state) {\n        let job = state.find((j) => j.id === this.navigationJobId);\n        if (job == null || job.tasks.length == 0)\n          return { position: { x: 0, y: 0, z: 0 }, thetaEnd: 0, hidden: true };\n\n        let task = job.tasks.find((t) => t.id === this.navigationTaskId);\n        return task != null ? task : { position: { x: 0, y: 0, z: 0 }, thetaEnd: 0, hidden: true };\n      },\n    }),\n    \n  },\n  methods: {\n    ...navigationMapActions({\n      navigationDisableMapPanZoom: \"disableMapPanZoom\",\n      navigationSelectedTaskThetaEnd: \"selectedTaskThetaEnd\",\n    }),\n    onMouseDown() {\n      if (this.isContextMenuShow) return;\n      this.navigationDisableMapPanZoom();\n      this.navigationSelectedTaskThetaEnd();\n    },\n  },\n};\n</script>"]}]}