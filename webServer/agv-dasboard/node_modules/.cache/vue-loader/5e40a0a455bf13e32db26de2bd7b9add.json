{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/WayAgvToTaskPosition/WayAgvToTaskPosition.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/WayAgvToTaskPosition/WayAgvToTaskPosition.vue","mtime":1609149482228},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7CmNvbnN0IHsgbWFwU3RhdGU6IGFndnNNYXBTdGF0ZSB9ID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoImFndnMiKTsKY29uc3QgeyBtYXBTdGF0ZTogYWd2Sm9ic01hcFN0YXRlIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiYWd2Sm9icyIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJXYXlBZ3ZUb1Rhc2tQb3NpdGlvbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc2l0aW9uWDE6IDAsCiAgICAgIHBvc2l0aW9uWTE6IDAsCiAgICAgIHBvc2l0aW9uWDI6IDAsCiAgICAgIHBvc2l0aW9uWTI6IDAsCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGFndklkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLmFndnNNYXBTdGF0ZSh7CiAgICAgIGpvYklkKHN0YXRlKSB7CiAgICAgICAgbGV0IGFndiA9IHN0YXRlLmZpbmQoKGEpID0+IGEuaWQgPT09IHRoaXMuYWd2SWQpOwogICAgICAgIHJldHVybiBhZ3YgIT0gbnVsbCA/IGFndi5qb2JJZCA6ICIiOwogICAgICB9LAogICAgICB0YXNrSWQoc3RhdGUpIHsKICAgICAgICBsZXQgYWd2ID0gc3RhdGUuZmluZCgoYSkgPT4gYS5pZCA9PT0gdGhpcy5hZ3ZJZCk7CiAgICAgICAgcmV0dXJuIGFndiAhPSBudWxsID8gYWd2LnRhc2tJZCA6ICIiOwogICAgICB9LAogICAgICBzdGFydFdheVBvaW50KHN0YXRlKSB7CiAgICAgICAgbGV0IGFndiA9IHN0YXRlLmZpbmQoKGEpID0+IGEuaWQgPT09IHRoaXMuYWd2SWQpOwogICAgICAgIHJldHVybiBhZ3YgIT0gbnVsbCA/IGFndi53ZWJQb3NlLnBvc2l0aW9uIDogeyB4OiAwLCB5OiAwLCB6OiAwIH07CiAgICAgIH0sCiAgICB9KSwKICAgIC4uLmFndkpvYnNNYXBTdGF0ZSh7CiAgICAgIGVuZFdheVBvaW50KHN0YXRlKSB7CiAgICAgICAgbGV0IGpvYiA9IHN0YXRlLmZpbmQoKGopID0+IGouaWQgPT09IHRoaXMuam9iSWQpOwogICAgICAgIGlmIChqb2IgPT0gbnVsbCB8fCBqb2IudGFza3MubGVuZ3RoID09IDApIHJldHVybiBudWxsOwogICAgICAgIGxldCB0YXNrID0gam9iLnRhc2tzLmZpbmQoKHQpID0+IHQuaWQgPT09IHRoaXMudGFza0lkKTsKICAgICAgICByZXR1cm4gdGFzayAhPSBudWxsID8gdGFzay5wb3NpdGlvbiA6IGpvYi50YXNrc1swXS5wb3NpdGlvbjsKICAgICAgfSwKICAgIH0pLAogIH0sCiAgd2F0Y2g6IHsKICAgIHN0YXJ0V2F5UG9pbnQodmFsKSB7CiAgICAgIGxldCBwb3NpdGlvbiA9IHsKICAgICAgICB4OiBNYXRoLmZsb29yKHZhbC54KSwKICAgICAgICB5OiBNYXRoLmZsb29yKHZhbC55KSwKICAgICAgfTsKICAgICAgdGhpcy5wb3NpdGlvblgxID0gcG9zaXRpb24ueDsKICAgICAgdGhpcy5wb3NpdGlvblkxID0gcG9zaXRpb24ueTsKICAgICAgaWYgKHRoaXMuZW5kV2F5UG9pbnQgPT0gbnVsbCkgewogICAgICAgIHRoaXMucG9zaXRpb25YMiA9IHBvc2l0aW9uLng7CiAgICAgICAgdGhpcy5wb3NpdGlvblkyID0gcG9zaXRpb24ueTsKICAgICAgfQogICAgfSwKICAgIGVuZFdheVBvaW50KHZhbCkgewogICAgICBpZiAodmFsID09IG51bGwpIHsKICAgICAgICB0aGlzLnBvc2l0aW9uWDIgPSBNYXRoLmZsb29yKHRoaXMuc3RhcnRXYXlQb2ludC54KTsKICAgICAgICB0aGlzLnBvc2l0aW9uWTIgPSBNYXRoLmZsb29yKHRoaXMuc3RhcnRXYXlQb2ludC55KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBvc2l0aW9uWDIgPSBNYXRoLmZsb29yKHZhbC54KTsKICAgICAgICB0aGlzLnBvc2l0aW9uWTIgPSBNYXRoLmZsb29yKHZhbC55KTsKICAgICAgfQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnBvc2l0aW9uWDEgPSBNYXRoLmZsb29yKHRoaXMuc3RhcnRXYXlQb2ludC54KTsKICAgIHRoaXMucG9zaXRpb25ZMSA9IE1hdGguZmxvb3IodGhpcy5zdGFydFdheVBvaW50LnkpOwogICAgaWYgKHRoaXMuZW5kV2F5UG9pbnQgPT0gbnVsbCkgewogICAgICB0aGlzLnBvc2l0aW9uWDIgPSBNYXRoLmZsb29yKHRoaXMuc3RhcnRXYXlQb2ludC54KTsKICAgICAgdGhpcy5wb3NpdGlvblkyID0gTWF0aC5mbG9vcih0aGlzLnN0YXJ0V2F5UG9pbnQueSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBvc2l0aW9uWDIgPSBNYXRoLmZsb29yKHRoaXMuZW5kV2F5UG9pbnQueCk7CiAgICAgIHRoaXMucG9zaXRpb25ZMiA9IE1hdGguZmxvb3IodGhpcy5lbmRXYXlQb2ludC55KTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["WayAgvToTaskPosition.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WayAgvToTaskPosition.vue","sourceRoot":"src/components/WayAgvToTaskPosition","sourcesContent":["<template>\n  <g>\n    <line\n      :x1=\"positionX1\"\n      :y1=\"positionY1\"\n      :x2=\"positionX2\"\n      :y2=\"positionY2\"\n      stroke-dasharray=\"10,5\"\n      style=\"stroke: red; stroke-width: 5\"\n    />\n  </g>\n</template>\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\nconst { mapState: agvsMapState } = createNamespacedHelpers(\"agvs\");\nconst { mapState: agvJobsMapState } = createNamespacedHelpers(\"agvJobs\");\n\nexport default {\n  name: \"WayAgvToTaskPosition\",\n  data() {\n    return {\n      positionX1: 0,\n      positionY1: 0,\n      positionX2: 0,\n      positionY2: 0,\n    };\n  },\n  props: {\n    agvId: {\n      type: String,\n      default: \"\",\n    },\n  },\n  computed: {\n    ...agvsMapState({\n      jobId(state) {\n        let agv = state.find((a) => a.id === this.agvId);\n        return agv != null ? agv.jobId : \"\";\n      },\n      taskId(state) {\n        let agv = state.find((a) => a.id === this.agvId);\n        return agv != null ? agv.taskId : \"\";\n      },\n      startWayPoint(state) {\n        let agv = state.find((a) => a.id === this.agvId);\n        return agv != null ? agv.webPose.position : { x: 0, y: 0, z: 0 };\n      },\n    }),\n    ...agvJobsMapState({\n      endWayPoint(state) {\n        let job = state.find((j) => j.id === this.jobId);\n        if (job == null || job.tasks.length == 0) return null;\n        let task = job.tasks.find((t) => t.id === this.taskId);\n        return task != null ? task.position : job.tasks[0].position;\n      },\n    }),\n  },\n  watch: {\n    startWayPoint(val) {\n      let position = {\n        x: Math.floor(val.x),\n        y: Math.floor(val.y),\n      };\n      this.positionX1 = position.x;\n      this.positionY1 = position.y;\n      if (this.endWayPoint == null) {\n        this.positionX2 = position.x;\n        this.positionY2 = position.y;\n      }\n    },\n    endWayPoint(val) {\n      if (val == null) {\n        this.positionX2 = Math.floor(this.startWayPoint.x);\n        this.positionY2 = Math.floor(this.startWayPoint.y);\n      } else {\n        this.positionX2 = Math.floor(val.x);\n        this.positionY2 = Math.floor(val.y);\n      }\n    },\n  },\n  mounted() {\n    this.positionX1 = Math.floor(this.startWayPoint.x);\n    this.positionY1 = Math.floor(this.startWayPoint.y);\n    if (this.endWayPoint == null) {\n      this.positionX2 = Math.floor(this.startWayPoint.x);\n      this.positionY2 = Math.floor(this.startWayPoint.y);\n    } else {\n      this.positionX2 = Math.floor(this.endWayPoint.x);\n      this.positionY2 = Math.floor(this.endWayPoint.y);\n    }\n  },\n};\n</script>"]}]}