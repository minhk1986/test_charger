{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/AgvNavigation/AgvNavigation/AgvNavigation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/AgvNavigation/AgvNavigation/AgvNavigation.vue","mtime":1609158504275},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/thread-loader/dist/cjs.js","mtime":1602053610301},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IHV1aWQgfSBmcm9tICJ2dWUtdXVpZCI7CmltcG9ydCBBZ3ZyTWFwSW1hZ2UgZnJvbSAiQC9jb21wb25lbnRzL0FndnJNYXBJbWFnZSI7CmltcG9ydCBXYXlBZ3ZUb1Rhc2tQb3NpdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvV2F5QWd2VG9UYXNrUG9zaXRpb24iOwppbXBvcnQgQWd2clJvYm90IGZyb20gIkAvY29tcG9uZW50cy9BZ3ZyUm9ib3QiOwppbXBvcnQgV2F5RnJvbVRhc2tUb1Rhc2sgZnJvbSAiQC9jb21wb25lbnRzL1dheUZyb21UYXNrVG9UYXNrIjsKaW1wb3J0IEFndnJUYXNrc09uTWFwIGZyb20gIkAvY29tcG9uZW50cy9BZ3ZyVGFza3NPbk1hcCI7CmltcG9ydCBBZ3ZyRW5kVGFza0RpcmVjdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvQWd2ckVuZFRhc2tEaXJlY3Rpb24iOwppbXBvcnQgQWd2ckFjdGlvbk1hbmFnZW1lbnQgZnJvbSAiQC9jb21wb25lbnRzL0FndnJBY3Rpb25NYW5hZ2VtZW50IjsKaW1wb3J0IEFndnJKb3lTdGlja0J1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvQWd2ckpveVN0aWNrQnV0dG9uIjsKaW1wb3J0IEFndnJNb3ZlbWVudEJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvQWd2ck1vdmVtZW50QnV0dG9uIjsKaW1wb3J0IEFndnJNYXBTbWFydFBvaW50IGZyb20gIkAvY29tcG9uZW50cy9BZ3ZyTWFwU21hcnRQb2ludCI7CmltcG9ydCB7CiAgQWd2clJvYm90TmF2aWdhdGlvbk1lbnVDb250ZXh0LAogIEFndnJUYXNrTWVudUNvbnRleHQsCn0gZnJvbSAiQC9jb21wb25lbnRzL01lbnVDb250ZXh0cyI7Cgpjb25zdCB7IG1hcFN0YXRlOiBuYXZpZ2F0aW9uTWFwU3RhdGUsIG1hcEFjdGlvbnM6IG5hdmlnYXRpb25NYXBBY3Rpb25zIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygibmF2aWdhdGlvbiIpOwpjb25zdCB7IG1hcFN0YXRlOiBhZ3ZNYXBzTWFwU3RhdGUsIG1hcEdldHRlcnM6IGFndk1hcHNHZXR0ZXJzIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiYWd2TWFwcyIpOwpjb25zdCB7IG1hcEFjdGlvbnM6IGFndkpvYnNNYXBBY3Rpb25zIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiYWd2Sm9icyIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZ3ZOYXZpZ2F0aW9uIiwKICBjb21wb25lbnRzOiB7CiAgICBBZ3ZyUm9ib3QsCiAgICBBZ3ZyRW5kVGFza0RpcmVjdGlvbiwKICAgIEFndnJNYXBJbWFnZSwKICAgIFdheUFndlRvVGFza1Bvc2l0aW9uLAogICAgV2F5RnJvbVRhc2tUb1Rhc2ssCiAgICBBZ3ZyVGFza3NPbk1hcCwKICAgIEFndnJSb2JvdE5hdmlnYXRpb25NZW51Q29udGV4dCwKICAgIEFndnJUYXNrTWVudUNvbnRleHQsCiAgICBBZ3ZyQWN0aW9uTWFuYWdlbWVudCwKICAgIEFndnJKb3lTdGlja0J1dHRvbiwKICAgIEFndnJNb3ZlbWVudEJ1dHRvbiwKICAgIEFndnJNYXBTbWFydFBvaW50LAogIH0sCiAgcHJvcHM6IHsKICAgIG1hcDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiLAogICAgfSwKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBncmFwaGljSUQ6IGBhZ3YtbWFwLXpvb21wYW4tJHt1dWlkLnY0KCl9YCwKICAgIHBhblpvb206IG51bGwsCiAgICB0b3VjaENsaWVudFg6IC0xLAogICAgdG91Y2hDbGllbnRZOiAtMSwKICAgIHNndldpZHRoOiAwLAogICAgc2d2SGVpZ2h0OiAwLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAuLi5uYXZpZ2F0aW9uTWFwU3RhdGUoewogICAgICBuYXZpZ2F0aW9uTWFwSWQ6IChzdGF0ZSkgPT4gc3RhdGUubWFwSWQsCiAgICAgIG5hdmlnYXRpb25Kb2JJZDogKHN0YXRlKSA9PiBzdGF0ZS5qb2JJZCwKICAgICAgbmF2aWdhdGlvblRhc2tJZDogKHN0YXRlKSA9PiBzdGF0ZS50YXNrSWQsCiAgICAgIG5hdmlnYXRpb25BZ3ZJZDogKHN0YXRlKSA9PiBzdGF0ZS5hZ3ZJZCwKICAgICAgbmF2aWdhdGlvbk1hcFBhblpvb21FbmFibGU6IChzdGF0ZSkgPT4gc3RhdGUubWFwUGFuWm9vbUVuYWJsZSwKICAgICAgbmF2aWdhdGlvblNlbGVjdGlvblR5cGU6IChzdGF0ZSkgPT4gc3RhdGUuc2VsZWN0aW9uVHlwZSwKICAgICAgdmlld1dpZHRoOiAoc3RhdGUpID0+IHN0YXRlLnZpZXdXaWR0aCwKICAgICAgdmlld0hlaWdodDogKHN0YXRlKSA9PiBzdGF0ZS52aWV3SGVpZ2h0LAogICAgICBqb3lzdGlja0J1dHRvblN0YXRlOiAoc3RhdGUpID0+IHN0YXRlLmpveXN0aWNrQnV0dG9uLmlzU2hvdywKICAgICAgbW92ZW1lbnRCdXR0b25TdGF0ZTogKHN0YXRlKSA9PiBzdGF0ZS5tb3ZlbWVudEJ1dHRvbi5pc1Nob3csCiAgICB9KSwKICAgIC4uLmFndk1hcHNHZXR0ZXJzKFsKICAgICAgImNvbnZlcnRNYXBQb3NlVG9XZWJQb3NlIgogICAgXSksCiAgICAuLi5hZ3ZNYXBzTWFwU3RhdGUoewogICAgICBhZ3ZNYXBJbWFnZShzdGF0ZSkgewogICAgICAgIGxldCBtYXAgPSBzdGF0ZS5maW5kKChtKSA9PiBtLmlkID09PSB0aGlzLm5hdmlnYXRpb25NYXBJZCk7CiAgICAgICAgcmV0dXJuIG1hcCAhPSBudWxsID8gbWFwLndlYk1hcC5JbWFnZSA6IG51bGw7CiAgICAgIH0sCiAgICAgIGFndklkc09uTWFwKHN0YXRlKSB7CiAgICAgICAgbGV0IG1hcCA9IHN0YXRlLmZpbmQoKG0pID0+IG0uaWQgPT09IHRoaXMubmF2aWdhdGlvbk1hcElkKTsKICAgICAgICByZXR1cm4gbWFwICE9IG51bGwgPyBtYXAuYWd2SWRzIDogW107CiAgICAgIH0sCiAgICAgIGFndkpvYnNJZE9uTWFwKHN0YXRlKSB7CiAgICAgICAgbGV0IG1hcCA9IHN0YXRlLmZpbmQoKG0pID0+IG0uaWQgPT09IHRoaXMubmF2aWdhdGlvbk1hcElkKTsKICAgICAgICByZXR1cm4gbWFwICE9IG51bGwgPyBtYXAuam9iSWRzIDogW107CiAgICAgIH0sCiAgICAgIGFndk1hcFJlc29sdXRpb24oc3RhdGUpIHsKICAgICAgICBsZXQgbWFwID0gc3RhdGUuZmluZCgobSkgPT4gbS5pZCA9PT0gdGhpcy5uYXZpZ2F0aW9uTWFwSWQpOwogICAgICAgIHJldHVybiBtYXAgIT0gbnVsbCA/IG1hcC5yb3NNYXAuaW5mby5yZXNvbHV0aW9uIDogMTsKICAgICAgfSwKICAgICAgYWd2TWFwU2NhbGUoc3RhdGUpIHsKICAgICAgICBsZXQgbWFwID0gc3RhdGUuZmluZCgobSkgPT4gbS5pZCA9PT0gdGhpcy5uYXZpZ2F0aW9uTWFwSWQpOwogICAgICAgIHJldHVybiBtYXAgIT0gbnVsbCA/IG1hcC53ZWJNYXAuc2NhbGUgOiAxOwogICAgICB9LAogICAgICBhZ3ZNYXBTbWFydFBvaW50cyhzdGF0ZSkgewogICAgICAgIGxldCBhZ3ZNYXAgPSBzdGF0ZS5maW5kKChtKSA9PiBtLmlkID09PSB0aGlzLm5hdmlnYXRpb25NYXBJZCk7CgogICAgICAgIHJldHVybiAoYWd2TWFwICE9IG51bGwpID8gYWd2TWFwLnNtYXJ0V2ViUG9pbnRzIDogW107CiAgICAgIH0sCiAgICAgIGFndlJlY3RzKHN0YXRlKSB7CiAgICAgICAgbGV0IGFndk1hcCA9IHN0YXRlLmZpbmQoKG0pID0+IG0uaWQgPT09IHRoaXMubmF2aWdhdGlvbk1hcElkKTsKICAgICAgICBjb25zdCBtYXBJZCA9IHRoaXMubmF2aWdhdGlvbk1hcElkOwoKICAgICAgICByZXR1cm4gKGFndk1hcCAhPSBudWxsKSA/IGFndk1hcC5yZWN0cy5tYXAociA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAuLi5yLAogICAgICAgICAgICAuLi50aGlzLmNvbnZlcnRNYXBQb3NlVG9XZWJQb3NlKHtpZDogbWFwSWQsIHg6IHIueCwgeTogci55LCB3aWR0aDogci53aWR0aCwgaGVpZ2h0OiByLmhlaWdodH0pLAogICAgICAgICAgfQogICAgICAgIH0pIDogW107CiAgICAgIH0KICAgIH0pLAogIH0sCiAgbWV0aG9kczogewogICAgLi4uYWd2Sm9ic01hcEFjdGlvbnMoWwogICAgICAicHVzaFRhc2tUb0pvYiIsCiAgICAgICJtb3ZlVGFza1Bvc2l0aW9uIiwKICAgICAgInNldFRoZXRhRW5kT2ZUYXNrIiwKICAgIF0pLAogICAgLi4ubmF2aWdhdGlvbk1hcEFjdGlvbnMoewogICAgICBuYXZpZ2F0aW9uU3Vic2NyaWJlUG9zZTogInN1YnNjcmliZVBvc2UiLAogICAgICBuYXZpZ2F0aW9uVW5zdWJzY3JpYmVQb3NlOiAidW5zdWJzY3JpYmVQb3NlIiwKICAgIH0pLAogICAgb25QYW5ab29tRG91YmxlQ2xpY2soZSkgewogICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5wYW5ab29tLmdldFRyYW5zZm9ybSgpOwogICAgICBsZXQgZGVzUG9pbnQgPSB7CiAgICAgICAgeDogKGUubGF5ZXJYIC0gdHJhbnNmb3JtLngpIC8gdHJhbnNmb3JtLnNjYWxlLAogICAgICAgIHk6IChlLmxheWVyWSAtIHRyYW5zZm9ybS55KSAvIHRyYW5zZm9ybS5zY2FsZSwKICAgICAgfTsKCiAgICAgIHRoaXMucHVzaFRhc2tUb0pvYih7CiAgICAgICAgam9iSWQ6IHRoaXMubmF2aWdhdGlvbkpvYklkLAogICAgICAgIHg6IGRlc1BvaW50LngsCiAgICAgICAgeTogZGVzUG9pbnQueSwKICAgICAgfSk7CiAgICB9LAogICAgb25Jbml0Wm9vbVBhbihlKSB7CiAgICAgIHRoaXMucGFuWm9vbSA9IGU7CiAgICB9LAogICAgb25Nb3VzZU1vdmUoZSkgewogICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5wYW5ab29tLmdldFRyYW5zZm9ybSgpOwogICAgICBzd2l0Y2ggKHRoaXMubmF2aWdhdGlvblNlbGVjdGlvblR5cGUpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLm1vdmVUYXNrUG9zaXRpb24oewogICAgICAgICAgICBqb2JJZDogdGhpcy5uYXZpZ2F0aW9uSm9iSWQsCiAgICAgICAgICAgIHRhc2tJZDogdGhpcy5uYXZpZ2F0aW9uVGFza0lkLAogICAgICAgICAgICBtb3ZlbWVudFg6IGUubW92ZW1lbnRYIC8gdHJhbnNmb3JtLnNjYWxlLAogICAgICAgICAgICBtb3ZlbWVudFk6IGUubW92ZW1lbnRZIC8gdHJhbnNmb3JtLnNjYWxlLAogICAgICAgICAgICBzbWFydFBvaW50czogdGhpcy5hZ3ZNYXBTbWFydFBvaW50cywKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5zZXRUaGV0YUVuZE9mVGFzayh7CiAgICAgICAgICAgIGpvYklkOiB0aGlzLm5hdmlnYXRpb25Kb2JJZCwKICAgICAgICAgICAgdGFza0lkOiB0aGlzLm5hdmlnYXRpb25UYXNrSWQsCiAgICAgICAgICAgIG1vdXNlOiB7CiAgICAgICAgICAgICAgeDogKGUubGF5ZXJYIC0gdHJhbnNmb3JtLngpIC8gdHJhbnNmb3JtLnNjYWxlLAogICAgICAgICAgICAgIHk6IChlLmxheWVyWSAtIHRyYW5zZm9ybS55KSAvIHRyYW5zZm9ybS5zY2FsZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBvblRvdWNoU3RhcnQoZSkgewogICAgICBsZXQgdG91Y2ggPSBlLmNoYW5nZWRUb3VjaGVzWzBdOwogICAgICB0aGlzLnRvdWNoQ2xpZW50WCA9IHRvdWNoLmNsaWVudFg7CiAgICAgIHRoaXMudG91Y2hDbGllbnRZID0gdG91Y2guY2xpZW50WTsKICAgIH0sCiAgICBvblRvdWNoRW5kKCkgewogICAgICB0aGlzLnRvdWNoQ2xpZW50WCA9IC0xOwogICAgICB0aGlzLnRvdWNoQ2xpZW50WSA9IC0xOwogICAgfSwKICAgIG9uVG91Y2hNb3ZlKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy50b3VjaENsaWVudFggPiAwICYmIHRoaXMudG91Y2hDbGllbnRZID4gMCkgewogICAgICAgIGxldCB0b3VjaCA9IGUuY2hhbmdlZFRvdWNoZXNbMF07CiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZSh7CiAgICAgICAgICBtb3ZlbWVudFg6IHRvdWNoLmNsaWVudFggLSB0aGlzLnRvdWNoQ2xpZW50WCwKICAgICAgICAgIG1vdmVtZW50WTogdG91Y2guY2xpZW50WSAtIHRoaXMudG91Y2hDbGllbnRZLAogICAgICAgICAgbGF5ZXJYOiB0b3VjaC5jbGllbnRYLAogICAgICAgICAgbGF5ZXJZOiB0b3VjaC5jbGllbnRZLAogICAgICAgIH0pOwoKICAgICAgICB0aGlzLnRvdWNoQ2xpZW50WCA9IHRvdWNoLmNsaWVudFg7CiAgICAgICAgdGhpcy50b3VjaENsaWVudFkgPSB0b3VjaC5jbGllbnRZOwogICAgICB9CiAgICB9LAogICAgb25Db250ZXh0TWVudShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgbmF2aWdhdGlvbk1hcFBhblpvb21FbmFibGUodmFsKSB7CiAgICAgIGlmICh2YWwpIHsKICAgICAgICBpZiAodGhpcy5wYW5ab29tLmlzUGF1c2VkKCkpIHsKICAgICAgICAgIHRoaXMucGFuWm9vbS5yZXN1bWUoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLnBhblpvb20uaXNQYXVzZWQoKSkgewogICAgICAgICAgdGhpcy5wYW5ab29tLnBhdXNlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYWd2TWFwSW1hZ2UodmFsKSB7CiAgICAgIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLnNndldpZHRoID0gdmFsLndpZHRoOwogICAgICB0aGlzLnNndkhlaWdodCA9IHZhbC5oZWlnaHQ7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubmF2aWdhdGlvblN1YnNjcmliZVBvc2UoKTsKICAgIGlmICh0aGlzLmFndk1hcEltYWdlICE9IG51bGwpIHsKICAgICAgdGhpcy5zZ3ZXaWR0aCA9IHRoaXMuYWd2TWFwSW1hZ2Uud2lkdGg7CiAgICAgIHRoaXMuc2d2SGVpZ2h0ID0gdGhpcy5hZ3ZNYXBJbWFnZS5oZWlnaHQ7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCl7CiAgICB0aGlzLm5hdmlnYXRpb25VbnN1YnNjcmliZVBvc2UoKTsKICB9Cn07Cg=="},{"version":3,"sources":["AgvNavigation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AgvNavigation.vue","sourceRoot":"src/components/AgvNavigation/AgvNavigation","sourcesContent":["<template>\n  <v-container fluid class=\"pa-0 agv-navigation\">\n    <panZoom\n      class=\"panzoom-map-viewer\"\n      :selector=\"`#${graphicID}`\"\n      :options=\"{\n        minZoom: 0.1,\n        maxZoom: 5,\n        zoomSpeed: 0.05,\n        zoomDoubleClickSpeed: 1,\n        onDoubleClick: onPanZoomDoubleClick,\n        autocenter: true,\n      }\"\n      @init=\"onInitZoomPan\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"map-viewer-svg\"\n        :height=\"(agvMapImage == null || viewHeight > agvMapImage.height) ? viewHeight : agvMapImage.height\"\n        :width=\"(agvMapImage == null || viewWidth > agvMapImage.width) ? viewWidth : agvMapImage.width\"\n        :id=\"graphicID\"\n        @mousemove=\"onMouseMove\"\n        @contextmenu=\"onContextMenu\"\n      >\n        <g\n          @touchstart=\"onTouchStart\"\n          @touchmove=\"onTouchMove\"\n          @touchend=\"onTouchEnd\"\n        >\n          <AgvrMapImage :mapId=\"navigationMapId\" />\n          <g>\n            <rect v-for=\"(r, index) in agvRects\" :key=\"`rect-map-${index}`\" :x=\"r.x - r.width / 2\" :y=\"r.y - r.height / 2\" :width=\"r.width\" :height=\"r.height\" :style=\"r.style\" />\n          </g>\n          <AgvrMapSmartPoint :mapId=\"navigationMapId\" />\n\n          <WayFromTaskToTask\n            v-for=\"jobId in agvJobsIdOnMap\"\n            :key=\"`line-des-${jobId}`\"\n            :jobId=\"jobId\"\n          />\n          \n          <WayAgvToTaskPosition\n            v-for=\"agvId in agvIdsOnMap\"\n            :key=\"`way-from-agv-to-task-${agvId}`\"\n            :agvId=\"agvId\"\n          />\n\n          <AgvrEndTaskDirection />\n\n          <AgvrTasksOnMap\n            v-for=\"jobId in agvJobsIdOnMap\"\n            :key=\"`agv-task-${jobId}`\"\n            :jobId=\"jobId\"\n          />\n\n          <AgvrRobot\n            v-for=\"agvId in agvIdsOnMap\"\n            :key=\"`agv-${agvId}`\"\n            :agvId=\"agvId\"\n            :agvMapResolution=\"agvMapResolution\"\n            :agvMapScale=\"agvMapScale\"\n          />\n        </g>\n      </svg>\n    </panZoom>\n    <AgvrRobotNavigationMenuContext />\n    <AgvrTaskMenuContext />\n    <AgvrActionManagement :jobId=\"navigationJobId\" :taskId=\"navigationTaskId\" />\n    <span v-if=\"joystickButtonState\" class=\"joystick\">\n      <AgvrJoyStickButton />\n    </span>\n    <span v-if=\"movementButtonState\" class=\"movement\">\n      <AgvrMovementButton />\n    </span>\n  </v-container>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\nimport { uuid } from \"vue-uuid\";\nimport AgvrMapImage from \"@/components/AgvrMapImage\";\nimport WayAgvToTaskPosition from \"@/components/WayAgvToTaskPosition\";\nimport AgvrRobot from \"@/components/AgvrRobot\";\nimport WayFromTaskToTask from \"@/components/WayFromTaskToTask\";\nimport AgvrTasksOnMap from \"@/components/AgvrTasksOnMap\";\nimport AgvrEndTaskDirection from \"@/components/AgvrEndTaskDirection\";\nimport AgvrActionManagement from \"@/components/AgvrActionManagement\";\nimport AgvrJoyStickButton from \"@/components/AgvrJoyStickButton\";\nimport AgvrMovementButton from \"@/components/AgvrMovementButton\";\nimport AgvrMapSmartPoint from \"@/components/AgvrMapSmartPoint\";\nimport {\n  AgvrRobotNavigationMenuContext,\n  AgvrTaskMenuContext,\n} from \"@/components/MenuContexts\";\n\nconst { mapState: navigationMapState, mapActions: navigationMapActions } = createNamespacedHelpers(\"navigation\");\nconst { mapState: agvMapsMapState, mapGetters: agvMapsGetters } = createNamespacedHelpers(\"agvMaps\");\nconst { mapActions: agvJobsMapActions } = createNamespacedHelpers(\"agvJobs\");\n\nexport default {\n  name: \"AgvNavigation\",\n  components: {\n    AgvrRobot,\n    AgvrEndTaskDirection,\n    AgvrMapImage,\n    WayAgvToTaskPosition,\n    WayFromTaskToTask,\n    AgvrTasksOnMap,\n    AgvrRobotNavigationMenuContext,\n    AgvrTaskMenuContext,\n    AgvrActionManagement,\n    AgvrJoyStickButton,\n    AgvrMovementButton,\n    AgvrMapSmartPoint,\n  },\n  props: {\n    map: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data: () => ({\n    graphicID: `agv-map-zoompan-${uuid.v4()}`,\n    panZoom: null,\n    touchClientX: -1,\n    touchClientY: -1,\n    sgvWidth: 0,\n    sgvHeight: 0,\n  }),\n  computed: {\n    ...navigationMapState({\n      navigationMapId: (state) => state.mapId,\n      navigationJobId: (state) => state.jobId,\n      navigationTaskId: (state) => state.taskId,\n      navigationAgvId: (state) => state.agvId,\n      navigationMapPanZoomEnable: (state) => state.mapPanZoomEnable,\n      navigationSelectionType: (state) => state.selectionType,\n      viewWidth: (state) => state.viewWidth,\n      viewHeight: (state) => state.viewHeight,\n      joystickButtonState: (state) => state.joystickButton.isShow,\n      movementButtonState: (state) => state.movementButton.isShow,\n    }),\n    ...agvMapsGetters([\n      \"convertMapPoseToWebPose\"\n    ]),\n    ...agvMapsMapState({\n      agvMapImage(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map != null ? map.webMap.Image : null;\n      },\n      agvIdsOnMap(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map != null ? map.agvIds : [];\n      },\n      agvJobsIdOnMap(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map != null ? map.jobIds : [];\n      },\n      agvMapResolution(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map != null ? map.rosMap.info.resolution : 1;\n      },\n      agvMapScale(state) {\n        let map = state.find((m) => m.id === this.navigationMapId);\n        return map != null ? map.webMap.scale : 1;\n      },\n      agvMapSmartPoints(state) {\n        let agvMap = state.find((m) => m.id === this.navigationMapId);\n\n        return (agvMap != null) ? agvMap.smartWebPoints : [];\n      },\n      agvRects(state) {\n        let agvMap = state.find((m) => m.id === this.navigationMapId);\n        const mapId = this.navigationMapId;\n\n        return (agvMap != null) ? agvMap.rects.map(r => {\n          return {\n            ...r,\n            ...this.convertMapPoseToWebPose({id: mapId, x: r.x, y: r.y, width: r.width, height: r.height}),\n          }\n        }) : [];\n      }\n    }),\n  },\n  methods: {\n    ...agvJobsMapActions([\n      \"pushTaskToJob\",\n      \"moveTaskPosition\",\n      \"setThetaEndOfTask\",\n    ]),\n    ...navigationMapActions({\n      navigationSubscribePose: \"subscribePose\",\n      navigationUnsubscribePose: \"unsubscribePose\",\n    }),\n    onPanZoomDoubleClick(e) {\n      let transform = this.panZoom.getTransform();\n      let desPoint = {\n        x: (e.layerX - transform.x) / transform.scale,\n        y: (e.layerY - transform.y) / transform.scale,\n      };\n\n      this.pushTaskToJob({\n        jobId: this.navigationJobId,\n        x: desPoint.x,\n        y: desPoint.y,\n      });\n    },\n    onInitZoomPan(e) {\n      this.panZoom = e;\n    },\n    onMouseMove(e) {\n      let transform = this.panZoom.getTransform();\n      switch (this.navigationSelectionType) {\n        case 1:\n          this.moveTaskPosition({\n            jobId: this.navigationJobId,\n            taskId: this.navigationTaskId,\n            movementX: e.movementX / transform.scale,\n            movementY: e.movementY / transform.scale,\n            smartPoints: this.agvMapSmartPoints,\n          });\n          break;\n        case 2:\n          this.setThetaEndOfTask({\n            jobId: this.navigationJobId,\n            taskId: this.navigationTaskId,\n            mouse: {\n              x: (e.layerX - transform.x) / transform.scale,\n              y: (e.layerY - transform.y) / transform.scale,\n            },\n          });\n          break;\n      }\n    },\n    onTouchStart(e) {\n      let touch = e.changedTouches[0];\n      this.touchClientX = touch.clientX;\n      this.touchClientY = touch.clientY;\n    },\n    onTouchEnd() {\n      this.touchClientX = -1;\n      this.touchClientY = -1;\n    },\n    onTouchMove(e) {\n      e.preventDefault();\n      if (this.touchClientX > 0 && this.touchClientY > 0) {\n        let touch = e.changedTouches[0];\n        this.onMouseMove({\n          movementX: touch.clientX - this.touchClientX,\n          movementY: touch.clientY - this.touchClientY,\n          layerX: touch.clientX,\n          layerY: touch.clientY,\n        });\n\n        this.touchClientX = touch.clientX;\n        this.touchClientY = touch.clientY;\n      }\n    },\n    onContextMenu(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n  },\n  watch: {\n    navigationMapPanZoomEnable(val) {\n      if (val) {\n        if (this.panZoom.isPaused()) {\n          this.panZoom.resume();\n        }\n      } else {\n        if (!this.panZoom.isPaused()) {\n          this.panZoom.pause();\n        }\n      }\n    },\n    agvMapImage(val) {\n      if (val == null) return;\n      this.sgvWidth = val.width;\n      this.sgvHeight = val.height;\n    },\n  },\n  mounted() {\n    this.navigationSubscribePose();\n    if (this.agvMapImage != null) {\n      this.sgvWidth = this.agvMapImage.width;\n      this.sgvHeight = this.agvMapImage.height;\n    }\n  },\n  beforeDestroy(){\n    this.navigationUnsubscribePose();\n  }\n};\n</script>\n\n<style scoped>\n.panzoom-map-viewer {\n  border: none;\n  width: 100%;\n  height: 100%;\n}\n.map-viewer-svg {\n  position: relative;\n}\n.agv-navigation .joystick {\n  position: absolute;\n  bottom: 4px;\n  left: 4px;\n}\n.agv-navigation .movement {\n  position: absolute;\n  bottom: 4px;\n  right: 4px;\n}\n</style>\n"]}]}