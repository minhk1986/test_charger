{"remainingRequest":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/robotics/AnhNV/agv-dasboard/src/components/AgvrMapImage/AgvrMapImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/robotics/AnhNV/agv-dasboard/src/components/AgvrMapImage/AgvrMapImage.vue","mtime":1609149480464},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/babel-loader/lib/index.js","mtime":1602053610019},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/cache-loader/dist/cjs.js","mtime":1602053610278},{"path":"/home/robotics/AnhNV/agv-dasboard/node_modules/vue-loader/lib/index.js","mtime":1602053621134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7Cgpjb25zdCB7IG1hcFN0YXRlOiBhZ3ZNYXBzU3RhdGUgfSA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCJhZ3ZNYXBzIik7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFndnJNYXBJbWFnZSIsCiAgcHJvcHM6IHsKICAgIG1hcElkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIG1hcENhbnZhczogbnVsbCwKICAgIHdpZHRoOiAwLAogICAgaGVpZ2h0OiAwLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAuLi5hZ3ZNYXBzU3RhdGUoewogICAgICBhZ3ZNYXBJbWFnZShzdGF0ZSkgewogICAgICAgIGxldCBhZ3ZNYXAgPSBzdGF0ZS5maW5kKChtKSA9PiBtLmlkID09PSB0aGlzLm1hcElkKTsKICAgICAgICByZXR1cm4gYWd2TWFwICE9IG51bGwgPyBhZ3ZNYXAud2ViTWFwLkltYWdlIDogbnVsbDsKICAgICAgfSwKICAgIH0pLAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubWFwQ2FudmFzID0gdGhpcy4kcmVmcy5tYXBJbWFnZVJlZjsKICAgIHRoaXMuc2V0TWFwSW1hZ2UoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldE1hcEltYWdlKCkgewogICAgICBsZXQgbWFwSW1hZ2UgPSB0aGlzLmFndk1hcEltYWdlOwogICAgICBpZiAobWFwSW1hZ2UgPT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLndpZHRoID0gbWFwSW1hZ2Uud2lkdGg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gbWFwSW1hZ2UuaGVpZ2h0OwogICAgICB0aGlzLm1hcENhbnZhcy53aWR0aCA9IG1hcEltYWdlLndpZHRoOwogICAgICB0aGlzLm1hcENhbnZhcy5oZWlnaHQgPSBtYXBJbWFnZS5oZWlnaHQ7CiAgICAgIGxldCBjdHggPSB0aGlzLm1hcENhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICBsZXQgaW1hZ2VEYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YShtYXBJbWFnZS53aWR0aCwgbWFwSW1hZ2UuaGVpZ2h0KTsKICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KG1hcEltYWdlLmRhdGEpOwogICAgICBjdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGFndk1hcEltYWdlKCkgewogICAgICB0aGlzLnNldE1hcEltYWdlKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["AgvrMapImage.vue"],"names":[],"mappings":";;;;;;;AAOA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AgvrMapImage.vue","sourceRoot":"src/components/AgvrMapImage","sourcesContent":["<template>\n  <foreignObject class=\"panzoom-map-image\" :width=\"width\" :height=\"height\">\n    <canvas ref=\"mapImageRef\" />\n  </foreignObject>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\n\nconst { mapState: agvMapsState } = createNamespacedHelpers(\"agvMaps\");\n\nexport default {\n  name: \"AgvrMapImage\",\n  props: {\n    mapId: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data: () => ({\n    mapCanvas: null,\n    width: 0,\n    height: 0,\n  }),\n  computed: {\n    ...agvMapsState({\n      agvMapImage(state) {\n        let agvMap = state.find((m) => m.id === this.mapId);\n        return agvMap != null ? agvMap.webMap.Image : null;\n      },\n    }),\n  },\n  mounted() {\n    this.mapCanvas = this.$refs.mapImageRef;\n    this.setMapImage();\n  },\n  methods: {\n    setMapImage() {\n      let mapImage = this.agvMapImage;\n      if (mapImage == null) return;\n      this.width = mapImage.width;\n      this.height = mapImage.height;\n      this.mapCanvas.width = mapImage.width;\n      this.mapCanvas.height = mapImage.height;\n      let ctx = this.mapCanvas.getContext(\"2d\");\n      let imageData = ctx.createImageData(mapImage.width, mapImage.height);\n      imageData.data.set(mapImage.data);\n      ctx.putImageData(imageData, 0, 0);\n    },\n  },\n  watch: {\n    agvMapImage() {\n      this.setMapImage();\n    },\n  },\n};\n</script>\n<style scoped>\n.panzoom-map-image {\n  z-index: -1;\n  position: relative;\n}\n</style>"]}]}