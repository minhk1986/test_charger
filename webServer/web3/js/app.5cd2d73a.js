(function(t){function e(e){for(var i,s,r=e[0],c=e[1],u=e[2],v=0,d=[];v<r.length;v++)s=r[v],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"06f1":function(t,e,n){t.exports=n.p+"img/logo-white.750c4188.png"},"07b1":function(t,e,n){"use strict";var i=n("666d"),a=n.n(i);a.a},"097f":function(t,e,n){},"180a":function(t,e,n){},2231:function(t,e,n){},"24e9":function(t,e,n){t.exports=n.p+"img/add.61b23216.svg"},3966:function(t,e,n){t.exports=n.p+"img/1.b86deea9.jpg"},3980:function(t,e,n){"use strict";var i=n("c0f4"),a=n.n(i);a.a},"415e":function(t,e,n){"use strict";var i=n("6596"),a=n.n(i);a.a},4456:function(t,e,n){t.exports=n.p+"img/6.5c407d14.jpg"},"44e8":function(t,e,n){t.exports=n.p+"img/5.cbfa247f.jpg"},"4b86":function(t,e,n){},"54eb":function(t,e,n){"use strict";var i=n("4b86"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},o=[],s={name:"App"},r=s,c=n("2877"),u=Object(c["a"])(r,a,o,!1,null,null,null),l=u.exports,v=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},h=[],p={name:"AGV-DASHBOARD-LAYOUT"},m=p,g=Object(c["a"])(m,d,h,!1,null,null,null),f=g.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("router-view")],1)],1)},y=[],x={name:"LOGIN-LAYOUT"},k=x,w=n("6544"),M=n.n(w),I=n("7496"),S=n("f6c4"),j=Object(c["a"])(k,b,y,!1,null,null,null),C=j.exports;M()(j,{VApp:I["a"],VMain:S["a"]});var O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("AppBar"),n("NavigationMenu"),n("v-main",[n("router-view")],1),n("AppFooter"),n("notifications",{staticClass:"notifications",attrs:{position:"top right",group:"ros"}})],1)},T=[],P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{color:"primary",dark:"",app:"",flat:"",dense:""}},[n("v-app-bar-nav-icon",{on:{click:function(){return t.toggleNavigationMenu(!0)}}}),n("v-toolbar-title",{staticClass:"noselect"},[t._v("AGV ROBOTICS")]),n("v-spacer"),n("v-badge",{staticClass:"mt-2",attrs:{color:t.rosConnectColor,icon:t.rosConnectIcon,overlap:""}},[n("v-icon",{attrs:{large:""},domProps:{textContent:t._s("mdi-robot-mower")}})],1)],1)},A=[],_=(n("7db0"),n("5530")),V=n("2f62"),L=Object(V["a"])("dashboard"),R=L.mapActions,W=Object(V["a"])("navigation"),D=W.mapState,E=Object(V["a"])("agvs"),J=E.mapState,z={name:"AppBar",data:function(){return{rosConnectIcon:"mdi-close",rosConnectColor:"red darken-1"}},methods:Object(_["a"])({},R({toggleNavigationMenu:"toggleNavigationMenu"})),computed:Object(_["a"])(Object(_["a"])({},D({navigationAgvId:function(t){return t.agvId}})),J({isRosConnected:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n&&n.rosConntectionState}})),mounted:function(){this.isRosConnected?(this.rosConnectIcon="mdi-check",this.rosConnectColor="green darken-1"):(this.rosConnectIcon="mdi-close",this.rosConnectColor="red darken-1")},watch:{isRosConnected:function(t){t?(this.rosConnectIcon="mdi-check",this.rosConnectColor="green darken-1"):(this.rosConnectIcon="mdi-close",this.rosConnectColor="red darken-1")}}},Y=z,B=n("40dc"),X=n("5bc1"),Z=n("4ca6"),H=n("132d"),$=n("2fa4"),N=n("2a7f"),F=Object(c["a"])(Y,P,A,!1,null,null,null),U=F.exports;M()(F,{VAppBar:B["a"],VAppBarNavIcon:X["a"],VBadge:Z["a"],VIcon:H["a"],VSpacer:$["a"],VToolbarTitle:N["a"]});var G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.showNavigationMenu,callback:function(e){t.showNavigationMenu=e},expression:"showNavigationMenu"}},[n("v-list",[n("v-list-item",{attrs:{"two-line":""}},[n("v-img",{attrs:{src:"http://prati.com.vn/wp-content/uploads/2018/09/LogoPRATI_Home_En.png"}})],1),n("v-divider"),t._l(t.nanigationMenu,(function(e){return n("v-list-item",{key:e.title,attrs:{link:"",to:e.to}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}))],2)],1)},q=[],Q=Object(V["a"])("dashboard"),K=Q.mapState,tt=Q.mapActions,et={name:"NavigationMenu",methods:Object(_["a"])({},tt(["toggleNavigationMenu"])),computed:Object(_["a"])(Object(_["a"])({},K({isShowNavigationMenu:function(t){return t.isShowNavigationMenu},nanigationMenu:function(t){return t.navigationMenu}})),{},{showNavigationMenu:{get:function(){return this.isShowNavigationMenu},set:function(t){t!=this.isShowNavigationMenu&&this.toggleNavigationMenu(t)}}})},nt=et,it=n("ce7e"),at=n("adda"),ot=n("8860"),st=n("da13"),rt=n("5d23"),ct=n("34c3"),ut=n("f774"),lt=Object(c["a"])(nt,G,q,!1,null,null,null),vt=lt.exports;M()(lt,{VDivider:it["a"],VIcon:H["a"],VImg:at["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:rt["a"],VListItemIcon:ct["a"],VListItemTitle:rt["b"],VNavigationDrawer:ut["a"]});var dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{padless:""}},[n("v-col",{staticClass:"text-center noselect",attrs:{cols:"12"}},[t._v("2020 - ROBOTICS TEAM")])],1)},ht=[],pt={name:"AppFooter"},mt=pt,gt=n("62ad"),ft=n("553a"),bt=Object(c["a"])(mt,dt,ht,!1,null,null,null),yt=bt.exports;M()(bt,{VCol:gt["a"],VFooter:ft["a"]});var xt={name:"DASHBOARD-LAYOUT",components:{AppBar:U,NavigationMenu:vt,AppFooter:yt}},kt=xt,wt=(n("a5a4"),Object(c["a"])(kt,O,T,!1,null,"384893dd",null)),Mt=wt.exports;M()(wt,{VApp:I["a"],VMain:S["a"]});var It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("router-view")],1)],1)},St=[],jt={name:"LOGOUT-LAYOUT"},Ct=jt,Ot=Object(c["a"])(Ct,It,St,!1,null,null,null),Tt=Ot.exports;M()(Ot,{VApp:I["a"],VMain:S["a"]});var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{ref:"containerCarousel",staticClass:"fill-height pa-0",attrs:{fluid:""}},[n("v-carousel",{attrs:{height:t.carouselheight+"px"},model:{value:t.imageModel,callback:function(e){t.imageModel=e},expression:"imageModel"}},t._l(t.images,(function(t,e){return n("v-carousel-item",{key:e,staticClass:"carousel-item-image",attrs:{src:t.src,"reverse-transition":"fade-transition",transition:"fade-transition"}})})),1)],1)},At=[],_t={name:"IntroduceView",data:function(){return{imageModel:0,carouselheight:0,images:[{src:n("3966")},{src:n("69fa")},{src:n("c959")},{src:n("a598")},{src:n("44e8")},{src:n("4456")}]}},mounted:function(){this.carouselheight=this.$refs.containerCarousel.offsetHeight,this.$refs.containerCarousel.addEventListener("resize",(function(t){console.log(t)}))}},Vt=_t,Lt=(n("a9bd"),n("5e66")),Rt=n("3e35"),Wt=n("a523"),Dt=Object(c["a"])(Vt,Pt,At,!1,null,null,null),Et=Dt.exports;M()(Dt,{VCarousel:Lt["a"],VCarouselItem:Rt["a"],VContainer:Wt["a"]});var Jt=[{path:"",component:Et,meta:{title:"Introduce"}}],zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Login form")]),n("v-spacer")],1),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"mdi-account",type:"text"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),n("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-card-subtitle",{staticClass:"red--text",domProps:{textContent:t._s(t.message)}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)],1)],1)},Yt=[],Bt=Object(V["a"])("account"),Xt=Bt.mapActions,Zt={name:"LoginView",data:function(){return{user:"",password:"",message:""}},methods:Object(_["a"])(Object(_["a"])({},Xt(["setToken"])),{},{login:function(){"robotics"===this.user&&"robotics2020"===this.password?(this.setToken("robotics"),this.$router.push("/")):(this.password="",this.message="User or password not match")}})},Ht=Zt,$t=n("8336"),Nt=n("b0af"),Ft=n("99d9"),Ut=n("4bd4"),Gt=n("0fd9"),qt=n("8654"),Qt=n("71d9"),Kt=Object(c["a"])(Ht,zt,Yt,!1,null,null,null),te=Kt.exports;M()(Kt,{VBtn:$t["a"],VCard:Nt["a"],VCardActions:Ft["a"],VCardSubtitle:Ft["b"],VCardText:Ft["c"],VCol:gt["a"],VContainer:Wt["a"],VForm:Ut["a"],VRow:Gt["a"],VSpacer:$["a"],VTextField:qt["a"],VToolbar:Qt["a"],VToolbarTitle:N["a"]});var ee=[{path:"",component:te,meta:{title:"Login"}}],ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Logout")])],1),n("v-card-text",[n("v-form")],1),n("v-card-actions",[n("v-spacer"),n("router-link",{attrs:{to:"/login"}},[n("v-btn",{attrs:{color:"primary"}},[t._v("Login")])],1),n("v-spacer")],1)],1)],1)],1)],1)},ie=[],ae=Object(V["a"])("account"),oe=ae.mapActions,se={name:"LogoutView",methods:Object(_["a"])({},oe(["setToken"])),mounted:function(){this.setToken(null)}},re=se,ce=Object(c["a"])(re,ne,ie,!1,null,null,null),ue=ce.exports;M()(ce,{VBtn:$t["a"],VCard:Nt["a"],VCardActions:Ft["a"],VCardText:Ft["c"],VCol:gt["a"],VContainer:Wt["a"],VForm:Ut["a"],VRow:Gt["a"],VSpacer:$["a"],VToolbar:Qt["a"],VToolbarTitle:N["a"]});var le=[{path:"",component:ue,meta:{title:"Logout"}}],ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"3",xl:"3"}},[n("AgvrBattery")],1),n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"3",xl:"3"}},[n("AgvrSignalStrength")],1)],1)],1),n("v-row",[n("v-col",[n("AgvrStatusDevices")],1)],1)],1)},de=[],he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{elevation:"6"}},[n("v-card-title",[t._v("Status devices")]),n("v-data-table",{attrs:{headers:t.headers,items:t.statusDevices,"items-per-page":5,search:t.search,"loading-text":"Loading... Please wait",loading:t.isLoading},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-row",{attrs:{"no-gutters":""}},[n("v-spacer"),n("v-col",{attrs:{xs:"12",sm:"8",md:"6",lg:"4"}},[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)]},proxy:!0},{key:"item.name",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{color:t.getColorLevel(i.level)},domProps:{textContent:t._s(t.getIconLevel(i.level))}}),n("span",[t._v(t._s(i.name))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{color:t.getColorLevel(i.level)},on:{click:function(){return t.viewValues(i)}}},[t._v(" mdi-view-list-outline ")])]}}],null,!0)})],1),n("v-dialog",{attrs:{"max-width":"800"},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}},[n("v-card",[n("v-card-title",{class:"headline white--text "+t.getColorLevel(t.dialogItem.level)},[t._v(" "+t._s(t.dialogItem.name)+" ")]),n("v-card-subtitle",{class:"py-2 white--text "+t.getColorLevel(t.dialogItem.level)},[t._v(t._s(t.dialogItem.hardware_id))]),n("v-card-text",[t._v(t._s(t.dialogItem.message))]),n("v-simple-table",{staticClass:"mt-2",attrs:{height:"400px"}},[n("tbody",t._l(t.dialogItem.values,(function(e){return n("tr",{key:e.name},[n("td",[t._v(t._s(e.key))]),n("td",[t._v(t._s(e.value))])])})),0)])],1)],1)],1)},pe=[],me=Object(V["a"])("navigation"),ge=me.mapState,fe=Object(V["a"])("agvs"),be=fe.mapState,ye={name:"AgvrStatusDevices",data:function(){return{search:"",isLoading:!0,headers:[{text:"Componet",value:"name"},{text:"Hardware ID",value:"hardware_id"},{text:"Message",value:"message"},{text:"",value:"actions",sortable:!1,width:50}],dialogShow:!1,dialogItem:{level:0,name:"",message:"",hardware_id:"",values:[]}}},computed:Object(_["a"])(Object(_["a"])({},ge({navigationAgvId:function(t){return t.agvId}})),be({statusDevices:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.statusDevices:[]}})),mounted:function(){null!=this.statusDevices&&this.statusDevices.length>0&&(this.isLoading=!1)},methods:{viewValues:function(t){this.dialogItem=t,this.dialogShow=!0},getColorLevel:function(t){switch(t){case 0:return"green darken-1";case 1:return"amber darken-1";case 2:return"red darken-1";case 3:return"blue-grey darken-1";default:return"black"}},getIconLevel:function(t){switch(t){case 0:return"mdi-check-circle-outline";case 1:return"mdi-alert";case 2:return"mdi-minus-circle";case 3:return"mdi-close-circle";default:return""}}},watch:{statusDevices:function(t){null!=t&&t.length>0&&(this.isLoading=!1)},dialogShow:function(t){!1===t&&(this.dialogItem={level:0,name:"",message:"",hardware_id:"",values:[]})}}},xe=ye,ke=n("8fea"),we=n("169a"),Me=n("1f4f"),Ie=Object(c["a"])(xe,he,pe,!1,null,null,null),Se=Ie.exports;M()(Ie,{VCard:Nt["a"],VCardSubtitle:Ft["b"],VCardText:Ft["c"],VCardTitle:Ft["d"],VCol:gt["a"],VContainer:Wt["a"],VDataTable:ke["a"],VDialog:we["a"],VIcon:H["a"],VRow:Gt["a"],VSimpleTable:Me["a"],VSpacer:$["a"],VTextField:qt["a"]});var je=Se,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4",attrs:{elevation:"8"}},[n("v-card-title",[n("v-card",{staticClass:"card-title-card",attrs:{color:"green darken-2",elevation:"8"}},[n("v-card-text",[n("v-icon",{attrs:{"x-large":"",color:"white"},domProps:{textContent:t._s(t.batteryIcon)}})],1)],1),n("v-spacer"),t._v(" "+t._s(t.batteryLevel)+"% ")],1),n("v-divider"),n("v-card-text",{staticClass:"pa-2"},[t._v(" Updated "+t._s(t.timeUpdated.toUTCString())+" ")])],1)},Oe=[],Te={name:"AgvrBattery",data:function(){return{batteryLevel:75,batteryIcon:"mdi-battery-alert-variant-outline",timeUpdated:new Date,timerUpdate:null}},methods:{getBatteryIcon:function(){return this.batteryLevel<5?"mdi-battery-alert-variant-outline":this.batteryLevel<15?"mdi-battery-10":this.batteryLevel<25?"mdi-battery-20":this.batteryLevel<35?"mdi-battery-30":this.batteryLevel<45?"mdi-battery-40":this.batteryLevel<55?"mdi-battery-50":this.batteryLevel<65?"mdi-battery-60":this.batteryLevel<75?"mdi-battery-70":this.batteryLevel<85?"mdi-battery-80":this.batteryLevel<95?"mdi-battery-90":"mdi-battery"}},mounted:function(){var t=this;this.batteryIcon=this.getBatteryIcon(),this.timerUpdate=setInterval((function(){t.timeUpdated=new Date}),5e3)},beforeDestroy:function(){clearInterval(this.timerUpdate)}},Pe=Te,Ae=(n("ba30"),Object(c["a"])(Pe,Ce,Oe,!1,null,"651fb599",null)),_e=Ae.exports;M()(Ae,{VCard:Nt["a"],VCardText:Ft["c"],VCardTitle:Ft["d"],VDivider:it["a"],VIcon:H["a"],VSpacer:$["a"]});var Ve=_e,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4"},[n("v-card-title",[n("v-card",{staticClass:"card-title-card",attrs:{color:"green darken-2",elevation:"8"}},[n("v-card-text",[n("v-icon",{attrs:{"x-large":"",color:"white"},domProps:{textContent:t._s(t.batteryIcon)}})],1)],1),n("v-spacer"),t._v(" "+t._s(t.batteryLevel)+"% ")],1),n("v-divider"),n("v-card-text",{staticClass:"pa-2"},[t._v(" Updated "+t._s(t.timeUpdated.toUTCString())+" ")])],1)},Re=[],We={name:"AgvrStatus",data:function(){return{batteryLevel:75,batteryIcon:"mdi-battery-alert-variant-outline",timeUpdated:new Date,timerUpdate:null}},methods:{getBatteryIcon:function(){return this.batteryLevel<5?"mdi-battery-alert-variant-outline":this.batteryLevel<15?"mdi-battery-10":this.batteryLevel<25?"mdi-battery-20":this.batteryLevel<35?"mdi-battery-30":this.batteryLevel<45?"mdi-battery-40":this.batteryLevel<55?"mdi-battery-50":this.batteryLevel<65?"mdi-battery-60":this.batteryLevel<75?"mdi-battery-70":this.batteryLevel<85?"mdi-battery-80":this.batteryLevel<95?"mdi-battery-90":"mdi-battery"}},mounted:function(){var t=this;this.batteryIcon=this.getBatteryIcon(),this.timerUpdate=setInterval((function(){t.timeUpdated=new Date}),5e3)},beforeDestroy:function(){clearInterval(this.timerUpdate)}},De=We,Ee=(n("7a6c"),Object(c["a"])(De,Le,Re,!1,null,"40be7de6",null));Ee.exports;M()(Ee,{VCard:Nt["a"],VCardText:Ft["c"],VCardTitle:Ft["d"],VDivider:it["a"],VIcon:H["a"],VSpacer:$["a"]});var Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4",attrs:{elevation:"8"}},[n("v-card-title",[n("v-card",{staticClass:"card-title-card",attrs:{color:"green darken-2",elevation:"8"}},[n("v-card-text",[n("v-icon",{attrs:{"x-large":"",color:"white"},domProps:{textContent:t._s(t.batteryIcon)}})],1)],1),n("v-spacer"),t._v(" -"+t._s(t.batteryLevel)+" dbm ")],1),n("v-divider"),n("v-card-text",{staticClass:"pa-2"},[t._v(" Updated "+t._s(t.timeUpdated.toUTCString())+" ")])],1)},ze=[],Ye={name:"AgvrBattery",data:function(){return{batteryLevel:40,batteryIcon:"mdi-signal-cellular-outline",timeUpdated:new Date,timerUpdate:null}},methods:{getBatteryIcon:function(){return this.batteryLevel<5?"mdi-signal-cellular-outline":this.batteryLevel<15?"mdi-signal-cellular-1":this.batteryLevel<25?"mdi-signal-cellular-2":"mdi-signal-cellular-3"}},mounted:function(){var t=this;this.batteryIcon=this.getBatteryIcon(),this.timerUpdate=setInterval((function(){t.timeUpdated=new Date}),5e3)},beforeDestroy:function(){clearInterval(this.timerUpdate)}},Be=Ye,Xe=(n("f39d"),Object(c["a"])(Be,Je,ze,!1,null,"332ca230",null)),Ze=Xe.exports;M()(Xe,{VCard:Nt["a"],VCardText:Ft["c"],VCardTitle:Ft["d"],VDivider:it["a"],VIcon:H["a"],VSpacer:$["a"]});var He=Ze,$e={name:"DashboardOverview",components:{AgvrStatusDevices:je,AgvrBattery:Ve,AgvrSignalStrength:He}},Ne=$e,Fe=Object(c["a"])(Ne,ve,de,!1,null,null,null),Ue=Fe.exports;M()(Fe,{VCol:gt["a"],VContainer:Wt["a"],VRow:Gt["a"]});var Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height pa-0 agv-navigation-controller",attrs:{fluid:""}},[n("router-view"),n("div",{staticClass:"topbar d-flex"},[n("v-icon",{staticClass:"blue--text text--darken-2 pa-1",attrs:{large:""},domProps:{textContent:t._s(t.navigationSubscribePose?"mdi-near-me":"mdi-crosshairs-gps")}}),n("AgvrPoseEditor"),n("AgvrMapPanZoomOption")],1)],1)},qe=[],Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":"",justify:"center"}},[n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-x-arrow","append-icon":"mdi-alpha-m",label:"X axit",outlined:"",dense:"",step:.001,readonly:"/navigation/init"!=t.$router.currentRoute.path,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePosition(e)},blur:t.updatePosition},model:{value:t.positionX,callback:function(e){t.positionX=e},expression:"positionX"}})],1),n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-y-arrow","append-icon":"mdi-alpha-m",label:"Y axit",outlined:"",dense:"",step:.001,readonly:"/navigation/init"!=t.$router.currentRoute.path,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePosition(e)},blur:t.updatePosition},model:{value:t.positionY,callback:function(e){t.positionY=e},expression:"positionY"}})],1),n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-z-rotate-counterclockwise","append-icon":"mdi-alpha-d",label:"Z angle",outlined:"",dense:"",step:.001,readonly:"/navigation/init"!=t.$router.currentRoute.path,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateAngle(e)},blur:t.updateAngle},model:{value:t.angleZ,callback:function(e){t.angleZ=e},expression:"angleZ"}})],1),n("div",{staticClass:"d-flex"},[n("span",{staticClass:"align-self-center"},[t._v(t._s(t.agvSim1000PoseQuality)+"%")])])],1)],1)},Ke=[],tn=(n("b680"),Object(V["a"])("navigation")),en=tn.mapState,nn=Object(V["a"])("agvs"),an=nn.mapState,on=nn.mapActions,sn=Object(V["a"])("agvMaps"),rn=sn.mapState,cn={name:"AgvrPoseEditor",data:function(){return{tmpPositionX:0,tmpPositionY:0,tmpAngleZ:0}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])({},en({navigationMapId:function(t){return t.mapId},navigationAgvId:function(t){return t.agvId}})),an({agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}}},agvSim1000PoseQuality:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.sim1000Pose.quality:0}})),rn({agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1},agvRosMapInfo:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return n.rosMap.info}})),{},{positionX:{get:function(){return(this.agvRosMapInfo.origin.position.x+this.agvWebPose.position.x*this.agvRosMapInfo.resolution/this.agvMapScale).toFixed(2)},set:function(t){this.tmpPositionX=parseFloat(t)}},positionY:{get:function(){return(this.agvRosMapInfo.origin.position.y-(this.agvWebPose.position.y/this.agvMapScale-this.agvRosMapInfo.height)*this.agvRosMapInfo.resolution).toFixed(2)},set:function(t){this.tmpPositionY=parseFloat(t)}},angleZ:{get:function(){return this.agvWebPose.orientation.z.toFixed(0)},set:function(t){this.tmpAngleZ=parseFloat(t)}}}),methods:Object(_["a"])(Object(_["a"])({},on({setAgvDirection:"setAgvDirection",setAgvPosition:"setAgvPosition"})),{},{updatePosition:function(){this.setAgvPosition({x:(this.tmpPositionX-this.agvRosMapInfo.origin.position.x)*this.agvMapScale/this.agvRosMapInfo.resolution,y:((this.agvRosMapInfo.origin.position.y-this.tmpPositionY)/this.agvRosMapInfo.resolution+this.agvRosMapInfo.height)*this.agvMapScale,z:0,agvId:this.navigationAgvId})},updateAngle:function(){this.setAgvDirection({x:0,y:0,z:this.tmpAngleZ,agvId:this.navigationAgvId})}}),mounted:function(){this.tmpPositionX=this.positionX,this.tmpPositionY=this.positionY,this.tmpAngleZ=this.angleZ}},un=cn,ln=(n("3980"),Object(c["a"])(un,Qe,Ke,!1,null,"0faae882",null)),vn=ln.exports;M()(ln,{VCol:gt["a"],VContainer:Wt["a"],VRow:Gt["a"],VTextField:qt["a"]});var dn=vn,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{rounded:"0","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,a=e.on;return[n("v-btn",t._g(t._b({attrs:{icon:"","x-large":"",small:""}},"v-btn",i,!1),a),[n("v-icon",{attrs:{large:"",dark:""}},[t._v(" mdi-dots-vertical ")])],1)]}}])},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{on:{click:function(){return t.pushRouterTo("/navigation/init")}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-crosshairs-gps")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Initialize pose")])],1)],1),n("v-list-item",{on:{click:function(){return t.pushRouterTo("/navigation")}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-near-me")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Navigation")])],1)],1),n("v-divider"),n("v-list-item",[n("v-list-item-action",[n("v-checkbox",{model:{value:t.isShowJoystickButton,callback:function(e){t.isShowJoystickButton=e},expression:"isShowJoystickButton"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Show joystick button")])],1)],1),n("v-list-item",[n("v-list-item-action",[n("v-checkbox",{model:{value:t.isShowMovementButton,callback:function(e){t.isShowMovementButton=e},expression:"isShowMovementButton"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Show movement button")])],1)],1)],1)],1)},pn=[],mn=Object(V["a"])("navigation"),gn=mn.mapState,fn=mn.mapActions,bn={name:"AgvrMapPanZoomOption",methods:Object(_["a"])(Object(_["a"])({},fn(["showJoystickButton","hideJoystickButton","showMovementButton","hideMovementButton","setNavigationState"])),{},{pushRouterTo:function(t){this.$router.currentRoute.path!==t&&this.$router.push(t)}}),computed:Object(_["a"])(Object(_["a"])({},gn({joystickButtonState:function(t){return t.joystickButton.isShow},movementButtonState:function(t){return t.movementButton.isShow}})),{},{isShowJoystickButton:{get:function(){return this.joystickButtonState},set:function(t){t?this.showJoystickButton():this.hideJoystickButton()}},isShowMovementButton:{get:function(){return this.movementButtonState},set:function(t){t?this.showMovementButton():this.hideMovementButton()}}})},yn=bn,xn=n("ac7c"),kn=n("1800"),wn=n("e449"),Mn=Object(c["a"])(yn,hn,pn,!1,null,null,null),In=Mn.exports;M()(Mn,{VBtn:$t["a"],VCheckbox:xn["a"],VDivider:it["a"],VIcon:H["a"],VList:ot["a"],VListItem:st["a"],VListItemAction:kn["a"],VListItemContent:rt["a"],VListItemIcon:ct["a"],VListItemTitle:rt["b"],VMenu:wn["a"]});var Sn=In,jn=Object(V["a"])("navigation"),Cn=jn.mapState,On={name:"Navigation",components:{AgvrMapPanZoomOption:Sn,AgvrPoseEditor:dn},computed:Object(_["a"])({},Cn({joystickButtonState:function(t){return t.joystickButton.isShow},movementButtonState:function(t){return t.movementButton.isShow},navigationState:function(t){return t.navigationState},navigationSubscribePose:function(t){return t.subscribePose}}))},Tn=On,Pn=(n("9e05"),Object(c["a"])(Tn,Ge,qe,!1,null,"c362c116",null)),An=Pn.exports;M()(Pn,{VContainer:Wt["a"],VIcon:H["a"]});var _n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{xs:"12",sm:"8",md:"6",lg:"4"}},[n("v-list",[t._l(t.settingMeta,(function(t,e){return["group"===t.type?n("SettingGroupComponent",{key:"setting-group-"+t.text+"-"+e,attrs:{pathStore:[].concat(t.pathStore),text:t.text,settings:t.settings}}):n("SettingComponent",{key:"setting-component-"+t.text+"-"+e,attrs:{pathStore:[].concat(t.pathStore),text:t.text,type:t.type,unit:t.unit,step:t.step}})]}))],2)],1)],1)],1)},Vn=[],Ln=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{type:t.inputType,label:t.text,outlined:"",rules:t.inputRules,suffix:t.unit,step:t.step},model:{value:t.valueInput,callback:function(e){t.valueInput=e},expression:"valueInput"}})],1)],1)},Rn=[],Wn=(n("a9e3"),n("a434"),n("2909"));function Dn(t,e){return null==e||e.length<=0?t:Dn(t[e[0]],Object(Wn["a"])(e).splice(1,e.length-1))}function En(t,e,n){if(null!=n)if(n.length<=0)t=e;else{if(1!=n.length)return En(t[n[0]],e,Object(Wn["a"])(n).splice(1,n.length-1));t[n[0]]=e}}var Jn={getDeepProperty:Dn,setDeepProperty:En},zn={name:"setting-component",props:{pathStore:{type:Array,default:function(){return[]}},text:{type:String,default:""},type:{type:String,default:""},unit:{type:String,default:""},step:{type:Number,default:.1}},computed:Object(_["a"])(Object(_["a"])({},Object(V["d"])({value:function(t){return Jn.getDeepProperty(t,this.pathStore)}})),{},{valueInput:{get:function(){return this.value},set:function(t){this.setProperty({value:this.getValue(t)||0,properties:this.pathStore})}},inputType:function(){switch(this.type){case"double":case"integer":return"number";default:return"text"}},inputRules:function(){var t=[function(t){return!!t||0==t||"Required."}];return t}}),methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])(["setProperty"])),{},{getValue:function(t){switch(this.type){case"double":return parseFloat(t);case"integer":return parseInt(t);default:return t}}})},Yn=zn,Bn=Object(c["a"])(Yn,Ln,Rn,!1,null,null,null),Xn=Bn.exports;M()(Bn,{VListItem:st["a"],VListItemContent:rt["a"],VTextField:qt["a"]});var Zn=Xn,Hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.text))])],1)]},proxy:!0}])},[t._l(t.settings,(function(e,i){return["group"===e.type?n("SettingGroupComponent",{key:"setting-group-"+t.text+"-"+i,attrs:{pathStore:t.pathStore.concat(e.pathStore),text:e.text,settings:e.settings}}):n("SettingComponent",{key:"setting-component-"+t.text+"-"+i,attrs:{pathStore:t.pathStore.concat(e.pathStore),text:e.text,type:e.type,unit:e.unit,step:e.step}})]}))],2)},$n=[],Nn={name:"SettingGroupComponent",components:{SettingComponent:Zn},props:{pathStore:{type:Array,default:function(){return[]}},text:{type:String,default:""},settings:{type:Array,default:function(){return[]}}}},Fn=Nn,Un=n("56b0"),Gn=Object(c["a"])(Fn,Hn,$n,!1,null,null,null),qn=Gn.exports;M()(Gn,{VListGroup:Un["a"],VListItemContent:rt["a"],VListItemTitle:rt["b"]});var Qn=qn,Kn=Object(V["a"])("settings"),ti=Kn.mapState,ei={name:"Setting",components:{SettingComponent:Zn,SettingGroupComponent:Qn},computed:Object(_["a"])({},ti({settingMeta:function(t){return t.settings}}))},ni=ei,ii=Object(c["a"])(ni,_n,Vn,!1,null,null,null),ai=ii.exports;M()(ii,{VCol:gt["a"],VContainer:Wt["a"],VList:ot["a"],VRow:Gt["a"]});var oi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t._v(" Security ")])},si=[],ri={name:"Secrity"},ci=ri,ui=Object(c["a"])(ci,oi,si,!1,null,null,null),li=ui.exports;M()(ui,{VContainer:Wt["a"]});var vi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height pa-0 d-flex justify-center",attrs:{fluid:""}},[n("v-row",[n("v-btn",{attrs:{icon:"","x-large":"",small:""},on:{click:t.onContextMenu}},[n("v-icon",{attrs:{large:"",dark:""}},[t._v("mdi-dots-vertical")])],1)],1),n("AgvrJoyStickButton",{attrs:{width:400,height:400,handleWidth:120,handleHeight:120}}),n("AgvrRobotNavigationMenuContext")],1)},di=[],hi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agv-joystick",style:{height:t.joystickHeight+"px",width:t.joystickWidth+"px"}},[n("div",{staticClass:"agv-joystick-point",style:{top:t.joystickHandleTop+"px",left:t.joystickHandleLeft+"px",height:t.joystickHandleHeight+"px",width:t.joystickHandleWidth+"px"},on:{mousedown:function(){return t.joystickClicked=!0},mouseup:function(){return t.joystickClicked=!1},mouseleave:function(){return t.joystickClicked=!1},mousemove:function(e){return t.joystickMove(e.movementX,e.movementY)},touchstart:t.joystickTouchStart,touchend:t.joystickTouchEnd,touchmove:t.onTouchMove}})])},pi=[],mi={controlMetaToTwistMessage:function(t){var e={x:t.y,y:0,z:0},n={x:0,y:0,z:-t.x};return{linear:e,angular:n}}},gi=n("e86b"),fi=n.n(gi),bi={quaternionToGlobalTheta:function(t){var e=t.w,n=t.x,i=t.y,a=t.z;return 180*-Math.atan2(2*(e*a+n*i),1-2*(i*i+a*a))/Math.PI},globalThetaToQuaternion:function(t){var e=Math.sin(t/2),n=Math.cos(t/2);return new fi.a.Quaternion({x:0,y:0,z:e,w:n})}},yi=Object(V["a"])("navigation"),xi=yi.mapState,ki={name:"AgvrJoyStickButton",data:function(){return{joystickClicked:!1,joystickHandleTop:0,joystickHandleLeft:0,touchClientX:-1,touchClientY:-1}},props:{width:{type:Number,default:null},height:{type:Number,default:null},handleWidth:{type:Number,default:null},handleHeight:{type:Number,default:null}},computed:Object(_["a"])(Object(_["a"])({},xi({navigationAgvId:function(t){return t.agvId}})),{},{joystickStyle:function(){return{height:this.height?"".concat(this.height,"px"):null,width:this.width?"".concat(this.width,"px"):null}},joystickWidth:function(){return this.width?this.width:200},joystickHeight:function(){return this.height?this.height:200},joystickHandleWidth:function(){return this.handleWidth?this.handleWidth:80},joystickHandleHeight:function(){return this.handleHeight?this.handleHeight:80},joystickHandleX:function(){return(this.joystickWidth-this.joystickHandleWidth)/2},joystickHandleY:function(){return(this.joystickHeight-this.joystickHandleHeight)/2}}),mounted:function(){this.joystickResetPosition()},methods:{joystickMove:function(t,e){if(this.joystickClicked){var n=this.joystickHandleTop+e+this.joystickHandleHeight/2-this.joystickHeight/2,i=this.joystickHandleLeft+t+this.joystickHandleWidth/2-this.joystickWidth/2,a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));a<=this.joystickHandleX&&a<=this.joystickHandleY&&(this.joystickHandleTop+=e,this.joystickHandleLeft+=t,this.$agvr.robots[this.navigationAgvId].pushCmdvel(mi.controlMetaToTwistMessage({x:i/this.joystickHandleX,y:-n/this.joystickHandleY})))}},joystickResetPosition:function(){this.joystickHandleTop=this.joystickHandleX,this.joystickHandleLeft=this.joystickHandleY,this.$agvr.robots[this.navigationAgvId].pushCmdvel(mi.controlMetaToTwistMessage({x:0,y:0}))},joystickTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY,this.joystickClicked=!0},joystickTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1,this.joystickClicked=!1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.joystickMove(e.clientX-this.touchClientX,e.clientY-this.touchClientY),this.touchClientX=e.clientX,this.touchClientY=e.clientY}}},watch:{joystickClicked:function(t,e){t==e||t||this.joystickResetPosition()}}},wi=ki,Mi=(n("b4e5"),Object(c["a"])(wi,hi,pi,!1,null,"20879546",null)),Ii=Mi.exports,Si=Ii,ji=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.navigationAgvMenuContext.position.x,"position-y":t.navigationAgvMenuContext.position.y,absolute:"","offset-y":"",rounded:"0"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{staticClass:"pa-0",attrs:{color:"primary"}},[n("v-list-item",{on:{click:t.onCreateGoal}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-map-marker-plus")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Create goal")}})],1)],1),n("v-list-item",{on:{click:t.onRun}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-play")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Run")}})],1)],1),n("v-menu",{attrs:{bottom:"","offset-x":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-list-item",t._g(t._b({},"v-list-item",a,!1),i),[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-function-variant")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Actions")}})],1),n("v-list-item-action",[n("v-icon",{domProps:{textContent:t._s("mdi-chevron-right")}})],1)],1)]}}])},[n("v-list",[n("v-list-item",{on:{click:t.onLiftIn}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-arrow-expand-right")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Lift In")}})],1)],1),n("v-list-item",{on:{click:t.onLiftUp}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-arrow-expand-up")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Lift Up")}})],1)],1),n("v-list-item",{on:{click:t.onLiftDown}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-arrow-expand-down")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Lift Down")}})],1)],1),n("v-list-item",{on:{click:t.onLiftOut}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-arrow-expand-left")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Lift Out")}})],1)],1),n("v-list-item",{on:{click:t.onChargingStart}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-power-plug")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Charging In")}})],1)],1),n("v-list-item",{on:{click:t.onChargingEnd}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-power-plug-off")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Charging Out")}})],1)],1)],1)],1),n("v-list-item",{on:{click:t.onLogTask}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-math-log")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Log Tasks")}})],1)],1),n("v-menu",{attrs:{bottom:"","offset-x":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-list-item",t._g(t._b({},"v-list-item",a,!1),i),[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-function-variant")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Missions")}})],1),n("v-list-item-action",[n("v-icon",{domProps:{textContent:t._s("mdi-chevron-right")}})],1)],1)]}}])},[n("v-list",t._l(t.agvMapMissions,(function(e,i){return n("v-list-item",{key:"agv-map-mission-"+i,on:{click:function(n){return t.onSetMission(e.tasks)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1)],1)],1)],1)],1)},Ci=[],Oi=Object(V["a"])("navigation"),Ti=Oi.mapState,Pi=Oi.mapActions,Ai=Object(V["a"])("agvs"),_i=Ai.mapState,Vi=Object(V["a"])("agvMaps"),Li=Vi.mapState,Ri=Object(V["a"])("agvJobs"),Wi=Ri.mapState,Di=Ri.mapActions,Ei=Ri.mapGetters,Ji={name:"AgvrRobotNavigationMenuContext",computed:Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])({},Ti({navigationAgvMenuContext:function(t){return t.agvMenuContext},navigationAgvId:function(t){return t.agvId},navigationJobId:function(t){return t.jobId},navigationMapId:function(t){return t.mapId}})),Wi({getListTask:function(t){var e,n=this,i=t.find((function(t){return t.id===n.navigationJobId}));return null!==(e=null===i||void 0===i?void 0:i.tasks)&&void 0!==e?e:[]}})),Li({agvMapMissions:function(t){var e,n=this,i=t.find((function(t){return t.id===n.navigationMapId}));return null!==(e=null===i||void 0===i?void 0:i.missions)&&void 0!==e?e:[]}})),Ei({getLastTask:"getLastTask"})),_i({agvJobId:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.jobId:null},agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.webPose:null}})),{},{isShow:{get:function(){return this.navigationAgvMenuContext.isShow},set:function(t){t?this.navigationShowAgvMenuContext():this.navigationHideAgvMenuContext()}}}),methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Pi({navigationHideAgvMenuContext:"hideAgvMenuContext",navigationShowAgvMenuContext:"showAgvMenuContext"})),Di({pushTaskToJob:"pushTaskToJob",setTasksToJob:"setTasks"})),{},{onCreateGoal:function(){var t=null,e=this.getLastTask(this.agvJobId);t=null!=e?{x:e.position.x+100*Math.cos(e.thetaEnd*Math.PI/180),y:e.position.y-100*Math.sin(e.thetaEnd*Math.PI/180)}:{x:this.agvWebPose.position.x+100*Math.cos(this.agvWebPose.orientation.z*Math.PI/180),y:this.agvWebPose.position.y-100*Math.sin(this.agvWebPose.orientation.z*Math.PI/180)},null!=t&&this.pushTaskToJob({jobId:this.agvJobId,x:t.x,y:t.y})},onRun:function(){this.$agvr.robots[this.navigationAgvId].runJob(),this.isShow=!1},onLiftIn:function(){this.$agvr.robots[this.navigationAgvId].liftIn(),this.isShow=!1},onLiftUp:function(){this.$agvr.robots[this.navigationAgvId].liftUp(),this.isShow=!1},onLiftDown:function(){this.$agvr.robots[this.navigationAgvId].liftDown(),this.isShow=!1},onLiftOut:function(){this.$agvr.robots[this.navigationAgvId].liftOut(),this.isShow=!1},onChargingStart:function(){this.$agvr.robots[this.navigationAgvId].chargingStart(),this.isShow=!1},onChargingEnd:function(){this.$agvr.robots[this.navigationAgvId].chargingEnd(),this.isShow=!1},onLogTask:function(){console.log(JSON.stringify(this.getListTask))},onSetMission:function(t){this.setTasksToJob({jobId:this.agvJobId,tasks:t}),this.isShow=!1}})},zi=Ji,Yi=n("1baa"),Bi=Object(c["a"])(zi,ji,Ci,!1,null,null,null),Xi=Bi.exports;M()(Bi,{VIcon:H["a"],VList:ot["a"],VListItem:st["a"],VListItemAction:kn["a"],VListItemContent:rt["a"],VListItemGroup:Yi["a"],VListItemIcon:ct["a"],VListItemTitle:rt["b"],VMenu:wn["a"]});var Zi=Xi,Hi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.navigationAgvInitPoseMenuContext.position.x,"position-y":t.navigationAgvInitPoseMenuContext.position.y,absolute:"","offset-y":"",rounded:"0"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{staticClass:"pa-0",attrs:{color:"primary"}},[n("v-list-item",{on:{click:t.onInitializePose}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-play")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Initialize pose")}})],1)],1)],1)],1)],1)},$i=[],Ni=Object(V["a"])("navigation"),Fi=Ni.mapState,Ui=Ni.mapActions,Gi={name:"AgvrRobotInitPoseMenuContext",computed:Object(_["a"])(Object(_["a"])({},Fi({navigationAgvInitPoseMenuContext:function(t){return t.agvInitPoseMenuContext},navigationAgvId:function(t){return t.agvId}})),{},{isShow:{get:function(){return this.navigationAgvInitPoseMenuContext.isShow},set:function(t){t?this.navigationShowAgvInitPoseMenuContext():this.navigationHideAgvInitPoseMenuContext()}}}),methods:Object(_["a"])(Object(_["a"])({},Ui({navigationShowAgvInitPoseMenuContext:"showAgvInitPoseMenuContext",navigationHideAgvInitPoseMenuContext:"hideAgvInitPoseMenuContext",setNavigationState:"setNavigationState"})),{},{onInitializePose:function(){this.$agvr.robots[this.navigationAgvId].initializePose(),this.$router.push("/navigation")}})},qi=Gi,Qi=Object(c["a"])(qi,Hi,$i,!1,null,null,null),Ki=Qi.exports;M()(Qi,{VIcon:H["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:rt["a"],VListItemGroup:Yi["a"],VListItemIcon:ct["a"],VListItemTitle:rt["b"],VMenu:wn["a"]});var ta=Ki,ea=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.navigationTaskMenuContext.position.x,"position-y":t.navigationTaskMenuContext.position.y,absolute:"","offset-y":"",rounded:"0"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{staticClass:"pa-0",attrs:{color:"primary"}},[n("v-list-item",{on:{click:t.openActionManagement}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-clipboard-list-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Actions")])],1)],1),n("v-list-item",{on:{click:t.insertBefore}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-table-column-plus-before")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Add before")])],1)],1),n("v-list-item",{on:{click:t.insertAfter}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-table-column-plus-after")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Add after")])],1)],1),n("v-list-item",{on:{click:t.removeTask}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-delete")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Delete")])],1)],1)],1)],1)],1)},na=[],ia=Object(V["a"])("navigation"),aa=ia.mapState,oa=ia.mapActions,sa=Object(V["a"])("agvJobs"),ra=sa.mapActions,ca=Object(V["a"])("agvs"),ua=ca.mapState,la={name:"AgvrTaskMenuContext",computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},aa({navigationTaskMenuContext:function(t){return t.taskMenuContext},navigationJobId:function(t){return t.jobId},navigationTaskId:function(t){return t.taskId},navigationAgvId:function(t){return t.agvId}})),ua({agvPosition:function(t){return t[this.navigationAgvId].webPose.position}})),{},{isShow:{get:function(){return this.navigationTaskMenuContext.isShow},set:function(t){t?this.navigationShowTaskMenuContext():this.navigationHideTaskMenuContext()}}}),methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},ra({insertTaskAfterToJob:"insertTaskAfterToJob",insertTaskBeforeToJob:"insertTaskBeforeToJob",removeTaskFromJob:"removeTaskFromJob"})),oa({navigationShowTaskMenuContext:"showTaskMenuContext",navigationHideTaskMenuContext:"hideTaskMenuContext",navigationShowActionManagement:"showActionManagement"})),{},{openActionManagement:function(){this.navigationShowActionManagement()},insertAfter:function(){this.insertTaskAfterToJob({jobId:this.navigationJobId,taskId:this.navigationTaskId})},insertBefore:function(){this.insertTaskBeforeToJob({jobId:this.navigationJobId,taskId:this.navigationTaskId,agvPosition:this.agvPosition})},removeTask:function(){this.removeTaskFromJob({jobId:this.navigationJobId,taskId:this.navigationTaskId})}})},va=la,da=Object(c["a"])(va,ea,na,!1,null,null,null),ha=da.exports;M()(da,{VIcon:H["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:rt["a"],VListItemGroup:Yi["a"],VListItemIcon:ct["a"],VListItemTitle:rt["b"],VMenu:wn["a"]});var pa=ha,ma=Object(V["a"])("navigation"),ga=ma.mapActions,fa={name:"NavigationManual",components:{AgvrJoyStickButton:Si,AgvrRobotNavigationMenuContext:Zi},methods:Object(_["a"])(Object(_["a"])({},ga({navigationShowAgvMenuContext:"showAgvMenuContext"})),{},{onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.navigationShowAgvMenuContext({x:t.clientX,y:t.clientY})}))}})},ba=fa,ya=Object(c["a"])(ba,vi,di,!1,null,null,null),xa=ya.exports;M()(ya,{VBtn:$t["a"],VContainer:Wt["a"],VIcon:H["a"],VRow:Gt["a"]});var ka=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0 agv-navigation",attrs:{fluid:""}},[n("panZoom",{staticClass:"panzoom-map-viewer",attrs:{selector:"#"+t.graphicID,options:{minZoom:.1,maxZoom:5,zoomSpeed:.05,zoomDoubleClickSpeed:1,onDoubleClick:t.onPanZoomDoubleClick,autocenter:!0}},on:{init:t.onInitZoomPan}},[n("svg",{staticClass:"map-viewer-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",height:null==t.agvMapImage||t.viewHeight>t.agvMapImage.height?t.viewHeight:t.agvMapImage.height,width:null==t.agvMapImage||t.viewWidth>t.agvMapImage.width?t.viewWidth:t.agvMapImage.width,id:t.graphicID},on:{mousemove:t.onMouseMove,contextmenu:t.onContextMenu}},[n("g",{on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd}},[n("AgvrMapImage",{attrs:{mapId:t.navigationMapId}}),n("g",t._l(t.agvRects,(function(t,e){return n("rect",{key:"rect-map-"+e,style:t.style,attrs:{x:t.x,y:t.y,width:t.width,height:t.height}})})),0),n("AgvrMapSmartPoint",{attrs:{mapId:t.navigationMapId}}),t._l(t.agvJobsIdOnMap,(function(t){return n("WayFromTaskToTask",{key:"line-des-"+t,attrs:{jobId:t}})})),t._l(t.agvIdsOnMap,(function(t){return n("WayAgvToTaskPosition",{key:"way-from-agv-to-task-"+t,attrs:{agvId:t}})})),n("AgvrEndTaskDirection"),t._l(t.agvJobsIdOnMap,(function(t){return n("AgvrTasksOnMap",{key:"agv-task-"+t,attrs:{jobId:t}})})),t._l(t.agvIdsOnMap,(function(e){return n("AgvrRobot",{key:"agv-"+e,attrs:{agvId:e,agvMapResolution:t.agvMapResolution,agvMapScale:t.agvMapScale}})}))],2)])]),n("AgvrRobotNavigationMenuContext"),n("AgvrTaskMenuContext"),n("AgvrActionManagement",{attrs:{jobId:t.navigationJobId,taskId:t.navigationTaskId}}),t.joystickButtonState?n("span",{staticClass:"joystick"},[n("AgvrJoyStickButton")],1):t._e(),t.movementButtonState?n("span",{staticClass:"movement"},[n("AgvrMovementButton")],1):t._e()],1)},wa=[],Ma=n("9612"),Ia=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("foreignObject",{staticClass:"panzoom-map-image",attrs:{width:t.width,height:t.height}},[n("canvas",{ref:"mapImageRef"})])},Sa=[],ja=Object(V["a"])("agvMaps"),Ca=ja.mapState,Oa={name:"AgvrMapImage",props:{mapId:{type:String,default:""}},data:function(){return{mapCanvas:null,width:0,height:0}},computed:Object(_["a"])({},Ca({agvMapImage:function(t){var e=this,n=t.find((function(t){return t.id===e.mapId}));return null!=n?n.webMap.Image:null}})),mounted:function(){this.mapCanvas=this.$refs.mapImageRef,this.setMapImage()},methods:{setMapImage:function(){var t=this.agvMapImage;if(null!=t){this.width=t.width,this.height=t.height,this.mapCanvas.width=t.width,this.mapCanvas.height=t.height;var e=this.mapCanvas.getContext("2d"),n=e.createImageData(t.width,t.height);n.data.set(t.data),e.putImageData(n,0,0)}}},watch:{agvMapImage:function(){this.setMapImage()}}},Ta=Oa,Pa=(n("e92c"),Object(c["a"])(Ta,Ia,Sa,!1,null,"435b0d14",null)),Aa=Pa.exports,_a=Aa,Va=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("line",{staticStyle:{stroke:"red","stroke-width":"5"},attrs:{x1:t.positionX1,y1:t.positionY1,x2:t.positionX2,y2:t.positionY2,"stroke-dasharray":"10,5"}})])},La=[],Ra=Object(V["a"])("agvs"),Wa=Ra.mapState,Da=Object(V["a"])("agvJobs"),Ea=Da.mapState,Ja={name:"WayAgvToTaskPosition",data:function(){return{positionX1:0,positionY1:0,positionX2:0,positionY2:0}},props:{agvId:{type:String,default:""}},computed:Object(_["a"])(Object(_["a"])({},Wa({jobId:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.jobId:""},taskId:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.taskId:""},startWayPoint:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.webPose.position:{x:0,y:0,z:0}}})),Ea({endWayPoint:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));if(null==n||0==n.tasks.length)return null;var i=n.tasks.find((function(t){return t.id===e.taskId}));return null!=i?i.position:n.tasks[0].position}})),watch:{startWayPoint:function(t){var e={x:Math.floor(t.x),y:Math.floor(t.y)};this.positionX1=e.x,this.positionY1=e.y,null==this.endWayPoint&&(this.positionX2=e.x,this.positionY2=e.y)},endWayPoint:function(t){null==t?(this.positionX2=Math.floor(this.startWayPoint.x),this.positionY2=Math.floor(this.startWayPoint.y)):(this.positionX2=Math.floor(t.x),this.positionY2=Math.floor(t.y))}},mounted:function(){this.positionX1=Math.floor(this.startWayPoint.x),this.positionY1=Math.floor(this.startWayPoint.y),null==this.endWayPoint?(this.positionX2=Math.floor(this.startWayPoint.x),this.positionY2=Math.floor(this.startWayPoint.y)):(this.positionX2=Math.floor(this.endWayPoint.x),this.positionY2=Math.floor(this.endWayPoint.y))}},za=Ja,Ya=Object(c["a"])(za,Va,La,!1,null,null,null),Ba=Ya.exports,Xa=Ba,Za=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{on:{contextmenu:t.onContextMenu,mousedown:t.selectedRobot,touchstart:t.selectedRobot}},[i("image",{attrs:{transform:t.transformData,x:Math.floor(t.agvWebPose.position.x-t.agvWidth/2),y:Math.floor(t.agvWebPose.position.y-t.agvHeight/2),height:t.agvHeight,width:t.agvWidth,href:n("6062")}}),i("image",{attrs:{transform:t.transformData,x:Math.floor(t.agvWebPose.position.x-t.agvWidth/4),y:Math.floor(t.agvWebPose.position.y-t.agvHeight/4),height:t.agvHeight/2,width:t.agvWidth/2,href:n("06f1")}})])},Ha=[],$a=(n("99af"),Object(V["a"])("navigation")),Na=$a.mapState,Fa=$a.mapActions,Ua=Object(V["a"])("agvs"),Ga=Ua.mapState,qa={name:"AgvrRobot",data:function(){return{pathData:"",timeoutContextMenu:null,agvWidth:0,agvHeight:0}},props:{selectable:{type:Boolean,default:!1},agvId:{type:String,default:""},agvMapResolution:{type:Number,default:1},agvMapScale:{type:Number,default:1}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Ga({agvWebSize:function(t){var e=this;return t.find((function(t){return t.id===e.agvId})).size},agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}}}})),Na({isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),{},{transformData:function(){return"rotate(".concat(Math.floor(90-this.agvWebPose.orientation.z),",").concat(Math.floor(this.agvWebPose.position.x),",").concat(Math.floor(this.agvWebPose.position.y),")")}}),methods:Object(_["a"])(Object(_["a"])({},Fa({navigationShowAgvMenuContext:"showAgvMenuContext",navigationShowAgvInitPoseMenuContext:"showAgvInitPoseMenuContext",navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedRobot:"selectedRobot"})),{},{onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.selectable?e.navigationShowAgvInitPoseMenuContext({x:t.clientX,y:t.clientY}):e.navigationShowAgvMenuContext({x:t.clientX,y:t.clientY})}))},selectedRobot:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.selectable&&this.navigationSelectedRobot())}}),mounted:function(){this.agvWidth=this.agvWebSize.width*this.agvMapScale/this.agvMapResolution,this.agvHeight=this.agvWebSize.height*this.agvMapScale/this.agvMapResolution},watch:{agvWebSize:function(t){this.agvWidth=t.width*this.agvMapScale/this.agvMapResolution,this.agvHeight=t.height*this.agvMapScale/this.agvMapResolution},agvMapResolution:function(t){this.agvWidth=this.agvWebSize.width*this.agvMapScale/t,this.agvHeight=this.agvWebSize.height*this.agvMapScale/t}}},Qa=qa,Ka=Object(c["a"])(Qa,Za,Ha,!1,null,null,null),to=Ka.exports,eo=to,no=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t.agvTasks.length>0?t._l(t.agvTasks.length-1,(function(e){return n("line",{key:"way-"+t.jobId+"-"+t.agvTasks[e-1].id+"-"+t.agvTasks[e].id,staticStyle:{stroke:"rgb(0, 0, 255)","stroke-width":"2"},attrs:{x1:t.agvTasks[e-1].position.x,y1:t.agvTasks[e-1].position.y,x2:t.agvTasks[e].position.x,y2:t.agvTasks[e].position.y,"stroke-dasharray":"10,8"}})})):t._e()],2)},io=[],ao=Object(V["a"])("agvJobs"),oo=ao.mapState,so={name:"WayFromTaskToTask",props:{jobId:{type:String,default:""}},computed:Object(_["a"])({},oo({agvTasks:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));return null!=n?n.tasks:[]}}))},ro=so,co=Object(c["a"])(ro,no,io,!1,null,null,null),uo=co.exports,lo=uo,vo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t._l(t.agvTasks,(function(e){return n("circle",{key:"way-"+t.jobId+"-"+e.id,attrs:{cx:e.position.x,cy:e.position.y,r:"12","stroke-width":"3",fill:e.id===t.navigationTaskId?"teal":"indigo"},on:{mousedown:function(){return t.onMouseDown(e.id)},touchstart:function(){return t.onMouseDown(e.id)},contextmenu:t.onContextMenu}})})),t._l(t.agvTasks,(function(e,i){return n("text",{key:"way-index-"+t.jobId+"-"+e.id,staticClass:"agvr-task-index-text",attrs:{x:e.position.x,y:e.position.y,"text-anchor":"middle",fill:"white","stroke-width":"1px","font-size":"0.8em",dy:"0.4em"},domProps:{textContent:t._s(i)}})}))],2)},ho=[],po=Object(V["a"])("agvJobs"),mo=po.mapState,go=Object(V["a"])("navigation"),fo=go.mapState,bo=go.mapActions,yo={name:"AgvrTasksOnMap",props:{jobId:{type:String,default:""}},computed:Object(_["a"])(Object(_["a"])({},fo({navigationTaskId:function(t){return t.taskId},selectedIndexTask:function(t){return t.selectedIndexTask},isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),mo({agvTasks:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));return null!=n?n.tasks:[]}})),methods:Object(_["a"])(Object(_["a"])({},bo({navigationSetSelectedTaskId:"setSelectedTaskId",navigationShowTaskMenuContext:"showTaskMenuContext",navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedTaskPosition:"selectedTaskPosition"})),{},{onMouseDown:function(t){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedTaskPosition(),this.navigationSetSelectedTaskId(t))},onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.navigationShowTaskMenuContext({x:t.clientX,y:t.clientY})}))}})},xo=yo,ko=(n("8ff5"),Object(c["a"])(xo,vo,ho,!1,null,"48bc7acc",null)),wo=ko.exports,Mo=wo,Io=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{visibility:t.agvTask.hidden?"hidden":"visible"}},[n("defs",[n("marker",{attrs:{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"1",refY:"1",orient:"auto"}},[n("polygon",{staticStyle:{fill:"limegreen"},attrs:{points:"0 0, 3 1, 0 2"}})])]),n("line",{attrs:{x1:t.agvTask.position.x,y1:t.agvTask.position.y,x2:t.agvTask.position.x+50*Math.cos(t.agvTask.thetaEnd*Math.PI/180),y2:t.agvTask.position.y-50*Math.sin(t.agvTask.thetaEnd*Math.PI/180),stroke:"limegreen","stroke-width":"10","marker-end":"url(#arrowhead)"},on:{mousedown:t.onMouseDown,touchstart:t.onMouseDown}})])},So=[],jo=Object(V["a"])("agvJobs"),Co=jo.mapState,Oo=Object(V["a"])("navigation"),To=Oo.mapState,Po=Oo.mapActions,Ao={name:"AgvrEndTaskDirection",computed:Object(_["a"])(Object(_["a"])({},To({navigationJobId:function(t){return t.jobId},navigationTaskId:function(t){return t.taskId},isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),Co({agvTask:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationJobId}));if(null==n||0==n.tasks.length)return{position:{x:0,y:0,z:0},thetaEnd:0,hidden:!0};var i=n.tasks.find((function(t){return t.id===e.navigationTaskId}));return null!=i?i:{position:{x:0,y:0,z:0},thetaEnd:0,hidden:!0}}})),methods:Object(_["a"])(Object(_["a"])({},Po({navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedTaskThetaEnd:"selectedTaskThetaEnd"})),{},{onMouseDown:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedTaskThetaEnd())}})},_o=Ao,Vo=Object(c["a"])(_o,Io,So,!1,null,null,null),Lo=Vo.exports,Ro=Lo,Wo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{style:{boxShadow:"none"},attrs:{absolute:"",temporary:"",right:"",width:"500"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"d-flex flex-column px-6 pb-0"},[n("v-text-field",{staticClass:"mb-6",attrs:{dense:"","hide-details":"",type:"number",label:"Position X",outlined:"",step:.001,"prepend-inner-icon":"mdi-axis-x-arrow","append-icon":"mdi-alpha-m"},model:{value:t.positionX,callback:function(e){t.positionX=e},expression:"positionX"}}),n("v-text-field",{staticClass:"mb-6",attrs:{dense:"","hide-details":"",type:"number",label:"Position Y",outlined:"",step:.001,"prepend-inner-icon":"mdi-axis-y-arrow","append-icon":"mdi-alpha-m"},model:{value:t.positionY,callback:function(e){t.positionY=e},expression:"positionY"}}),n("v-text-field",{staticClass:"mb-2",attrs:{dense:"","hide-details":"",type:"number",label:"Angle",outlined:"",step:.001,"prepend-inner-icon":"mdi-axis-z-rotate-counterclockwise","append-icon":"mdi-alpha-d"},model:{value:t.thetaEnd,callback:function(e){t.thetaEnd=e},expression:"thetaEnd"}})],1)],1),n("v-row",{staticClass:"flex-shrink-1"},[n("v-col",{staticClass:"pt-0"},[n("v-stepper",{staticClass:"action-management-stepper",attrs:{vertical:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[t._l(t.actionCollection,(function(e,i){return[n("div",{key:"step-"+e.step,on:{contextmenu:function(e){return t.openMenuContext(e,i)}}},[n("v-stepper-step",{attrs:{step:e.step,"edit-icon":"mdi-puzzle-edit-outline",complete:"",editable:""}},[t._v(t._s(e.name))])],1),n("v-stepper-content",{key:"stepper-content-"+e.step,attrs:{step:e.step}},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-text-field",{staticClass:"mt-2",attrs:{label:"Step name","append-icon":"mdi-square-edit-outline",outlined:"",dense:""},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"stepItem.name"}}),n("v-combobox",{attrs:{label:"Action",items:t.actionLists,dense:"","hide-details":"",outlined:""},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;return[n("span",{staticClass:"pr-2"},[t._v(t._s(t.actionTextLists[i]))])]}},{key:"item",fn:function(e){var i=e.item;return[n("span",{staticClass:"pr-2"},[t._v(t._s(t.actionTextLists[i]))])]}}],null,!0),model:{value:e.action,callback:function(n){t.$set(e,"action",n)},expression:"stepItem.action"}})],1)],1)]})),n("div",{on:{contextmenu:function(t){return t.preventDefault()}}},[n("v-stepper-step",{attrs:{step:-1,"edit-icon":"mdi-plus",complete:"",editable:""},on:{click:t.addLastStep}})],1)],2)],1)],1),n("v-row",[n("v-spacer"),n("v-col",{staticClass:"px-6",attrs:{cols:"auto"}},[n("v-btn",{attrs:{depressed:"",color:"primary"},domProps:{textContent:t._s("Save")},on:{click:t.onSave}})],1)],1)],1),n("v-menu",{attrs:{"position-x":t.menuX,"position-y":t.menuY,absolute:"","offset-y":""},model:{value:t.isShowMenu,callback:function(e){t.isShowMenu=e},expression:"isShowMenu"}},[n("v-list",[n("v-list-item",{on:{click:t.addAboveStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Above")}})],1),n("v-list-item",{on:{click:t.addBelowStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Below")}})],1),n("v-list-item",{on:{click:t.deleteStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-delete")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Delete")}})],1)],1)],1)],1)},Do=[],Eo=n("ade3"),Jo=0,zo=1,Yo=2,Bo=4,Xo=5,Zo=6,Ho=7,$o=8,No=9,Fo=10,Uo=11,Go=Object(V["a"])("agvJobs"),qo=Go.mapState,Qo=Go.mapActions,Ko=Object(V["a"])("navigation"),ts=Ko.mapState,es=Ko.mapActions,ns=Object(V["a"])("agvMaps"),is=ns.mapState,as={name:"AgvrActionManagement",props:{jobId:{type:String,default:""},taskId:{type:String,default:""}},data:function(){var t;return{step:-1,actionLists:[Jo,Zo,Ho,$o,No,Fo,Uo],actionTextLists:(t={},Object(Eo["a"])(t,Jo,"Do nothing"),Object(Eo["a"])(t,Zo,"Charging start"),Object(Eo["a"])(t,Ho,"Charging end"),Object(Eo["a"])(t,$o,"Lift in"),Object(Eo["a"])(t,No,"Lift up"),Object(Eo["a"])(t,Fo,"Lift down"),Object(Eo["a"])(t,Uo,"Lift out"),t),tmpPositionX:0,tmpPositionY:0,tmpAngleZ:0,actionCollection:[],isShowMenu:!1,menuX:0,menuY:0,selectedStep:-1}},methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},es({navigationShowActionManagement:"showActionManagement",navigationHideActionManagement:"hideActionManagement"})),Qo({updateActions:"updateActions"})),{},{openMenuContext:function(t,e){var n=this;this.selectedStep=e,t.preventDefault(),this.isShowMenu=!1,this.menuX=t.clientX,this.menuY=t.clientY,this.$nextTick((function(){n.isShowMenu=!0}))},addAboveStep:function(){this.selectedStep<0||this.actionCollection.splice(this.selectedStep,0,{step:Ma["b"].v4(),name:"New step",action:this.actionLists[0]})},addBelowStep:function(){this.selectedStep<0||this.actionCollection.splice(this.selectedStep+1,0,{step:Ma["b"].v4(),name:"New step",action:this.actionLists[0]})},deleteStep:function(){this.selectedStep<0||(this.actionCollection.splice(this.selectedStep,1),this.step=-1)},addLastStep:function(){this.actionCollection.push({step:Ma["b"].v4(),name:"New step",action:this.actionLists[0]})},onSave:function(){this.updateActions({jobId:this.jobId,taskId:this.taskId,actions:this.actionCollection,position:{x:(parseFloat(this.tmpPositionX)-this.agvRosMapInfo.origin.position.x)*this.agvMapScale/this.agvRosMapInfo.resolution,y:((this.agvRosMapInfo.origin.position.y-parseFloat(this.tmpPositionY))/this.agvRosMapInfo.resolution+this.agvRosMapInfo.height)*this.agvMapScale,z:0},thetaEnd:parseFloat(this.tmpAngleZ)})}}),computed:Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])({},ts({navigationActionManagementShow:function(t){return t.actionManagement.isShow},navigationMapId:function(t){return t.mapId}})),is({agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1},agvRosMapInfo:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return n.rosMap.info}})),qo({agvSelectedTask:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));return null==n?null:n.tasks.find((function(t){return t.id===e.taskId}))}})),{},{isShow:{get:function(){return this.navigationActionManagementShow},set:function(t){t?this.navigationShowActionManagement():this.navigationHideActionManagement()}},positionX:{get:function(){return null==this.agvSelectedTask||null==this.agvRosMapInfo||null==this.agvMapScale?0:(this.agvRosMapInfo.origin.position.x+this.agvSelectedTask.position.x*this.agvRosMapInfo.resolution/this.agvMapScale).toFixed(2)},set:function(t){this.tmpPositionX=t}},positionY:{get:function(){return null==this.agvSelectedTask||null==this.agvRosMapInfo||null==this.agvMapScale?0:(this.agvRosMapInfo.origin.position.y-(this.agvSelectedTask.position.y/this.agvMapScale-this.agvRosMapInfo.height)*this.agvRosMapInfo.resolution).toFixed(2)},set:function(t){this.tmpPositionY=t}},thetaEnd:{get:function(){return null==this.agvSelectedTask?0:this.agvSelectedTask.thetaEnd.toFixed(0)},set:function(t){this.tmpAngleZ=t}}}),watch:{isShowMenu:function(t){0==t&&(this.selectedStep=-1)},isShow:function(t){t&&(this.tmpPositionX=this.positionX,this.tmpPositionY=this.positionY,this.tmpAngleZ=this.thetaEnd,this.actionCollection=null!=this.agvSelectedTask?this.agvSelectedTask.actions:[])}},mounted:function(){this.tmpPositionX=this.positionX,this.tmpPositionY=this.positionY,this.tmpAngleZ=this.thetaEnd,this.actionCollection=null!=this.agvSelectedTask?this.agvSelectedTask.actions:[]}},os=as,ss=(n("07b1"),n("2b5d")),rs=n("7e85"),cs=n("e516"),us=n("56a4"),ls=Object(c["a"])(os,Wo,Do,!1,null,"1591f064",null),vs=ls.exports;M()(ls,{VBtn:$t["a"],VCol:gt["a"],VCombobox:ss["a"],VContainer:Wt["a"],VIcon:H["a"],VList:ot["a"],VListItem:st["a"],VListItemIcon:ct["a"],VListItemTitle:rt["b"],VMenu:wn["a"],VNavigationDrawer:ut["a"],VRow:Gt["a"],VSpacer:$["a"],VStepper:rs["a"],VStepperContent:cs["a"],VStepperStep:us["a"],VTextField:qt["a"]});var ds=vs,hs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agv-movement",style:t.movementStyle,on:{contextmenu:t.onContextMenu}},[n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col"),n("v-col",{staticClass:"agv-movement-forward",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:0,y:1})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-up")])],1)],1),n("v-col")],1),n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col",{staticClass:"agv-movement-left",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:-1,y:0})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-left")])],1)],1),n("v-col"),n("v-col",{staticClass:"agv-movement-right",attrs:{align:"center",justify:"center"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:1,y:0})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-right")])],1)],1)],1),n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col"),n("v-col",{staticClass:"agv-movement-backward",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:0,y:-1})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-down")])],1)],1),n("v-col")],1)],1)},ps=[],ms=Object(V["a"])("navigation"),gs=ms.mapState,fs={name:"AgvrMovementButton",props:{width:{type:Number,default:null},height:{type:Number,default:null}},computed:Object(_["a"])(Object(_["a"])({},gs({navigationAgvId:function(t){return t.agvId}})),{},{movementStyle:function(){return{height:this.height?"".concat(this.height,"px"):null,width:this.width?"".concat(this.width,"px"):null}},rowStyle:function(){return{height:this.height?"".concat(this.height/3,"px"):null,width:this.width?"".concat(this.width,"px"):null}}}),methods:{move:function(t){this.$agvr.robots[this.navigationAgvId].pushCmdvel(mi.controlMetaToTwistMessage(t))},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()}}},bs=fs,ys=(n("54eb"),Object(c["a"])(bs,hs,ps,!1,null,"3b678a48",null)),xs=ys.exports;M()(ys,{VBtn:$t["a"],VCol:gt["a"],VIcon:H["a"],VRow:Gt["a"]});var ks=xs,ws=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",t._l(t.agvMapSmartPoints,(function(t){return i("image",{key:"agv-map-smart-point-"+t.id,attrs:{x:t.x-15,y:t.y-15,width:30,height:30,href:n("24e9")}})})),0)},Ms=[],Is=Object(V["a"])("agvMaps"),Ss=Is.mapState,js={name:"AgvrMapSmartPoint",props:{mapId:{type:String,default:""}},computed:Object(_["a"])({},Ss({agvMapSmartPoints:function(t){var e=this,n=t.find((function(t){return t.id===e.mapId}));return null!=n?n.smartWebPoints:[]}}))},Cs=js,Os=Object(c["a"])(Cs,ws,Ms,!1,null,null,null),Ts=Os.exports,Ps=Object(V["a"])("navigation"),As=Ps.mapState,_s=Ps.mapActions,Vs=Object(V["a"])("agvMaps"),Ls=Vs.mapState,Rs=Object(V["a"])("agvJobs"),Ws=Rs.mapActions,Ds={name:"AgvNavigation",components:{AgvrRobot:eo,AgvrEndTaskDirection:Ro,AgvrMapImage:_a,WayAgvToTaskPosition:Xa,WayFromTaskToTask:lo,AgvrTasksOnMap:Mo,AgvrRobotNavigationMenuContext:Zi,AgvrTaskMenuContext:pa,AgvrActionManagement:ds,AgvrJoyStickButton:Si,AgvrMovementButton:ks,AgvrMapSmartPoint:Ts},props:{map:{type:String,default:""}},data:function(){return{graphicID:"agv-map-zoompan-".concat(Ma["b"].v4()),panZoom:null,touchClientX:-1,touchClientY:-1,sgvWidth:0,sgvHeight:0}},computed:Object(_["a"])(Object(_["a"])({},As({navigationMapId:function(t){return t.mapId},navigationJobId:function(t){return t.jobId},navigationTaskId:function(t){return t.taskId},navigationAgvId:function(t){return t.agvId},navigationMapPanZoomEnable:function(t){return t.mapPanZoomEnable},navigationSelectionType:function(t){return t.selectionType},viewWidth:function(t){return t.viewWidth},viewHeight:function(t){return t.viewHeight},joystickButtonState:function(t){return t.joystickButton.isShow},movementButtonState:function(t){return t.movementButton.isShow}})),Ls({agvMapImage:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.Image:null},agvIdsOnMap:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.agvIds:[]},agvJobsIdOnMap:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.jobIds:[]},agvMapResolution:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.rosMap.info.resolution:1},agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1},agvMapSmartPoints:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.smartWebPoints:[]},agvRects:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.rects:[]}})),methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Ws(["pushTaskToJob","moveTaskPosition","setThetaEndOfTask"])),_s({navigationSubscribePose:"subscribePose",navigationUnsubscribePose:"unsubscribePose"})),{},{onPanZoomDoubleClick:function(t){var e=this.panZoom.getTransform(),n={x:(t.layerX-e.x)/e.scale,y:(t.layerY-e.y)/e.scale};this.pushTaskToJob({jobId:this.navigationJobId,x:n.x,y:n.y})},onInitZoomPan:function(t){this.panZoom=t},onMouseMove:function(t){var e=this.panZoom.getTransform();switch(this.navigationSelectionType){case 1:this.moveTaskPosition({jobId:this.navigationJobId,taskId:this.navigationTaskId,movementX:t.movementX/e.scale,movementY:t.movementY/e.scale,smartPoints:this.agvMapSmartPoints});break;case 2:this.setThetaEndOfTask({jobId:this.navigationJobId,taskId:this.navigationTaskId,mouse:{x:(t.layerX-e.x)/e.scale,y:(t.layerY-e.y)/e.scale}});break}},onTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY},onTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.onMouseMove({movementX:e.clientX-this.touchClientX,movementY:e.clientY-this.touchClientY,layerX:e.clientX,layerY:e.clientY}),this.touchClientX=e.clientX,this.touchClientY=e.clientY}},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()}}),watch:{navigationMapPanZoomEnable:function(t){t?this.panZoom.isPaused()&&this.panZoom.resume():this.panZoom.isPaused()||this.panZoom.pause()},agvMapImage:function(t){null!=t&&(this.sgvWidth=t.width,this.sgvHeight=t.height)}},mounted:function(){this.navigationSubscribePose(),null!=this.agvMapImage&&(this.sgvWidth=this.agvMapImage.width,this.sgvHeight=this.agvMapImage.height)},beforeDestroy:function(){this.navigationUnsubscribePose()}},Es=Ds,Js=(n("fdfe"),Object(c["a"])(Es,ka,wa,!1,null,"0509d2af",null)),zs=Js.exports;M()(Js,{VContainer:Wt["a"]});var Ys=zs,Bs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0 agv-navigation",attrs:{fluid:""}},[n("panZoom",{staticClass:"panzoom-map-initialize-pose-viewer",attrs:{selector:"#"+t.graphicID,options:{minZoom:.1,maxZoom:5,zoomSpeed:.05,zoomDoubleClickSpeed:1,onDoubleClick:t.onPanZoomDoubleClick,autocenter:!0}},on:{init:t.onInitZoomPan}},[n("svg",{staticClass:"map-viewer-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",height:null==t.agvMapImage||t.viewHeight>t.agvMapImage.height?t.viewHeight:t.agvMapImage.height,width:null==t.agvMapImage||t.viewWidth>t.agvMapImage.width?t.viewWidth:t.agvMapImage.width,id:t.graphicID},on:{mousemove:t.onMouseMove,contextmenu:t.onContextMenu}},[n("g",{on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd}},[n("AgvrMapImage",{attrs:{mapId:t.navigationMapId}}),n("AgvrRobotDirection",{attrs:{agvId:t.navigationAgvId}}),n("AgvrRobot",{attrs:{selectable:!0,agvId:t.navigationAgvId,agvMapResolution:t.agvMapResolution,agvMapScale:t.agvMapScale}})],1)])]),n("AgvrRobotInitPoseMenuContext")],1)},Xs=[],Zs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("defs",[n("marker",{attrs:{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"1",refY:"1",orient:"auto"}},[n("polygon",{staticStyle:{fill:"limegreen"},attrs:{points:"0 0, 3 1, 0 2"}})])]),n("line",{attrs:{x1:t.agvWebPose.position.x,y1:t.agvWebPose.position.y,x2:t.agvWebPose.position.x+100*Math.cos(t.agvWebPose.orientation.z*Math.PI/180),y2:t.agvWebPose.position.y-100*Math.sin(t.agvWebPose.orientation.z*Math.PI/180),stroke:"limegreen","stroke-width":"10","marker-end":"url(#arrowhead)"},on:{mousedown:t.selectedRobotDirection,touchstart:t.selectedRobotDirection}})])},Hs=[],$s=Object(V["a"])("agvs"),Ns=$s.mapState,Fs=Object(V["a"])("navigation"),Us=Fs.mapState,Gs=Fs.mapActions,qs={name:"AgvrRobotDirection",props:{agvId:{type:String,default:""}},computed:Object(_["a"])(Object(_["a"])({},Ns({agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}}}})),Us({isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),methods:Object(_["a"])(Object(_["a"])({},Gs({navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedRobotDirection:"selectedRobotDirection"})),{},{selectedRobotDirection:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedRobotDirection())}})},Qs=qs,Ks=Object(c["a"])(Qs,Zs,Hs,!1,null,null,null),tr=Ks.exports,er=tr,nr=Object(V["a"])("navigation"),ir=nr.mapState,ar=Object(V["a"])("agvMaps"),or=ar.mapState,sr=Object(V["a"])("agvs"),rr=sr.mapActions,cr={name:"AgvInitializeNavigation",components:{AgvrRobot:eo,AgvrRobotDirection:er,AgvrMapImage:_a,AgvrRobotInitPoseMenuContext:ta},data:function(){return{graphicID:"agv-map-zoompan-initialize-pose-".concat(Ma["b"].v4()),panZoom:null,touchClientX:-1,touchClientY:-1,sgvWidth:0,sgvHeight:0}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},ir({navigationMapId:function(t){return t.mapId},navigationAgvId:function(t){return t.agvId}})),or({agvMapImage:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.Image:null},agvMapResolution:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.rosMap.info.resolution:1},agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1}})),Object(V["d"])({navigationWebMap:function(t){return t.ros.maps[t.navigation.selectedMapId].webMap},viewWidth:function(t){return t.navigation.viewWidth},viewHeight:function(t){return t.navigation.viewHeight},navigationSelectionType:function(t){return t.navigation.selectionType},navigationMapPanZoomEnable:function(t){return t.navigation.mapPanZoomEnable}})),methods:Object(_["a"])(Object(_["a"])({},rr({moveAgvPosition:"moveAgvPosition",changeAgvDirection:"changeAgvDirection"})),{},{onInitZoomPan:function(t){this.panZoom=t},onMouseMove:function(t){var e=this.panZoom.getTransform();switch(this.navigationSelectionType){case 3:this.moveAgvPosition({movementX:t.movementX/e.scale,movementY:t.movementY/e.scale,agvId:this.navigationAgvId});break;case 4:this.changeAgvDirection({mouse:{x:(t.layerX-e.x)/e.scale,y:(t.layerY-e.y)/e.scale},agvId:this.navigationAgvId});break}},onTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY},onTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.onMouseMove({movementX:e.clientX-this.touchClientX,movementY:e.clientY-this.touchClientY,layerX:e.clientX,layerY:e.clientY}),this.touchClientX=e.clientX,this.touchClientY=e.clientY}},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()},onPanZoomDoubleClick:function(){}}),watch:{navigationMapPanZoomEnable:function(t){t?this.panZoom.isPaused()&&this.panZoom.resume():this.panZoom.isPaused()||this.panZoom.pause()},agvMapImage:function(t){null!=t&&(this.sgvWidth=t.width,this.sgvHeight=t.height)}},mounted:function(){null!=this.agvMapImage&&(this.sgvWidth=this.agvMapImage.width,this.sgvHeight=this.agvMapImage.height)}},ur=cr,lr=(n("415e"),Object(c["a"])(ur,Bs,Xs,!1,null,"8f733e86",null)),vr=lr.exports;M()(lr,{VContainer:Wt["a"]});var dr=vr,hr=[{path:"",component:Ue,meta:{title:"Overview"}},{path:"navigation",component:An,children:[{path:"/",component:Ys,meta:{title:"Navigation"}},{path:"init",component:dr,meta:{title:"Navigation Initialize Pose"}}]},{path:"manual",component:xa,meta:{title:"Navigation Manual"}},{path:"settings",component:ai,meta:{title:"Setting"}},{path:"security",component:li,meta:{title:"Security"}}];i["default"].use(v["a"]);var pr=new v["a"]({mode:"hash",base:"/",routes:[{path:"/",component:f,children:[{path:"introduce",component:Mt,children:Jt,meta:{title:"Introduce"}},{path:"login",component:C,children:ee,meta:{title:"Login"}},{path:"logout",component:Tt,children:le,meta:{title:"Logout"}},{path:"",component:Mt,children:hr,meta:{title:"Dashboard"}}]}]});pr.beforeEach((function(t,e,n){var a=i["default"].prototype.$store.state.account.token;null!=a&&a.length>0?"/login"===t.path?n("/"):(document.title=t.meta.title?t.meta.title:"AGV PRATI",n()):"/login"===t.path?n():n("/login")}));var mr=pr,gr={},fr={setProperty:function(t,e){t.commit("setProperty",e)},insertTaskAfterToJob:function(t){t.commit("insertTaskAfterToJob")},insertTaskBeforeToJob:function(t){t.commit("insertTaskBeforeToJob")},removeSelectedTaskFromJob:function(t){t.commit("removeSelectedTaskFromJob")},remoceTaskFromSelectedJob:function(t,e){t.commit("remoceTaskFromSelectedJob",e)},setThetaEndOfSelectedTask:function(t,e){t.commit("setThetaEndOfSelectedTask",e)},moveSelectedAgv:function(t,e){t.commit("moveSelectedAgv",e)},changeSelectedAgvDirection:function(t,e){t.commit("changeSelectedAgvDirection",e)},moveSelectedAgvToCenterMap:function(t){t.commit("moveSelectedAgvToCenterMap")},setSelectedAgvPosition:function(t,e){t.commit("setSelectedAgvPosition",e)},setSelectedAgvDirection:function(t,e){t.commit("setSelectedAgvDirection",e)},addGoalToCar:function(t){t.commit("addGoalToCar")},setSelectedAgvStatus:function(t,e){t.commit("setSelectedAgvStatus",e)},updateActionsOfSelectedTask:function(t,e){t.commit("updateActionsOfSelectedTask",e)}},br={getPoseStampedTaskOfSelectedJob:function(t){return function(e){var n=t.agvJobs.find((function(e){return e.id===t.navigation.selectedJobId}));if(e<0||e>=n.tasks.length)return null;var i=t.agvMaps.find((function(e){return e.id===t.navigation.selectedMapId})),a=n.tasks[e];return{orientation:bi.globalThetaToQuaternion(a.thetaEnd*Math.PI/180),position:{x:i.rosMap.info.origin.position.x+a.position.x*i.rosMap.info.resolution/i.webMap.scale,y:i.rosMap.info.origin.position.y-(a.position.y/i.webMap.scale-i.rosMap.info.height)*i.rosMap.info.resolution,z:0}}}},getListActionOfSelectedTask:function(t){return function(){if(t.navigation.selectedIndexTask<0)return[];var e=t.agvJobs.find((function(e){return e.id===t.navigation.selectedJobId})).tasks;return t.navigation.selectedIndexTask>=e.length?[]:e[t.navigation.selectedIndexTask].actions}}},yr={toggleNavigationMenu:function(t,e){t.commit("toggleNavigationMenu",e)}},xr={toggleNavigationMenu:function(t,e){t.isShowNavigationMenu=e}},kr={isShowNavigationMenu:!1,navigationMenu:[{title:"Dashboard",icon:"mdi-view-dashboard",to:"/"},{title:"Navigation",icon:"mdi-near-me",to:"/navigation"},{title:"Manual",icon:"mdi-gamepad",to:"/manual"},{title:"Setting",icon:"mdi-card-bulleted-settings",to:"/settings"},{title:"Introduce",icon:"mdi-view-carousel-outline",to:"/introduce"},{title:"Logout",icon:"mdi-logout-variant",to:"/logout"}]},wr={},Mr={rosConnected:!1},Ir={},Sr={},jr={},Cr={namespaced:!0,state:Mr,getters:Ir,mutations:Sr,actions:jr},Or={rosConnected:!1},Tr={},Pr={setRosConnectionState:function(t,e){t.rosConnected=e}},Ar={rosConnected:function(t){t.commit("setRosConnectionState",!0)},rosDisconnected:function(t){t.commit("setRosConnectionState",!1)}},_r={namespaced:!0,state:Or,getters:Tr,mutations:Pr,actions:Ar},Vr={overview:Cr,agvnavigation:_r},Lr={namespaced:!0,state:kr,getters:wr,mutations:xr,actions:yr,modules:Vr},Rr={setSelectedTaskId:function(t,e){t.commit("setSelectedTaskId",e)},showTaskMenuContext:function(t,e){t.commit("showTaskMenuContext",e),t.commit("setMapPanZoomEnable",!1)},hideTaskMenuContext:function(t){t.commit("hideTaskMenuContext"),t.commit("setMapPanZoomEnable",!0)},showAgvMenuContext:function(t,e){t.commit("showAgvMenuContext",e),t.commit("setMapPanZoomEnable",!1)},hideAgvMenuContext:function(t){t.commit("hideAgvMenuContext"),t.commit("setMapPanZoomEnable",!0)},showAgvInitPoseMenuContext:function(t,e){t.commit("showAgvInitPoseMenuContext",e),t.commit("setMapPanZoomEnable",!1)},hideAgvInitPoseMenuContext:function(t){t.commit("hideAgvInitPoseMenuContext"),t.commit("setMapPanZoomEnable",!0)},selectedNone:function(t){t.commit("setSelectionType",-1)},selectedTaskPosition:function(t){t.commit("setSelectionType",1)},selectedTaskThetaEnd:function(t){t.commit("setSelectionType",2)},selectedRobot:function(t){t.commit("setSelectionType",3)},selectedRobotDirection:function(t){t.commit("setSelectionType",4)},enableMapPanZoom:function(t){t.commit("setMapPanZoomEnable",!0)},disableMapPanZoom:function(t){t.commit("setMapPanZoomEnable",!1)},showActionManagement:function(t){t.commit("showActionManagement")},hideActionManagement:function(t){t.commit("hideActionManagement")},showJoystickButton:function(t){t.commit("setJoystickButtonShowSate",!0)},hideJoystickButton:function(t){t.commit("setJoystickButtonShowSate",!1)},showMovementButton:function(t){t.commit("setMovementButtonShowSate",!0)},hideMovementButton:function(t){t.commit("setMovementButtonShowSate",!1)},changeWindowSize:function(t,e){t.commit("changeWindowSize",e)},setNavigationState:function(t,e){t.commit("setNavigationState",e)},subscribePose:function(t){return t.commit("subscribePose")},unsubscribePose:function(t){return t.commit("unsubscribePose")}},Wr=(n("8ba4"),{setSelectedTaskId:function(t,e){t.taskId=e},showTaskMenuContext:function(t,e){t.taskMenuContext={position:{x:"number"===typeof e.x?e.x:0,y:"number"===typeof e.y?e.y:0},isShow:!0}},hideTaskMenuContext:function(t){t.taskMenuContext.isShow=!1},showAgvMenuContext:function(t,e){t.agvMenuContext={position:{x:"number"===typeof e.x?e.x:0,y:"number"===typeof e.y?e.y:0},isShow:!0}},hideAgvMenuContext:function(t){t.agvMenuContext.isShow=!1},showAgvInitPoseMenuContext:function(t,e){t.agvInitPoseMenuContext={position:{x:"number"===typeof e.x?e.x:0,y:"number"===typeof e.y?e.y:0},isShow:!0}},hideAgvInitPoseMenuContext:function(t){t.agvInitPoseMenuContext.isShow=!1},setSelectionType:function(t,e){Number.isInteger(e)&&(t.selectionType=e)},setMapPanZoomEnable:function(t,e){t.mapPanZoomEnable=e},showActionManagement:function(t){t.actionManagement.isShow=!0},hideActionManagement:function(t){t.actionManagement.isShow=!1},setJoystickButtonShowSate:function(t,e){t.joystickButton.isShow=e},setMovementButtonShowSate:function(t,e){t.movementButton.isShow=e},changeWindowSize:function(t,e){t.viewHeight=e.height,t.viewWidth=e.width},setNavigationState:function(t,e){t.navigationState=e},subscribePose:function(t){t.subscribePose=!0},unsubscribePose:function(t){t.subscribePose=!1}}),Dr={selectedMapId:"6defbba5-0f1f-4b43-a32e-a24247bac7d8",selectedAgvId:"8ee52be3-90d0-4ea9-8af5-b0c689a59030",selectedJobId:"cca29e49-d556-4c1a-af17-3f870b50ca06",selectionType:-1,selectedIndexTask:-1,mapPanZoomEnable:!0,taskMenuContext:{position:{x:0,y:0},isShow:!1},agvMenuContext:{position:{x:0,y:0},isShow:!1},agvInitPoseMenuContext:{position:{x:0,y:0},isShow:!1},actionManagement:{isShow:!1},joystickButton:{isShow:!1},movementButton:{isShow:!1},navigationState:"navigation",viewHeight:0,viewWidth:0,mapId:"6defbba5-0f1f-4b43-a32e-a24247bac7d8",jobId:"cca29e49-d556-4c1a-af17-3f870b50ca06",agvId:"8ee52be3-90d0-4ea9-8af5-b0c689a59030",taskId:"",subscribePose:!1},Er={},Jr={namespaced:!0,state:Dr,getters:Er,mutations:Wr,actions:Rr},zr={},Yr={},Br={settings:[{pathStore:["ros","agvs","8ee52be3-90d0-4ea9-8af5-b0c689a59030","properties"],text:"AGV",type:"group",settings:[{pathStore:["movementSpeed"],text:"Movement",type:"group",settings:[{pathStore:["x"],text:"X axit",type:"double",default:0,unit:"m/s",step:.1},{pathStore:["y"],text:"Y axit",type:"double",default:0,unit:"m/s",step:.1},{pathStore:["z"],text:"Z axit",type:"double",default:0,unit:"m/s",step:.1}]},{pathStore:["rotateSpeed"],text:"Rotate",type:"group",settings:[{pathStore:["x"],text:"X axit",type:"double",default:0,unit:"rad/s",step:.1},{pathStore:["y"],text:"Y axit",type:"double",default:0,unit:"rad/s",step:.1},{pathStore:["z"],text:"Z axit",type:"double",default:0,unit:"rad/s",step:.1}]}]}]},Xr={},Zr={namespaced:!0,state:Br,getters:Xr,mutations:Yr,actions:zr},Hr={setToken:function(t,e){t.commit("setToken",e)}},$r={setToken:function(t,e){t.token=e,localStorage.setItem("agvr-account-token",e)}},Nr={token:","},Fr={},Ur={namespaced:!0,state:Nr,getters:Fr,mutations:$r,actions:Hr},Gr={},qr=(n("d81d"),{setRosMap:function(t,e){var n=t.find((function(t){return t.id===e.id}));if(null!=n){n.rosMap=e.map;for(var i=n.webMap.scale,a=n.rosMap.info,o=n.rosMap.data,s=new ImageData(a.width*i,a.height*i),r=(a.height-1)*a.width,c=0;c<a.height;c++,r-=2*a.width)for(var u=0;u<a.width;u++,r++){var l=o[r];l=100===o[r]?0:0===o[r]?255:180;for(var v=4*(u*i+c*i*a.width*i),d=0;d<i;d++,v+=(a.width-1)*i*4)for(var h=0;h<i;h++)s.data[v++]=l,s.data[v++]=l,s.data[v++]=l,s.data[v++]=255}n.webMap.Image=s;for(var p=[],m=0;m<n.smartPoints.length;m++)p.push({id:n.smartPoints[m].id,x:(-a.origin.position.x+n.smartPoints[m].x)/a.resolution*i,y:(a.height+(a.origin.position.y-n.smartPoints[m].y)/a.resolution)*i});n.smartWebPoints=p}},setConnectionState:function(t,e){var n=t.find((function(t){return t.id===e.id}));null!=n&&(n.rosConntectionState=e.isConnected)}}),Qr=[{id:"6defbba5-0f1f-4b43-a32e-a24247bac7d8",rosMasterUri:"ws://172.20.90.160:9090",rosConntectionState:!1,rosMap:{data:[],header:{frame_id:"",seq:0,stamp:{nsecs:0,secs:0}},info:{width:0,height:0,resolution:1,origin:{orientation:{w:0,x:0,y:0,z:0},position:{x:0,y:0,z:0}},map_load_time:{nsecs:0,secs:0}}},webMap:{scale:10,Image:null},smartPoints:[{x:2.6,y:41.1,id:"b675580d-622b-4efe-a753-f2ee4dc05676"},{x:26.75,y:36.55,id:"55085e64-e0e8-4209-83cd-7c77f9b4def7"},{x:26.75,y:37.85,id:"a8929ef9-a7bc-4cfd-b8e2-2844b8de0d97"},{x:43.45,y:37.85,id:"d9805647-fd8f-4f21-a7a0-782f83d0eac9"},{x:4.5,y:37.85,id:"e5d5db62-d051-4280-937e-c82bab5c5e5d"}],rects:[],smartWebPoints:[],agvIds:["8ee52be3-90d0-4ea9-8af5-b0c689a59030"],jobIds:["cca29e49-d556-4c1a-af17-3f870b50ca06"],missions:[{name:"Task 1",tasks:[{id:"68792207-77c8-40b4-9494-bc509bf6ce19",position:{x:334.99999500811106,y:1415.0000166147943,z:0},thetaEnd:-60,actions:[{step:"b7b5c931-aa93-4d34-b0d8-81d7410d6509",name:"New step",action:9}]},{id:"625c737d-1e6a-4cc5-affc-164a61c125fd",position:{x:554.9999917298557,y:1740.000011771917,z:0},thetaEnd:0,actions:[]},{id:"eae267c2-a769-4bf2-b3a1-b68af73b8446",position:{x:4449.999933689834,y:1740.000011771917,z:0},thetaEnd:-90,actions:[{step:"fcc4b4b2-72dc-4215-9a44-ebfe0681e8a3",name:"New step",action:8},{step:"20a43399-bfbb-41f6-a929-2c01f165ead2",name:"New step",action:10}]}]},{name:"Task 2",tasks:[{id:"538b17e9-f35a-4956-a08a-72ddff9ac0dd",position:{x:733.1140885853905,y:995.7724208187486},thetaEnd:0,actions:[]},{id:"2cb27dd6-60d2-4264-a7a0-9bfa63238ee8",position:{x:829.9999876320364,y:1758.000011503696,z:0},thetaEnd:26,actions:[{step:"60633591-9df6-4145-9c9e-8cd7f498a4a7",name:"New step",action:7},{step:"4cdc3bf5-55b7-4470-b193-5098a5f83fb6",name:"New step",action:10},{step:"1050b17e-11cb-4808-b4f5-933f4ebc2bbd",name:"New step",action:11}]},{id:"9ac1f398-4f4a-47a4-8326-51b00fbde238",position:{x:2315.290277736195,y:1786.8605153941528},thetaEnd:-48.57633437499734,actions:[]}]}]}],Kr={},tc={namespaced:!0,state:Qr,getters:Kr,mutations:qr,actions:Gr},ec={pushTaskToJob:function(t,e){return t.commit("pushTaskToJob",e)},moveTaskPosition:function(t,e){return t.commit("moveTaskPosition",e)},setThetaEndOfTask:function(t,e){return t.commit("setThetaEndOfTask",e)},insertTaskAfterToJob:function(t,e){return t.commit("insertTaskAfterToJob",e)},insertTaskBeforeToJob:function(t,e){return t.commit("insertTaskBeforeToJob",e)},removeTaskFromJob:function(t,e){return t.commit("removeTaskFromJob",e)},updateActions:function(t,e){return t.commit("updateActions",e)},setTasks:function(t,e){return t.commit("setTasks",e)}},nc=(n("c740"),{pushTaskToJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=0;if(n.tasks.length>0){var a=n.tasks[n.tasks.length-1].position;i=180*Math.atan2(a.y-e.y,e.x-a.x)/Math.PI}var o=Ma["b"].v4();while(o in n.tasks)o=Ma["b"].v4();n.tasks.push({id:o,position:{x:e.x,y:e.y,z:0},thetaEnd:i,actions:[]})}},moveTaskPosition:function(t,e){if(!isNaN(e.movementX)&&!isNaN(e.movementY)){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.find((function(t){return t.id===e.taskId}));if(null!=i){var a={x:i.position.x+e.movementX,y:i.position.y+e.movementY};if(e.smartPoints&&e.smartPoints.length>0)for(var o=0;o<e.smartPoints.length;o++)if(Math.sqrt(Math.pow(e.smartPoints[o].x-a.x,2)+Math.pow(e.smartPoints[o].y-a.y,2))<15){a={x:e.smartPoints[o].x,y:e.smartPoints[o].y};break}i.position=a}}}},setThetaEndOfTask:function(t,e){if(!isNaN(e.mouse.x)&&!isNaN(e.mouse.y)){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.find((function(t){return t.id===e.taskId}));if(null!=i){var a=Math.atan2(i.position.y-e.mouse.y,e.mouse.x-i.position.x);i.thetaEnd=180*a/Math.PI}}}},insertTaskAfterToJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.findIndex((function(t){return t.id===e.taskId}));if(!(i<0||i>=n.tasks.length-1)){var a={x:(n.tasks[i].position.x+n.tasks[i+1].position.x)/2,y:(n.tasks[i].position.y+n.tasks[i+1].position.y)/2},o=n.tasks[i].position;n.tasks.splice(i+1,0,{id:Ma["b"].v4(),position:{x:a.x,y:a.y,z:0},thetaEnd:180*Math.atan2(o.y-a.y,a.x-o.x)/Math.PI,actions:[]})}}},insertTaskBeforeToJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.findIndex((function(t){return t.id===e.taskId}));if(!(i>=n.tasks.length-1)){var a=null;a=0==i?e.agvPosition:n.tasks[i-1].position;var o={x:(a.x+n.tasks[i].position.x)/2,y:(a.y+n.tasks[i].position.y)/2};n.tasks.splice(i,0,{id:Ma["b"].v4(),position:{x:o.x,y:o.y,z:0},thetaEnd:180*Math.atan2(a.y-o.y,o.x-a.x)/Math.PI,actions:[]})}}},removeTaskFromJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.findIndex((function(t){return t.id===e.taskId}));i>=0&&i<n.tasks.length&&n.tasks.splice(i,1)}},clearTaskFromJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));null!=n&&(n.tasks=[])},updateActions:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.find((function(t){return t.id===e.taskId}));null!=n&&(i.actions=e.actions,i.position=e.position,i.thetaEnd=e.thetaEnd)}},setTasks:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));null!=n&&(n.tasks=e.tasks)}}),ic=[{id:"cca29e49-d556-4c1a-af17-3f870b50ca06",tasks:[]}],ac={getPoseStampedTask:function(t){return function(e){var n=t.find((function(t){return t.id===e.jobId}));if(null==n||0==n.tasks.length)return null;var i=null;return i=null==e.taskId?n.tasks[0]:n.tasks.find((function(t){return t.id===e.taskId})),null==i?null:(console.log(e),{orientation:bi.globalThetaToQuaternion(i.thetaEnd*Math.PI/180),position:{x:e.mapRosInfo.origin.position.x+i.position.x*e.mapRosInfo.resolution/e.mapScale,y:e.mapRosInfo.origin.position.y-(i.position.y/e.mapScale-e.mapRosInfo.height)*e.mapRosInfo.resolution,z:0}})}},getLastTask:function(t){return function(e){var n=t.find((function(t){return t.id===e}));return null==n||0==n.tasks.length?null:n.tasks[n.tasks.length-1]}}},oc={namespaced:!0,state:ic,getters:ac,mutations:nc,actions:ec},sc={moveAgvPosition:function(t,e){return t.commit("moveAgvPosition",e)},changeAgvDirection:function(t,e){return t.commit("changeAgvDirection",e)},setAgvDirection:function(t,e){return t.commit("setAgvDirection",e)},setAgvPosition:function(t,e){return t.commit("setAgvPosition",e)},setAgvStatus:function(t,e){return t.commit("setAgvStatus",e)},setAgvTask:function(t,e){return t.commit("setAgvTask",e)}};function rc(t,e,n){return{x:(-e.origin.position.x+t.x)/e.resolution*n,y:(e.height+(e.origin.position.y-t.y)/e.resolution)*n,z:0}}var cc={setConnectionState:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.rosConntectionState=e.isConnected)},setSim1000Pose:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.sim1000Pose=e.pose,n.webPose={position:rc({x:e.pose.posex/1e3,y:e.pose.posey/1e3},e.rosMap.info,e.mapScale),orientation:{x:0,y:0,z:e.pose.poseyaw/1e3}})},moveAgvPosition:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.webPose.position.x+=e.movementX,n.webPose.position.y+=e.movementY)},changeAgvDirection:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));if(null!=n){var i=Math.atan2(n.webPose.position.y-e.mouse.y,e.mouse.x-n.webPose.position.x);n.webPose.orientation.z=180*i/Math.PI}},setAgvDirection:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.webPose.orientation={x:e.x,y:e.y,z:e.z})},setAgvPosition:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.webPose.position={x:e.x,y:e.y,z:e.z})},setAgvStatus:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.statusDevices=e.status)},setAgvTask:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.taskId=e.taskId)}},uc=[{id:"8ee52be3-90d0-4ea9-8af5-b0c689a59030",rosMasterUri:"ws://172.20.90.160:9090",rosConntectionState:!1,sim1000Pose:{posex:0,posey:0,poseyaw:0,quality:0},webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}},size:{width:.65,height:1.01},properties:{movementSpeed:{x:.3,y:0,z:0},rotateSpeed:{x:0,y:0,z:1}},statusDevices:[],statusDeviceSelected:{level:0,name:"",message:"",hardware_id:"",values:[]},laserScan:{angle_increment:.0017453276086598635,angle_max:1.9967143535614014,angle_min:-1.9949116706848145,ranges:[]},webLaserScan:[],jobId:"cca29e49-d556-4c1a-af17-3f870b50ca06",jobStatus:"",taskId:null,taskStatus:"",actionId:null,actionStatus:""}],lc={},vc={namespaced:!0,state:uc,getters:lc,mutations:cc,actions:sc},dc={dashboard:Lr,navigation:Jr,settings:Zr,account:Ur,agvMaps:tc,agvJobs:oc,agvs:vc},hc={setProperty:function(t,e){Jn.setDeepProperty(t,e.value,e.properties)},insertTaskBeforeToJob:function(t){this.commit("ros/jobs/insertTaskBeforeToJob",{jobId:t.navigation.selectedJobId,indexTask:t.navigation.selectedIndexTask,agvPosition:t.agvs.find((function(e){return e.id===t.navigation.selectedAgvId})).webPose.position})},insertTaskAfterToJob:function(t){this.commit("ros/jobs/insertTaskAfterToJob",{jobId:t.navigation.selectedJobId,indexTask:t.navigation.selectedIndexTask})},removeSelectedTaskFromJob:function(t){this.commit("ros/jobs/removeTaskFromJob",{jobId:t.navigation.selectedJobId,index:t.navigation.selectedIndexTask})},remoceTaskFromSelectedJob:function(t,e){this.commit("ros/jobs/removeTaskFromJob",{jobId:t.navigation.selectedJobId,index:e.index})},setThetaEndOfSelectedTask:function(t,e){this.commit("ros/jobs/setThetaEndOfTask",{jobId:t.navigation.selectedJobId,index:t.navigation.selectedIndexTask,mouse:e.mouse})},moveSelectedAgv:function(t,e){this.commit("ros/agvs/chanegAgvPosition",{agvId:t.navigation.selectedAgvId,movementX:e.movementX,movementY:e.movementY})},changeSelectedAgvDirection:function(t,e){this.commit("ros/agvs/changeAgvDirection",{agvId:t.navigation.selectedAgvId,mouse:e.mouse})},moveSelectedAgvToCenterMap:function(t){var e=t.agvMaps.find((function(e){return e.id===t.navigation.selectedMapId})).webMap;this.commit("ros/agvs/setAgvPosition",{agvId:t.navigation.selectedAgvId,x:e.width/2,y:e.height/2})},setSelectedAgvPosition:function(t,e){this.commit("ros/agvs/setAgvPosition",{agvId:t.navigation.selectedAgvId,x:e.x,y:e.y})},setSelectedAgvDirection:function(t,e){this.commit("ros/agvs/setAgvDirection",{agvId:t.navigation.selectedAgvId,theta:e.theta})},addGoalToCar:function(t){var e={x:0,y:0,theta:0},n=t.agvJobs.find((function(e){return e.id===t.navigation.selectedJobId}));if(0==n.tasks.length){var i=t.agvs.find((function(e){return e.id===t.navigation.selectedAgvId}));e.x=i.webPose.position.x,e.y=i.webPose.position.y,e.theta=i.webPose.orientation.theta}else{var a=n.tasks[n.tasks.length-1];e.x=a.position.x,e.y=a.position.y,e.theta=a.thetaEnd}var o={x:e.x+100*Math.cos(e.theta*Math.PI/180),y:e.y-100*Math.sin(e.theta*Math.PI/180)};this.commit("ros/jobs/pushTaskToJob",{jobId:t.navigation.selectedJobId,x:o.x,y:o.y})},setSelectedAgvStatus:function(t,e){this.commit("ros/agvs/setAgvStatus",{agvId:t.navigation.selectedAgvId,status:e})},updateActionsOfSelectedTask:function(t,e){this.commit("ros/jobs/updateActions",{jobId:t.navigation.selectedJobId,index:t.navigation.selectedIndexTask,actions:e.actions})}};i["default"].use(V["b"]);var pc=new V["b"].Store({actions:fr,getters:br,modules:dc,mutations:hc,state:gr}),mc=(n("5363"),n("f309"));i["default"].use(mc["a"]);var gc=new mc["a"]({}),fc=n("2d7e"),bc=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("d4ec")),yc=n("9bd1"),xc=n("bee2"),kc=n("5364"),wc="6defbba5-0f1f-4b43-a32e-a24247bac7d8",Mc=new WeakMap,Ic=new WeakMap,Sc=new WeakMap,jc=new WeakMap,Cc=new WeakMap,Oc=new WeakMap,Tc=new WeakMap,Pc=new WeakMap,Ac=new WeakMap,_c=new WeakMap,Vc=function(){function t(e){var n=this;Object(bc["a"])(this,t),Mc.set(this,{writable:!0,value:null}),Ic.set(this,{writable:!0,value:null}),Sc.set(this,{writable:!0,value:null}),jc.set(this,{writable:!0,value:null}),Cc.set(this,{writable:!0,value:null}),Oc.set(this,{writable:!0,value:null}),Tc.set(this,{writable:!0,value:function(){Object(yc["a"])(n,Ic,new fi.a.Ros({url:Object(kc["a"])(n,Sc)})),Object(kc["a"])(n,Ic).on("connection",Object(kc["a"])(n,Pc)),Object(kc["a"])(n,Ic).on("close",Object(kc["a"])(n,Ac)),Object(kc["a"])(n,Ic).on("error",(function(t){return console.log("AGVR error: ",t)}))}}),Pc.set(this,{writable:!0,value:function(){Object(yc["a"])(n,Cc,new fi.a.Topic({ros:Object(kc["a"])(n,Ic),name:"/map",messageType:"nav_msgs/OccupancyGrid"})),Object(kc["a"])(n,Cc).subscribe(Object(kc["a"])(n,_c)),Object(kc["a"])(n,jc).commit("agvMaps/setConnectionState",{id:Object(kc["a"])(n,Mc),isConnected:!0})}}),Ac.set(this,{writable:!0,value:function(){null!=Object(kc["a"])(n,Cc)&&(Object(yc["a"])(n,Cc,null),Object(kc["a"])(n,jc).commit("agvMaps/setConnectionState",{id:Object(kc["a"])(n,Mc),isConnected:!0})),setTimeout(Object(kc["a"])(n,Tc),3e3)}}),_c.set(this,{writable:!0,value:function(t){Object(kc["a"])(n,jc).commit("agvMaps/setRosMap",{id:wc,map:t})}}),Object(yc["a"])(this,Mc,e),Object(yc["a"])(this,jc,i["default"].prototype.$store),Object(yc["a"])(this,Sc,Object(kc["a"])(this,jc).state.agvMaps.find((function(t){return t.id===Object(kc["a"])(n,Mc)})).rosMasterUri),Object(kc["a"])(this,Tc).call(this)}return Object(xc["a"])(t,[{key:"dispose",value:function(){Object(yc["a"])(this,Cc,null)}}]),t}(),Lc=(n("b0c0"),n("96cf"),n("1da1")),Rc=new WeakMap,Wc=new WeakMap,Dc=new WeakMap,Ec=new WeakMap,Jc=function(){function t(e,n){var a=this;Object(bc["a"])(this,t),Rc.set(this,{writable:!0,value:null}),Wc.set(this,{writable:!0,value:null}),Dc.set(this,{writable:!0,value:null}),Ec.set(this,{writable:!0,value:function(t){Object(kc["a"])(a,Rc).dispatch("agvs/setAgvStatus",{agvId:Object(kc["a"])(a,Dc),status:t.status})}}),e instanceof fi.a.Ros&&(Object(yc["a"])(this,Dc,n),Object(yc["a"])(this,Rc,i["default"].prototype.$store),Object(yc["a"])(this,Wc,new fi.a.Topic({ros:e,name:"/diagnostics_agg",messageType:"diagnostic_msgs/DiagnosticArray"})),Object(kc["a"])(this,Wc).subscribe(Object(kc["a"])(this,Ec)))}return Object(xc["a"])(t,[{key:"dispose",value:function(){null!=Object(kc["a"])(this,Wc)&&(Object(kc["a"])(this,Wc).unsubscribe(),Object(yc["a"])(this,Wc,null))}}]),t}(),zc=0,Yc=1,Bc=3,Xc=5;function Zc(t){return new Promise((function(e){return setTimeout(e,t)}))}var Hc=new WeakMap,$c=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,Uc=new WeakMap,Gc=function(){function t(e){var n=this;Object(bc["a"])(this,t),Hc.set(this,{writable:!0,value:null}),$c.set(this,{writable:!0,value:null}),Nc.set(this,{writable:!0,value:{}}),Fc.set(this,{writable:!0,value:function(t){Object(kc["a"])(n,Nc)[t.action_id]=t.status}}),Uc.set(this,{writable:!0,value:function(t){if(null!=Object(kc["a"])(n,Hc)){var e="action-".concat(Ma["b"].v4());Object(kc["a"])(n,Hc).publish(new fi.a.Message({header:{seq:0,stamp:0,frame_id:""},action:t.value,status:Yc,action_id:e,type:t.type,data:JSON.stringify(t.data)}))}}}),e instanceof fi.a.Ros&&(Object(yc["a"])(this,Hc,new fi.a.Topic({ros:e,name:"/agv_action",messageType:"agv_define/agv_action"})),Object(yc["a"])(this,$c,new fi.a.Topic({ros:e,name:"/action_status",messageType:"agv_define/agv_action"})),Object(kc["a"])(this,$c).subscribe(Object(kc["a"])(this,Fc)))}return Object(xc["a"])(t,[{key:"pushAction",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],null!=Object(kc["a"])(this,Hc)){t.next=3;break}return t.abrupt("return",Xc);case 3:if(i="action-".concat(Ma["b"].v4()),!0===n&&(Object(kc["a"])(this,Nc)[i]=zc),Object(kc["a"])(this,Hc).publish(new fi.a.Message({header:{seq:0,stamp:0,frame_id:""},action:e.value,status:Yc,action_id:i,type:e.type,data:JSON.stringify(e.data)})),!0!==n){t.next=21;break}a=0;case 8:if(!(Object(kc["a"])(this,Nc)[i]===zc&&a<300)){t.next=14;break}return a++,t.next=12,Zc(500);case 12:t.next=8;break;case 14:if(Object(kc["a"])(this,Nc)[i]!==Yc){t.next=20;break}case 15:if(Object(kc["a"])(this,Nc)[i]!==Yc){t.next=20;break}return t.next=18,Zc(500);case 18:t.next=15;break;case 20:return t.abrupt("return",Object(kc["a"])(this,Nc)[i]);case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"dispose",value:function(){Object(yc["a"])(this,Hc,null)}}]),t}(),qc=new WeakMap,Qc=new WeakMap,Kc=new WeakMap,tu=new WeakMap,eu=new WeakMap,nu=function(){function t(e,n,a){var o=this;Object(bc["a"])(this,t),qc.set(this,{writable:!0,value:null}),Qc.set(this,{writable:!0,value:null}),Kc.set(this,{writable:!0,value:null}),tu.set(this,{writable:!0,value:null}),eu.set(this,{writable:!0,value:function(t){Object(kc["a"])(o,Kc).state.navigation.subscribePose&&Object(kc["a"])(o,Kc).commit("agvs/setSim1000Pose",{pose:t.telegram_payload,agvId:Object(kc["a"])(o,qc),rosMap:Object(kc["a"])(o,Qc).rosMap,mapScale:Object(kc["a"])(o,Qc).webMap.scale})}}),e instanceof fi.a.Ros&&(Object(yc["a"])(this,Kc,i["default"].prototype.$store),Object(yc["a"])(this,qc,n),Object(yc["a"])(this,Qc,Object(kc["a"])(this,Kc).state.agvMaps.find((function(t){return t.id===a}))),Object(yc["a"])(this,tu,new fi.a.Topic({ros:e,name:"/sick_lidar_localization/driver/result_telegrams",messageType:"sick_lidar_localization/SickLocResultPortTelegramMsg"})),Object(kc["a"])(this,tu).subscribe(Object(kc["a"])(this,eu)))}return Object(xc["a"])(t,[{key:"dispose",value:function(){null!=Object(kc["a"])(this,tu)&&(Object(kc["a"])(this,tu).unsubscribe(),Object(yc["a"])(this,tu,null))}}]),t}(),iu=new WeakMap,au=new WeakMap,ou=new WeakMap,su=new WeakMap,ru=new WeakMap,cu=new WeakMap,uu=new WeakMap,lu=new WeakMap,vu=new WeakMap,du=new WeakMap,hu=new WeakMap,pu=new WeakMap,mu=new WeakMap,gu=new WeakMap,fu=new WeakMap,bu=new WeakMap,yu=function(){function t(e,n){var a=this;Object(bc["a"])(this,t),iu.set(this,{writable:!0,value:null}),au.set(this,{writable:!0,value:null}),ou.set(this,{writable:!0,value:null}),su.set(this,{writable:!0,value:null}),ru.set(this,{writable:!0,value:null}),cu.set(this,{writable:!0,value:null}),uu.set(this,{writable:!0,value:null}),lu.set(this,{writable:!0,value:null}),vu.set(this,{writable:!0,value:null}),du.set(this,{writable:!0,value:null}),hu.set(this,{writable:!0,value:null}),pu.set(this,{writable:!0,value:null}),mu.set(this,{writable:!0,value:100}),gu.set(this,{writable:!0,value:function(){Object(yc["a"])(a,ru,new fi.a.Ros({url:Object(kc["a"])(a,cu)})),Object(kc["a"])(a,ru).on("connection",Object(kc["a"])(a,fu)),Object(kc["a"])(a,ru).on("close",Object(kc["a"])(a,bu)),Object(kc["a"])(a,ru).on("error",(function(t){return console.log("AGVR error: ",t)}))}}),fu.set(this,{writable:!0,value:function(){Object(yc["a"])(a,vu,new Gc(Object(kc["a"])(a,ru))),Object(yc["a"])(a,lu,new Jc(Object(kc["a"])(a,ru),Object(kc["a"])(a,iu))),Object(yc["a"])(a,du,new nu(Object(kc["a"])(a,ru),Object(kc["a"])(a,iu),Object(kc["a"])(a,ou))),Object(kc["a"])(a,uu).commit("agvs/setConnectionState",{agvId:Object(kc["a"])(a,iu),isConnected:!0})}}),bu.set(this,{writable:!0,value:function(){null!=Object(kc["a"])(a,lu)&&(Object(kc["a"])(a,lu).dispose(),Object(yc["a"])(a,lu,null)),null!=Object(kc["a"])(a,vu)&&(Object(kc["a"])(a,vu).dispose(),Object(yc["a"])(a,vu,null)),null!=Object(kc["a"])(a,du)&&(Object(kc["a"])(a,du).dispose(),Object(yc["a"])(a,du,null)),Object(kc["a"])(a,uu).commit("agvs/setConnectionState",{agvId:Object(kc["a"])(a,iu),isConnected:!1}),setTimeout(Object(kc["a"])(a,gu),3e3)}}),Object(yc["a"])(this,iu,e),Object(yc["a"])(this,ou,n),Object(yc["a"])(this,uu,i["default"].prototype.$store),Object(yc["a"])(this,su,Object(kc["a"])(this,uu).state.agvMaps.find((function(t){return t.id===n}))),Object(yc["a"])(this,au,Object(kc["a"])(this,uu).state.agvs.find((function(t){return t.id===Object(kc["a"])(a,iu)}))),Object(yc["a"])(this,cu,Object(kc["a"])(this,au).rosMasterUri),Object(kc["a"])(this,gu).call(this)}return Object(xc["a"])(t,[{key:"pushCmdvel",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(e){var n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:return n=Object(kc["a"])(this,au).properties,Object(yc["a"])(this,hu,{linear:{x:e.linear.x*n.movementSpeed.x,y:e.linear.y*n.movementSpeed.y,z:e.linear.z*n.movementSpeed.z},angular:{x:e.angular.x*n.rotateSpeed.x,y:e.angular.y*n.rotateSpeed.y,z:e.angular.z*n.rotateSpeed.z}}),null!=Object(kc["a"])(this,pu)&&clearInterval(Object(kc["a"])(this,pu)),t.next=7,this.pushAction({value:zo,type:"geometry_msgs/Twist",data:Object(kc["a"])(this,hu)},!1);case 7:0==Object(kc["a"])(this,hu).linear.x&&0==Object(kc["a"])(this,hu).angular.z||Object(yc["a"])(this,pu,setInterval(Object(Lc["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=Object(kc["a"])(i,vu)&&null!=Object(kc["a"])(i,hu)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(kc["a"])(i,vu).pushAction({value:zo,type:"geometry_msgs/Twist",data:Object(kc["a"])(i,hu)},!1);case 4:case"end":return t.stop()}}),t)}))),Object(kc["a"])(this,mu)));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"initializePose",value:function(){var t=Object(kc["a"])(this,au).webPose;this.pushAction({value:Yo,type:"geometry_msgs/PoseStamped",data:{header:{seq:0,stamp:{sec:0,nsec:0},frame_id:""},pose:{position:{x:Object(kc["a"])(this,su).rosMap.info.origin.position.x+t.position.x*Object(kc["a"])(this,su).rosMap.info.resolution/Object(kc["a"])(this,su).webMap.scale,y:Object(kc["a"])(this,su).rosMap.info.origin.position.y-(t.position.y/Object(kc["a"])(this,su).webMap.scale-Object(kc["a"])(this,su).rosMap.info.height)*Object(kc["a"])(this,su).rosMap.info.resolution,z:0},orientation:bi.globalThetaToQuaternion(t.orientation.z*Math.PI/180)}}})}},{key:"pushAction",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(e){var n,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],null!=Object(kc["a"])(this,vu)){t.next=3;break}return t.abrupt("return",null);case 3:return n&&console.log("push action ",e),t.next=6,Object(kc["a"])(this,vu).pushAction(e,n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"liftUp",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.pushAction({value:No,type:"geometry_msgs/Twist",data:{linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}}});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"liftDown",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.pushAction({value:Fo,type:"geometry_msgs/Twist",data:{linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}}});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"chargingStart",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.pushAction({value:Zo,type:"geometry_msgs/Twist",data:{linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}}});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"chargingEnd",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(kc["a"])(this,au).sim1000Pose,n=e.poseyaw*Math.PI/18e4,i={orientation:bi.globalThetaToQuaternion(n),position:{x:(e.posex+1500*Math.cos(n))/1e3,y:(e.posey+1500*Math.sin(n))/1e3,z:0}},t.next=5,this.pushAction({value:Ho,type:"geometry_msgs/PoseStamped",data:{header:{seq:0,stamp:{sec:0,nsec:0},frame_id:"map"},pose:i}});case 5:console.log("chargingEnd");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"liftIn",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.pushAction({value:$o,type:"geometry_msgs/Twist",data:{linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}}});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"liftOut",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(kc["a"])(this,au).sim1000Pose,n=e.poseyaw*Math.PI/18e4,i={orientation:bi.globalThetaToQuaternion(n),position:{x:(e.posex+1500*Math.cos(n))/1e3,y:(e.posey+1500*Math.sin(n))/1e3,z:0}},t.next=5,this.pushAction({value:Uo,type:"geometry_msgs/PoseStamped",data:{header:{seq:0,stamp:{sec:0,nsec:0},frame_id:"map"},pose:i}});case 5:console.log("liftOut");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"runJob",value:function(){var t=Object(Lc["a"])(regeneratorRuntime.mark((function t(){var e,n,i,a,o,s,r,c,u,l,v,d,h=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object(kc["a"])(this,uu).state.agvJobs.find((function(t){return t.id===Object(kc["a"])(h,au).jobId})),null!=e&&0!=e.tasks.length){t.next=3;break}return t.abrupt("return");case 3:n=Object(kc["a"])(this,su).webMap.scale,i=Object(kc["a"])(this,su).rosMap.info,a=0,o=!0,s=0;case 8:if(!(s<e.tasks.length)){t.next=55;break}return r=e.tasks[s],Object(kc["a"])(this,uu).commit("agvs/setAgvTask",{agvId:Object(kc["a"])(this,iu),taskId:r.id}),c=Object(kc["a"])(this,au).sim1000Pose,u={orientation:bi.globalThetaToQuaternion(r.thetaEnd*Math.PI/180),position:{x:i.origin.position.x+r.position.x*i.resolution/n,y:i.origin.position.y-(r.position.y/n-i.height)*i.resolution,z:0}},l={orientation:bi.globalThetaToQuaternion(Math.atan2(u.position.y-c.posey/1e3,u.position.x-c.posex/1e3)),position:{x:c.posex/1e3,y:c.posey/1e3,z:0}},t.next=16,this.pushAction({value:Bo,type:"geometry_msgs/PoseStamped",data:{header:{seq:0,stamp:{sec:0,nsec:0},frame_id:"map"},pose:l}});case 16:if(a=t.sent,console.log("result action rotate = ",a),a!=Bc&&(o=!1),o){t.next=21;break}return t.abrupt("break",55);case 21:return t.next=23,this.pushAction({value:Xo,type:"geometry_msgs/PoseStamped",data:{header:{seq:0,stamp:{sec:0,nsec:0},frame_id:"map"},pose:u}});case 23:if(a=t.sent,console.log("result action move goal = ",a),a!=Bc&&(o=!1),o){t.next=28;break}return t.abrupt("break",55);case 28:v=0;case 29:if(!(v<r.actions.length)){t.next=50;break}d=r.actions[v],t.t0=d.action,t.next=t.t0===Ho?34:t.t0===Uo?37:t.t0===Zo||t.t0===$o||t.t0===No||t.t0===Fo?40:45;break;case 34:return t.next=36,this.chargingEnd();case 36:return t.abrupt("break",45);case 37:return t.next=39,this.liftOut();case 39:return t.abrupt("break",45);case 40:return t.next=42,this.pushAction({value:d.action,type:"geometry_msgs/PoseStamped",data:{header:{seq:0,stamp:{sec:0,nsec:0},frame_id:"map"},pose:u}});case 42:a=t.sent,console.log("result action doing action ",d.name," = ",a),a!=Bc&&(o=!1);case 45:if(o){t.next=47;break}return t.abrupt("break",50);case 47:v++,t.next=29;break;case 50:if(o){t.next=52;break}return t.abrupt("break",55);case 52:s++,t.next=8;break;case 55:o&&Object(kc["a"])(this,uu).commit("agvJobs/clearTaskFromJob",{jobId:Object(kc["a"])(this,au).jobId});case 56:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),xu=new WeakMap,ku=function t(e){Object(bc["a"])(this,t),xu.set(this,{writable:!0,value:null}),Object(Eo["a"])(this,"robots",{});var n=i["default"].prototype.$store.state.agvMaps.find((function(t){return t.id===e})).agvIds;Object(yc["a"])(this,xu,new Vc(e));for(var a=0;a<n.length;a++)this.robots[n[a]]=new yu(n[a],e)},wu=new WeakMap,Mu=new WeakMap,Iu=function t(e){Object(bc["a"])(this,t),wu.set(this,{writable:!0,value:null}),Mu.set(this,{writable:!0,value:null}),Object(yc["a"])(this,wu,e.store),Object(kc["a"])(this,wu).dispatch("account/setToken",localStorage.getItem("agvr-account-token")),Object(yc["a"])(this,Mu,Object(kc["a"])(this,wu).state.account.token)},Su={install:function(t,e){t.prototype.$agvr=new ku(e);var n=t.prototype.$store;function i(){n.dispatch("navigation/changeWindowSize",{width:window.innerWidth,height:window.innerHeight-96})}function a(){n.state.navigation.taskMenuContext.isShow||n.state.navigation.agvMenuContext.isShow||n.state.navigation.agvInitPoseMenuContext.isShow||(n.dispatch("navigation/enableMapPanZoom"),n.dispatch("navigation/selectedNone"))}function o(t){switch(t.key){case"Delete":n.dispatch("agvJobs/removeTaskFromJob",{jobId:n.state.navigation.jobId,taskId:n.state.navigation.taskId});break}}window.addEventListener("mouseup",a),window.addEventListener("touchend",a),window.addEventListener("keydown",o),window.addEventListener("resize",i),i()}},ju={install:function(t,e){t.prototype.$agvrAccount=new Iu(e)}},Cu=n("ee98"),Ou=n.n(Cu);n("5aea");i["default"].config.productionTip=!1,i["default"].prototype.$store=pc,i["default"].use(fc["a"]),i["default"].use(Ma["a"]),i["default"].use(Ou.a),i["default"].use(Su,"6defbba5-0f1f-4b43-a32e-a24247bac7d8"),i["default"].use(ju,{store:pc}),new i["default"]({router:mr,store:pc,vuetify:gc,render:function(t){return t(l)}}).$mount("#app")},"5aea":function(t,e,n){},6062:function(t,e,n){t.exports=n.p+"img/agv.7eeefb1b.svg"},6596:function(t,e,n){},"666d":function(t,e,n){},6882:function(t,e,n){},"69fa":function(t,e,n){t.exports=n.p+"img/2.84411cc8.jpg"},"70dc":function(t,e,n){},"7a6c":function(t,e,n){"use strict";var i=n("2231"),a=n.n(i);a.a},8629:function(t,e,n){},"8ff5":function(t,e,n){"use strict";var i=n("a1da"),a=n.n(i);a.a},"9e05":function(t,e,n){"use strict";var i=n("8629"),a=n.n(i);a.a},a1da:function(t,e,n){},a598:function(t,e,n){t.exports=n.p+"img/4.b9796597.jpg"},a5a4:function(t,e,n){"use strict";var i=n("b1d2"),a=n.n(i);a.a},a9bd:function(t,e,n){"use strict";var i=n("c5b1"),a=n.n(i);a.a},b1d2:function(t,e,n){},b4e5:function(t,e,n){"use strict";var i=n("097f"),a=n.n(i);a.a},ba30:function(t,e,n){"use strict";var i=n("6882"),a=n.n(i);a.a},c0f4:function(t,e,n){},c5b1:function(t,e,n){},c959:function(t,e,n){t.exports=n.p+"img/3.6a8bcd69.jpg"},e92c:function(t,e,n){"use strict";var i=n("70dc"),a=n.n(i);a.a},f39d:function(t,e,n){"use strict";var i=n("fd51"),a=n.n(i);a.a},fd51:function(t,e,n){},fdfe:function(t,e,n){"use strict";var i=n("180a"),a=n.n(i);a.a}});
//# sourceMappingURL=app.5cd2d73a.js.map